<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[10901] Berkley CVMFS requests not proxied ?</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=10901" method="post">
<div class="page-header">
    <h3><span class="muted">10901</span> / Berkley CVMFS requests not proxied ?</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Steve Traylen</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/other</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Steve Traylen</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Check for updates</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2011-08-29</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">OSG RA <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">USATLAS (BNL Prod)&nbsp;<a target="_blank" href="https://rt.racf.bnl.gov/rt/Ticket/Display.html?id=20767">20767</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=10901", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/10901?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/10901?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Berkley%20CVMFS%20requests%20not%20proxied%20%3F%20ISSUE%3D10901%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='10901#1314714361'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-08-30T14:26:01+00:00">Aug 30, 2011 02:26 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1314714361">&nbsp;</a></div><pre>As it&#39;s been a week since the issue was reported, I&#39;ll assume it was temporary,
and due to a cache misconfiguration or problem. If this is not the case, and
connections persist directly to CERN, please respond here to re-open the issue
for further investigation.

The remaining question was whether a site with &#60; 500 nodes should require a
second cache node. Again&#58; if the recommendation is that another cache should be
added, please respond to note that here.

Thanks,
~John
-- by jd at Tue Aug 30 14&#58;25&#58;39 UTC 2011

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=20767</pre></div><div class='update_description'><i onclick="document.location='10901#1314292123'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-08-25T17:08:43+00:00">Aug 25, 2011 05:08 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1314292123">&nbsp;</a></div><pre>I think Yushu and I are the appropriate contacts, for now.  Yushu, do you
agree? The ip addresses  from the original list we were sent contained PDSF
machines at NERSC and some CernVM users.  Yushu suggested to me that we can
ask NERSC to make the changes for PDSF and have Pedrag change it in the
CernVM config.  We do need to make changes to our proxy here at LBL to allow
BNL first though. I am not sure how long this all will take. I will keep you
apprised of any progress we make.

I totally agree with Val.

<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; Also how many batch workers are behind it, can you justify adding a</font>
<font color='#7F7E6F'>&#62; &#62;&#62; second proxy?</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; I defer again to Val and Yushu for info about the infrastructure at LBL.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Yushu, I defer to you.</font>
<font color='#7F7E6F'>&#62;</font>

We have &#60;500nodes. Why do we need a second proxy?

<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62; Thanks,</font>
<font color='#7F7E6F'>&#62; &#62; ~John</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62; &#62;&#62; On Tue, Aug 23, 2011 at 8&#58;50 PM, Open Science Grid FootPrints</font>
<font color='#7F7E6F'>&#62; &#62;&#62; &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62;&#62;&#62; [Duplicate message snipped]</font>
<font color='#7F7E6F'>&#62; &#62;&#62; -- by Steven Traylen at Wed Aug 24 14&#58;06&#58;09 UTC 2011</font>
<font color='#7F7E6F'>&#62; &#62;&#62;</font>
<font color='#7F7E6F'>&#62; &#62;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; +++++++++++++++++++++++++++++++++</font>
<font color='#7F7E6F'>&#62; Val Hendrix</font>
<div id='show_1038482066' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1038482066'><font color='#7F7E6F'>&#62; VCHendrix@....</font>
<font color='#7F7E6F'>&#62; Lawrence Berkeley National Lab</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Mail Stop&#58; 50B-2239</font>
<font color='#7F7E6F'>&#62; Room&#58;       50B-2258E</font>
<font color='#7F7E6F'>&#62; Phone&#58;      (510) 495-2905</font>
<font color='#7F7E6F'>&#62; Skype&#58;       val.hendrix</font>
<font color='#7F7E6F'>&#62; +++++++++++++++++++++++++++++++++</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;</font>
-- by yyao@.... at Thu Aug 25 17&#58;08&#58;36 UTC 2011

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=20767
</div><script type='text/javascript'>
        $('#show_1038482066').click(function() {
            $('#detail_1038482066').slideDown("normal");
            $('#show_1038482066').hide();
            $('#hide_1038482066').show();
        });
        $('#hide_1038482066').click(function() {
            $('#detail_1038482066').slideUp();
            $('#hide_1038482066').hide();
            $('#show_1038482066').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='10901#1314291353'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-08-25T16:55:53+00:00">Aug 25, 2011 04:55 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1314291353">&nbsp;</a></div><pre>Steve,

On Aug 24, 2011, at 7&#58;32 AM, John DeStefano wrote&#58;

<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; There are some configuration tips here for the squid&#58;</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;&#62; <a href='http&#58;//cernvm.cern.ch/portal/node/123' target='_blank' rel='nofollow'>http&#58;//cernvm.cern.ch/portal/node/123</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Whom should I contact to request a change to the bit there about BNL not being</font>
in production?  I think that&#39;s causing confusion and may have some US/OSG sites
pointing directly to CERN instead of BNL.

I think Yushu and I are the appropriate contacts, for now.  Yushu, do you agree?
The ip addresses  from the original list we were sent contained PDSF machines at
NERSC and some CernVM users.  Yushu suggested to me that we can ask NERSC to
make the changes for PDSF and have Pedrag change it in the CernVM config.  We do
need to make changes to our proxy here at LBL to allow BNL first though. I am
not sure how long this all will take. I will keep you apprised of any progress
we make.

<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; Also how many batch workers are behind it, can you justify adding a</font>
<font color='#7F7E6F'>&#62;&#62; second proxy?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I defer again to Val and Yushu for info about the infrastructure at LBL.</font>

Yushu, I defer to you.

<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks,</font>
<font color='#7F7E6F'>&#62; ~John</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; On Tue, Aug 23, 2011 at 8&#58;50 PM, Open Science Grid FootPrints</font>
<font color='#7F7E6F'>&#62;&#62; &#60;osg@....&#62; wrote&#58;</font>
<div id='show_940348360' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_940348360'><font color='#7F7E6F'>&#62;&#62;&#62; [Duplicate message snipped]</font>
<font color='#7F7E6F'>&#62;&#62; -- by Steven Traylen at Wed Aug 24 14&#58;06&#58;09 UTC 2011</font>
<font color='#7F7E6F'>&#62;&#62;</font>
<font color='#7F7E6F'>&#62;</font>

+++++++++++++++++++++++++++++++++
Val Hendrix
VCHendrix@....
Lawrence Berkeley National Lab

Mail Stop&#58; 50B-2239
Room&#58;       50B-2258E
Phone&#58;      (510) 495-2905
Skype&#58;       val.hendrix
+++++++++++++++++++++++++++++++++

-- by vchendrix@.... at Thu Aug 25 16&#58;55&#58;45 UTC 2011

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=20767
</div><script type='text/javascript'>
        $('#show_940348360').click(function() {
            $('#detail_940348360').slideDown("normal");
            $('#show_940348360').hide();
            $('#hide_940348360').show();
        });
        $('#hide_940348360').click(function() {
            $('#detail_940348360').slideUp();
            $('#hide_940348360').hide();
            $('#show_940348360').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='10901#1314197287'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-08-24T14:48:07+00:00">Aug 24, 2011 02:48 PM UTC</time> by <b>Steven Traylen</b><a class="anchor" name="1314197287">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; Whom should I contact to request a change to the bit there about BNL not being</font>
<font color='#7F7E6F'>&#62; in production? Â I think that&#39;s causing confusion and may have some US/OSG sites</font>
<font color='#7F7E6F'>&#62; pointing directly to CERN instead of BNL.</font>

To Jakob or to the cvmfs-talk list will be fine also.

On Wed, Aug 24, 2011 at 4&#58;32 PM, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='10901#1314196354'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-08-24T14:32:34+00:00">Aug 24, 2011 02:32 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1314196354">&nbsp;</a></div><pre>Hi Steve,

On Aug 24, 2011, at 10&#58;07 AM, OSG GOC TX via RT wrote&#58;

<font color='#7F7E6F'>&#62; Ho John,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Thanks for the reply.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Do you have some idea as to why the first proxy fails?</font>

The initial cause is not clear, but the proxy has since recovered and is
available, though it seems the WNs won&#39;t pick it up unless they are restarted.
Including Val and Yushu in case they can provide more information.

<font color='#7F7E6F'>&#62; There are some configuration tips here for the squid&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; <a href='http&#58;//cernvm.cern.ch/portal/node/123' target='_blank' rel='nofollow'>http&#58;//cernvm.cern.ch/portal/node/123</a></font>

Whom should I contact to request a change to the bit there about BNL not being
in production?  I think that&#39;s causing confusion and may have some US/OSG sites
pointing directly to CERN instead of BNL.

<font color='#7F7E6F'>&#62; checking it really is running with &#62; 1024 sockets is also worth while,</font>
<font color='#7F7E6F'>&#62; this was</font>
<font color='#7F7E6F'>&#62; a cause of failures here&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [root@caproxy01 ~]#  squidclient mgr&#58;info | grep desc</font>
<font color='#7F7E6F'>&#62; File descriptor usage for squid&#58;</font>
<font color='#7F7E6F'>&#62;         Maximum number of file descriptors&#58;   16384</font>
<font color='#7F7E6F'>&#62;         Largest file desc currently in use&#58;    858</font>
<font color='#7F7E6F'>&#62;         Number of file desc currently in use&#58;  533</font>
<font color='#7F7E6F'>&#62;         Available number of file descriptors&#58; 15851</font>
<font color='#7F7E6F'>&#62;         Reserved number of file descriptors&#58;   100</font>

That&#39;s a lot of descriptors!  We use 8096 at BNL.
<div id='show_1397469792' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1397469792'>
<font color='#7F7E6F'>&#62; Also how many batch workers are behind it, can you justify adding a</font>
<font color='#7F7E6F'>&#62; second proxy?</font>

I defer again to Val and Yushu for info about the infrastructure at LBL.

Thanks,
~John

<font color='#7F7E6F'>&#62; On Tue, Aug 23, 2011 at 8&#58;50 PM, Open Science Grid FootPrints</font>
<font color='#7F7E6F'>&#62; &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62; &#62; [Duplicate message snipped]</font>
<font color='#7F7E6F'>&#62;  -- by Steven Traylen at Wed Aug 24 14&#58;06&#58;09 UTC 2011</font>
<font color='#7F7E6F'>&#62;</font>

-- by jd at Wed Aug 24 14&#58;32&#58;26 UTC 2011

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=20767
</div><script type='text/javascript'>
        $('#show_1397469792').click(function() {
            $('#detail_1397469792').slideDown("normal");
            $('#show_1397469792').hide();
            $('#hide_1397469792').show();
        });
        $('#hide_1397469792').click(function() {
            $('#detail_1397469792').slideUp();
            $('#hide_1397469792').hide();
            $('#show_1397469792').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='10901#1314194769'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-08-24T14:06:09+00:00">Aug 24, 2011 02:06 PM UTC</time> by <b>Steven Traylen</b><a class="anchor" name="1314194769">&nbsp;</a></div><pre>Ho John,

Thanks for the reply.

Do you have some idea as to why the first proxy fails?

There are some configuration tips here for the squid&#58;

<a href='http&#58;//cernvm.cern.ch/portal/node/123' target='_blank' rel='nofollow'>http&#58;//cernvm.cern.ch/portal/node/123</a>

checking it really is running with &#62; 1024 sockets is also worth while, this was
a cause of failures here&#58;

[root@caproxy01 ~]#  squidclient mgr&#58;info | grep desc
File descriptor usage for squid&#58;
Maximum number of file descriptors&#58;   16384
Largest file desc currently in use&#58;    858
Number of file desc currently in use&#58;  533
Available number of file descriptors&#58; 15851
Reserved number of file descriptors&#58;   100

Also how many batch workers are behind it, can you justify adding a
second proxy?

On Tue, Aug 23, 2011 at 8&#58;50 PM, Open Science Grid FootPrints
&#60;osg@....&#62; wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='10901#1314125434'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-08-23T18:50:34+00:00">Aug 23, 2011 06:50 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1314125434">&nbsp;</a></div><pre>Relevant information from Val Hendrix and Yushu Yao at LBL&#58;

&#34;We do have a functional Proxy at LBL, and most of the traffic is via that
proxy. Unfortunately, when the proxy failed the client uses the next proxy in
the list which is DIRECT CERN for us. The problem is the CVMFS never checks if
the proxy is back again so it keeps using it until the machine restarts. In the
case of PDFS, it is not feasible for the production machines to restart
frequently, so it keeps using direct.

According to Yushu, the solution is for CVMFS to implement a feature that
checks if the proxy is back.&#34;

The LBL folks are working to address this, and will also use BNL&#39;s replica
moving forward.

~John
-- by jd at Tue Aug 23 18&#58;50&#58;27 UTC 2011

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=20767</pre></div><div class='update_description'><i onclick="document.location='10901#1314105311'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-08-23T13:15:11+00:00">Aug 23, 2011 01:15 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1314105311">&nbsp;</a></div><pre>Hi Steve,

Thanks for your report. Though the DNS records for these hosts are not
accessible, your presumption that they&#39;re at LBL is likely accurate.

I&#39;ll follow up with LBL and report back.

~John

On Tue Aug 23 07&#58;11&#58;10 2011, osg-goc-rest wrote&#58;
<font color='#7F7E6F'>&#62; [by Steve Traylen]</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Hi,</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; This if for Berkley atlas site assuming that the IPs listed below are</font>
<font color='#7F7E6F'>&#62; at Berkley which as far</font>
<font color='#7F7E6F'>&#62; as I can tell they are.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Anyway these hosts are all individually contacting the CVMFS stratum 1</font>
<font color='#7F7E6F'>&#62; service at</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; <a href='http&#58;//cvmfs-stratum-one.cern.ch/' target='_blank' rel='nofollow'>http&#58;//cvmfs-stratum-one.cern.ch/</a></font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Typically I would expect to see a less hosts from one site since we</font>
<font color='#7F7E6F'>&#62; expect sites to pass</font>
<font color='#7F7E6F'>&#62; their requests through a squid service or similar.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Could you comment as to if these are direct connections or perhaps you</font>
<font color='#7F7E6F'>&#62; just have a lot</font>
<font color='#7F7E6F'>&#62; of squid servers?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; What ever there is no actual problem and the requests are not impacting</font>
<font color='#7F7E6F'>&#62; the service at all</font>
<font color='#7F7E6F'>&#62; but it is good to check if the service from your point of view mainly</font>
<font color='#7F7E6F'>&#62; can be improved.</font>
<div id='show_2030065853' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_2030065853'><font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Alternatively these are not CVMFS clients at all and something else.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Many Thanks</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Steve Traylen, CERN-IT .</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; 128.55.36.114</font>
<font color='#7F7E6F'>&#62; 128.55.36.118</font>
<font color='#7F7E6F'>&#62; 128.55.36.120</font>
<font color='#7F7E6F'>&#62; 128.55.36.124</font>
<font color='#7F7E6F'>&#62; 128.55.36.127</font>
<font color='#7F7E6F'>&#62; 128.55.36.128</font>
<font color='#7F7E6F'>&#62; 128.55.36.131</font>
<font color='#7F7E6F'>&#62; 128.55.36.132</font>
<font color='#7F7E6F'>&#62; 128.55.36.133</font>
<font color='#7F7E6F'>&#62; 128.55.36.136</font>
<font color='#7F7E6F'>&#62; 128.55.36.163</font>
<font color='#7F7E6F'>&#62; 128.55.36.165</font>
<font color='#7F7E6F'>&#62; 128.55.36.168</font>
<font color='#7F7E6F'>&#62; 128.55.36.172</font>
<font color='#7F7E6F'>&#62; 128.55.36.173</font>
<font color='#7F7E6F'>&#62; 128.55.36.174</font>
<font color='#7F7E6F'>&#62; 128.55.36.181</font>
<font color='#7F7E6F'>&#62; 128.55.36.184</font>
<font color='#7F7E6F'>&#62; 128.55.36.186</font>
<font color='#7F7E6F'>&#62; 128.55.36.191</font>
<font color='#7F7E6F'>&#62; 128.55.36.204</font>
<font color='#7F7E6F'>&#62; 128.55.36.210</font>
<font color='#7F7E6F'>&#62; 128.55.36.214</font>
<font color='#7F7E6F'>&#62; 128.55.37.10</font>
<font color='#7F7E6F'>&#62; 128.55.37.31</font>
<font color='#7F7E6F'>&#62; 128.55.37.34</font>
<font color='#7F7E6F'>&#62; 128.55.37.36</font>
<font color='#7F7E6F'>&#62; 128.55.37.37</font>
<font color='#7F7E6F'>&#62; 128.55.37.40</font>
<font color='#7F7E6F'>&#62; 128.55.37.45</font>
<font color='#7F7E6F'>&#62; 128.55.38.82</font>
<font color='#7F7E6F'>&#62; 128.55.38.86</font>
<font color='#7F7E6F'>&#62; 128.55.38.87</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [META Information]</font>
<font color='#7F7E6F'>&#62; Assignment Reason&#58; possible assignees at this hour (7)&#58; adeximo.</font>
<font color='#7F7E6F'>&#62; adeximo has the least amount of tickets.</font>
<font color='#7F7E6F'>&#62; adeximo has 26 tickets.</font>
<font color='#7F7E6F'>&#62; Submitter doesn&#39;t know the VO he/she belongs.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Ticket Origin]</font>
<font color='#7F7E6F'>&#62; <a href='10901#1314097865' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/viewer?id=10901#1314097865</a></font>
-- by jd at Tue Aug 23 13&#58;14&#58;55 UTC 2011

GOCTX Source&#58; BNL Ticket&#58; Queue=GridServices ID=20767
</div><script type='text/javascript'>
        $('#show_2030065853').click(function() {
            $('#detail_2030065853').slideDown("normal");
            $('#show_2030065853').hide();
            $('#hide_2030065853').show();
        });
        $('#hide_2030065853').click(function() {
            $('#detail_2030065853').slideUp();
            $('#hide_2030065853').hide();
            $('#show_2030065853').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='10901#1314097754'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2011-08-23T11:09:14+00:00">Aug 23, 2011 11:09 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1314097754">&nbsp;</a></div><pre>[by Steve Traylen]

Hi,

This if for Berkley atlas site assuming that the IPs listed below are at Berkley which as far
as I can tell they are.

Anyway these hosts are all individually contacting the CVMFS stratum 1 service at

<a href='http&#58;//cvmfs-stratum-one.cern.ch/' target='_blank' rel='nofollow'>http&#58;//cvmfs-stratum-one.cern.ch/</a>

Typically I would expect to see a less hosts from one site since we expect sites to pass
their requests through a squid service or similar.

Could you comment as to if these are direct connections or perhaps you just have a lot
of squid servers?

What ever there is no actual problem and the requests are not impacting the service at all
but it is good to check if the service from your point of view mainly can be improved.

Alternatively these are not CVMFS clients at all and something else.

Many Thanks

Steve Traylen, CERN-IT .

128.55.36.114
128.55.36.118
128.55.36.120
128.55.36.124
128.55.36.127
128.55.36.128
128.55.36.131
128.55.36.132
128.55.36.133
<div id='show_1456964593' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1456964593'>128.55.36.136
128.55.36.163
128.55.36.165
128.55.36.168
128.55.36.172
128.55.36.173
128.55.36.174
128.55.36.181
128.55.36.184
128.55.36.186
128.55.36.191
128.55.36.204
128.55.36.210
128.55.36.214
128.55.37.10
128.55.37.31
128.55.37.34
128.55.37.36
128.55.37.37
128.55.37.40
128.55.37.45
128.55.38.82
128.55.38.86
128.55.38.87

</div><script type='text/javascript'>
        $('#show_1456964593').click(function() {
            $('#detail_1456964593').slideDown("normal");
            $('#show_1456964593').hide();
            $('#hide_1456964593').show();
        });
        $('#hide_1456964593').click(function() {
            $('#detail_1456964593').slideUp();
            $('#hide_1456964593').hide();
            $('#show_1456964593').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F10901">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 10901});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
