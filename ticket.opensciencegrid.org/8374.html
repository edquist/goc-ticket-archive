<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[8374] US/AGLT2 Log put error&#58; The pilot will fail the job since the remote file does not exist</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=8374" method="post">
<div class="page-header">
    <h3><span class="muted">8374</span> / US/AGLT2 Log put error&#58; The pilot will fail the job since the remote file does not exist</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Wensheng Deng</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">ATLAS</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USATLAS</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Elevated</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">TX Incoming</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2010-05-28</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=57186">57186</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/8374", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='8374#1274904522'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-26T20:08:42+00:00">May 26, 2010 08:08 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1274904522">&nbsp;</a></div><pre>Checked log of this job which finished today&#58;
<a href='http&#58;//voatlas19.cern.ch&#58;25980/monitor/logs/db69fbd1-4173-4729-b095-3d75344e51de/tarball_PandaJob_1075056111_AGLT2/pilotlog.txt' target='_blank' rel='nofollow'>http&#58;//voatlas19.cern.ch&#58;25980/monitor/logs/db69fbd1-4173-4729-b095-3d75344e51de/tarball_PandaJob_1075056111_AGLT2/pilotlog.txt</a>

26 May 15&#58;05&#58;22|SiteMover.py| Executing command&#58; source /afs/atlas.umich.edu/OSGWN/setup.sh;export X509_USER_PROXY=/atlas/osghome/usatlas1/.globus/job/gate01.aglt2.org/732946.1274885020/x509_up; lcg-ls -l -b --connect-timeout=300 --sendreceive-timeout=3600 -T srmv2 <a href='srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasproddisk/valid1/EVNT/e552/valid1.107499.singlepart_empty.evgen.EVNT.e552_tid144306_00/EVNT.144306._000009.pool.root.1' target='_blank' rel='nofollow'>srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasproddisk/valid1/EVNT/e552/valid1.107499.singlepart_empty.evgen.EVNT.e552_tid144306_00/EVNT.144306._000009.pool.root.1</a>
26 May 15&#58;05&#58;22|SiteMover.py| -rw-r--r--   1     2     2  602230               ONLINE /pnfs/aglt2.org/atlasproddisk/valid1/EVNT/e552/valid1.107499.singlepart_empty.evgen.EVNT.e552_tid144306_00/EVNT.144306._000009.pool.root.1
* Checksum&#58; b0f194e6 (adler32)
* Space tokens&#58; 980400
26 May 15&#58;05&#58;22|SiteMover.py| Remote adler32 checksum has correct length and is alphanumeric
26 May 15&#58;05&#58;22|lcgcp2SiteMo| Remote checksum&#58; b0f194e6
26 May 15&#58;05&#58;22|lcgcp2SiteMo| Local checksum&#58; b0f194e6
26 May 15&#58;05&#58;22|lcgcp2SiteMo| Remote and local checksums verified

It looks like this is what we expected. Closing the ticket.

Regards,
Wensheng
-- by Wensheng Deng at Wed May 26 20&#58;07&#58;28 UTC 2010</pre></div><div class='update_description'><i onclick="document.location='8374#1274888715'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-26T15:45:15+00:00">May 26, 2010 03:45 PM UTC</time> by <b>USATLAS</b><a class="anchor" name="1274888715">&nbsp;</a></div><pre>Ticket ID&#58; [rt.racf.bnl.gov #15953]
Requestors&#58; osg@....
Queue&#58; GLTier2
Owner&#58; Shawn Mckee
Status&#58; open
Priority&#58; None
Transaction&#58; Correspondence added by ball@....
Subject&#58; GGUS-Ticket-ID&#58; #57186 Open Science Grid&#58; US/AGLT2 Log put error&#58; The pilot will fail the job since the remote file ... ISSUE=8374 PROJ=71
GGUS Ticket&#58; 57186
OSG GOC Ticket&#58; 8374

------------------------------------------------------------------------------

For the sake of reference, this is the wn-client for osg 1.2.9.

bob

Shawn Mckee via RT wrote&#58;

Ticket URL&#58;     <a href='https&#58;//rt.racf.bnl.gov/rt/Ticket/Display.html?id=15953' target='_blank' rel='nofollow'>https&#58;//rt.racf.bnl.gov/rt/Ticket/Display.html?id=15953</a>
Requestors&#58;     osg@....             Ccs&#58;   (None)
Queue&#58;   GLTier2
Owner&#58;   Shawn Mckee
Status&#58;     open
Priority&#58;     None
Transaction&#58;   Correspondence added by   smckee@....         Subject&#58;   GGUS-Ticket-ID&#58; #57186 Open Science Grid&#58; US/AGLT2 Log put error&#58; The pilot will fail the job since the remote file ... ISSUE=8374 PROJ=71
GGUS Ticket&#58;     57186
OSG GOC Ticket&#58;     8374

--------------------------------------------------------------------------

Hi Everyone,

We updated the OSGÂ WN package last night at AGLT2&#58;

<div id='show_1070869033' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1070869033'>smckee@umt3int01 ~$ source /afs/atlas.umich.edu/OSGWN/setup.sh
smckee@umt3int01 ~$ which lcg-ls
/afs/atlas.umich.edu/OSGWN/lcg/bin/lcg-ls
smckee@umt3int01 ~$ lcg-ls --version
lcg_util-1.7.6-1
GFAL-client-1.11.9-1

This should be the most recent version.Â Â  Are the pilot changes now
working with this version in place?

Can we close the ticket?

Thanks,

Shawn
</div><script type='text/javascript'>
        $('#show_1070869033').click(function() {
            $('#detail_1070869033').slideDown("normal");
            $('#show_1070869033').hide();
            $('#hide_1070869033').show();
        });
        $('#hide_1070869033').click(function() {
            $('#detail_1070869033').slideUp();
            $('#hide_1070869033').hide();
            $('#show_1070869033').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='8374#1274887627'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-26T15:27:07+00:00">May 26, 2010 03:27 PM UTC</time> by <b>USATLAS</b><a class="anchor" name="1274887627">&nbsp;</a></div><pre>Ticket ID&#58; [rt.racf.bnl.gov #15953]
Requestors&#58; osg@....
Queue&#58; GLTier2
Owner&#58; Shawn Mckee
Status&#58; open
Priority&#58; None
Transaction&#58; Correspondence added by smckee@....
Subject&#58; GGUS-Ticket-ID&#58; #57186 Open Science Grid&#58; US/AGLT2 Log put error&#58; The pilot will fail the job since the remote file ... ISSUE=8374 PROJ=71
GGUS Ticket&#58; 57186
OSG GOC Ticket&#58; 8374

------------------------------------------------------------------------------

Hi Everyone,

We updated the OSG WN package last night at AGLT2&#58;

smckee@umt3int01 ~$ source /afs/atlas.umich.edu/OSGWN/setup.sh
smckee@umt3int01 ~$ which lcg-ls
/afs/atlas.umich.edu/OSGWN/lcg/bin/lcg-ls
smckee@umt3int01 ~$ lcg-ls --version
lcg_util-1.7.6-1
GFAL-client-1.11.9-1

This should be the most recent version.   Are the pilot changes now working
with this version in place?

Can we close the ticket?

Thanks,

Shawn</pre></div><div class='update_description'><i onclick="document.location='8374#1274474886'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-21T20:48:06+00:00">May 21, 2010 08:48 PM UTC</time> by <b>Fred Luehring</b><a class="anchor" name="1274474886">&nbsp;</a></div><pre>Hi Bob and Paul,

I saw that Paul released the new and improved pilot today. Do you think
that the issue is resolved?

Fred
On 5/17/10 2&#58;59 PM, Bob Ball wrote&#58;
<font color='#7F7E6F'>&#62; As far as I can tell, from reviewing the ticket, no consistent solution</font>
<font color='#7F7E6F'>&#62; is yet implemented for auto-pilots to sites which use the Chimera DB for</font>
<font color='#7F7E6F'>&#62; dCache as we do at AGLT2.  I could be mis-reading it.  There is some</font>
<font color='#7F7E6F'>&#62; indication in the history that there is an FTS bug of some kind that is</font>
<font color='#7F7E6F'>&#62; influencing results?</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Paul says on May 4 that any changes at that date will not get into the</font>
<font color='#7F7E6F'>&#62; next auto-pilot release.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; From my view here, the issue needs resolution in the auto-pilot</font>
<font color='#7F7E6F'>&#62; submission to us, and is not in our hands except as a test bed for any</font>
<font color='#7F7E6F'>&#62; fixes.  Paul or someone else that is knowledgable should review the</font>
<font color='#7F7E6F'>&#62; ticket and comment.  I have explicitly included Paul, Shawn and Fred in</font>
<font color='#7F7E6F'>&#62; this response in case the ticket routing does not include them.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; bob</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Open Science Grid FootPrints wrote&#58;</font>
<font color='#7F7E6F'>&#62;&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8374#1274128930'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-17T20:42:10+00:00">May 17, 2010 08:42 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1274128930">&nbsp;</a></div><pre>From where is this lcg-ls coming?  That&#39;s from the OSGWN, right?

[ball@umt3int01&#58;~]$ source /afs/atlas.umich.edu/OSGWN/setup.sh
[ball@umt3int01&#58;~]$ which lcg-ls
/afs/atlas.umich.edu/OSGWN/lcg/bin/lcg-ls
[ball@umt3int01&#58;~]$ lcg-ls --version
lcg_util-1.6.11
GFAL-client-1.10.11

Is there a more recent version released of this?  I see the setup.sh is
dated Aug 23, 2009.

bob

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8374#1274126207'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-17T19:56:47+00:00">May 17, 2010 07:56 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1274126207">&nbsp;</a></div><pre>Hi Guys,

Since there were other new features that had to be added and tested, I managed to squeeze in this change as well. So it will be in the next pilot update (auto-pilot is the pilot submission system..). Depending on when the validation is completed it will checked in soon, maybe even tomorrow. But if the unrelated validation [of other new features] fail it will take a little longer, but not much.

However, as I pointed out earlier, getting the checksum from lcg-ls doesn&#39;t appear to work at AGLT2&#58;

<a href='http&#58;//panda.cern.ch&#58;25980/server/pandamon/query?job=1071672660' target='_blank' rel='nofollow'>http&#58;//panda.cern.ch&#58;25980/server/pandamon/query?job=1071672660</a>

May 20&#58;38&#58;41|SiteMover.py| Executing command&#58; source /afs/atlas.umich.edu/OSGWN/setup.sh;export X509_USER_PROXY=/atlas/osghome/usatlas1/.globus/job/gate01.aglt2.org/758059.1273866176/x509_up; lcg-ls -l -b -t 3600 -T srmv2 <a href='srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasproddisk/prod_test/HITS/e466_s676/prod_test.105004.pythia_ddiff.simul.HITS.e466_s676_tid136412_00/HITS.136412._004800.pool.root.2' target='_blank' rel='nofollow'>srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasproddisk/prod_test/HITS/e466_s676/prod_test.105004.pythia_ddiff.simul.HITS.e466_s676_tid136412_00/HITS.136412._004800.pool.root.2</a>
14 May 20&#58;38&#58;41|SiteMover.py| -rw-r--r--   1     2     2 3609741               ONLINE /pnfs/aglt2.org/atlasproddisk/prod_test/HITS/e466_s676/prod_test.105004.pythia_ddiff.simul.HITS.e466_s676_tid136412_00/HITS.136412._004800.pool.root.2
14 May 20&#58;38&#58;41|SiteMover.py| Checksum pattern not found in output (skip this checksum extraction method

I would recommend you to try a later version locally. I have not added the retry mechanism for the &#34;use&#34; method, but can do it in the next version which should come shortly after the next release if you think that is still needed.

Cheers,
Paul
-- by Paul Nilsson at Mon May 17 19&#58;55&#58;04 UTC 2010</pre></div><div class='update_description'><i onclick="document.location='8374#1274122809'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-17T19:00:09+00:00">May 17, 2010 07:00 PM UTC</time> by <b>Bobby Ball</b><a class="anchor" name="1274122809">&nbsp;</a></div><pre>As far as I can tell, from reviewing the ticket, no consistent solution
is yet implemented for auto-pilots to sites which use the Chimera DB for
dCache as we do at AGLT2.  I could be mis-reading it.  There is some
indication in the history that there is an FTS bug of some kind that is
influencing results?

Paul says on May 4 that any changes at that date will not get into the
next auto-pilot release.

From my view here, the issue needs resolution in the auto-pilot
submission to us, and is not in our hands except as a test bed for any
fixes.  Paul or someone else that is knowledgable should review the
ticket and comment.  I have explicitly included Paul, Shawn and Fred in
this response in case the ticket routing does not include them.

bob

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='8374#1274122627'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-17T18:57:07+00:00">May 17, 2010 06:57 PM UTC</time> by <b>Shawn McKee</b><a class="anchor" name="1274122627">&nbsp;</a></div><pre>Hi Kyle,

I have no update.  I believe the ticket morphed somewhat from the original into &#34;how to get checksums for dCache/Chimera from the pilot&#34;.

I would be in favor of closing this ticket and we can open a new one if issues related to this arise again.

Thanks,

Shawn</pre></div><div class='update_description'><i onclick="document.location='8374#1274101907'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-17T13:11:47+00:00">May 17, 2010 01:11 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1274101907">&nbsp;</a></div><pre>Shawn,

Do you have any updates/responses for this ticket?

Kyle</pre></div><div class='update_description'><i onclick="document.location='8374#1273485537'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-10T09:58:57+00:00">May 10, 2010 09:58 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1273485537">&nbsp;</a></div><pre>Hi,

I see other problems with trying to grab the checksum from the lcg-ls output. Here are RAL

09 May 11&#58;36&#58;31|SiteMover.py| Executing command&#58; export X509_USER_PROXY=/tmp/globus-tmp.lcg1336.15323.0; lcg-ls -l -b --connect-timeout=300 --sendreceive-timeout=3600 -T srmv2 <a href='srm&#58;//srm-atlas.gridpp.rl.ac.uk&#58;8443/srm/managerv2?SFN=/castor/ads.rl.ac.uk/prod/atlas/simStrip/atlasmcdisk/prod_test/HITS/e466_s676/prod_test.105004.pythia_ddiff.simul.HITS.e466_s676_tid134552_00/HITS.134552._004532.pool.root.2' target='_blank' rel='nofollow'>srm&#58;//srm-atlas.gridpp.rl.ac.uk&#58;8443/srm/managerv2?SFN=/castor/ads.rl.ac.uk/prod/atlas/simStrip/atlasmcdisk/prod_test/HITS/e466_s676/prod_test.105004.pythia_ddiff.simul.HITS.e466_s676_tid134552_00/HITS.134552._004532.pool.root.2</a>
09 May 11&#58;36&#58;31|SiteMover.py| -rw-r--r--   1     2     2 3709428               ONLINE /castor/ads.rl.ac.uk/prod/atlas/simStrip/atlasmcdisk/prod_test/HITS/e466_s676/prod_test.105004.pythia_ddiff.simul.HITS.e466_s676_tid134552_00/HITS.134552._004532.pool.root.2
* Checksum&#58; 00000000 ()

And here at CERN&#58;

07 May 15&#58;40&#58;16|SiteMover.py| Executing command&#58; export X509_USER_PROXY=/tmp/globus-tmp.lxbsq1304.5600.0; lcg-ls -l -b --connect-timeout=300 --sendreceive-timeout=3600 -T srmv2 <a href='srm&#58;//srm-atlas.cern.ch&#58;8443/srm/managerv2?SFN=/castor/cern.ch/grid/atlas/atlasmcdisk/panda/destDB/2690c920-ff74-4cea-b6ae-431e8d3955aa_sub07205639/panda.destDB.2690c920-ff74-4cea-b6ae-431e8d3955aa/08e42a2d-e67c-4bb3-9764-9a11d6bb47f1_0.evgen.pool.root' target='_blank' rel='nofollow'>srm&#58;//srm-atlas.cern.ch&#58;8443/srm/managerv2?SFN=/castor/cern.ch/grid/atlas/atlasmcdisk/panda/destDB/2690c920-ff74-4cea-b6ae-431e8d3955aa_sub07205639/panda.destDB.2690c920-ff74-4cea-b6ae-431e8d3955aa/08e42a2d-e67c-4bb3-9764-9a11d6bb47f1_0.evgen.pool.root</a>
07 May 15&#58;40&#58;17|SiteMover.py| -rw-r--r--   1     2     2 71342978               ONLINE /castor/cern.ch/grid/atlas/atlasmcdisk/panda/destDB/2690c920-ff74-4cea-b6ae-431e8d3955aa_sub07205639/panda.destDB.2690c920-ff74-4cea-b6ae-431e8d3955aa/08e42a2d-e67c-4bb3-9764-9a11d6bb47f1_0.evgen.pool.root
* Checksum&#58;  ()
* Space tokens&#58; atlas&#58;ATLASMCDISK
07 May 15&#58;40&#58;17|SiteMover.py| Checksum pattern not found in output (skip this checksum extraction method)

In the second case it seems the pilot can just skip it, but it looks like some kind of error when the checksum is set to 00000000 (although the file size was correct).

Can someone please comment?

Cheers,
Paul

[GGUS Internal Fields]
AffectedSite&#58; AGLT2_SE
ConcernedVO&#58; atlas

-- by Paul Nilsson at Mon May 10 09&#58;57&#58;03 UTC 2010</pre></div><div class='update_description'><i onclick="document.location='8374#1273174788'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-06T19:39:48+00:00">May 6, 2010 07:39 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1273174788">&nbsp;</a></div><pre>Hi,

I&#39;m not seeing the checksum in the output&#58;

06 May 18&#58;31&#58;16|SiteMover.py| Executing command&#58; source /afs/atlas.umich.edu/OSGWN/setup.sh;export X509_USER_PROXY=/atlas/osghome/usatlas1/.globus/job/gate01.aglt2.org/869465.1273167728/x509_up; lcg-ls -l -b -t 3600 -T srmv2 <a href='srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasproddisk/panda/destDB/c8c35342-6b68-4305-996f-f01bfb81cd58_sub07187694/panda.destDB.c8c35342-6b68-4305-996f-f01bfb81cd58/003609d7-a53b-4fbb-92d7-38490fca5763_0.evgen.pool.root' target='_blank' rel='nofollow'>srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasproddisk/panda/destDB/c8c35342-6b68-4305-996f-f01bfb81cd58_sub07187694/panda.destDB.c8c35342-6b68-4305-996f-f01bfb81cd58/003609d7-a53b-4fbb-92d7-38490fca5763_0.evgen.pool.root</a>
06 May 18&#58;31&#58;16|SiteMover.py| -rw-r--r--   1     2     2 80598124               ONLINE /pnfs/aglt2.org/atlasproddisk/panda/destDB/c8c35342-6b68-4305-996f-f01bfb81cd58_sub07187694/panda.destDB.c8c35342-6b68-4305-996f-f01bfb81cd58/003609d7-a53b-4fbb-92d7-38490fca5763_0.evgen.pool.root
06 May 18&#58;31&#58;16|SiteMover.py| Checksum pattern not found in output (skip this checksum extraction method)
06 May 18&#58;31&#58;16|SiteMover.py| lcg-ls version is too old, cannot extract checksum from command output

Is the setup file outdated?

Cheers,
Paul

[GGUS Internal Fields]
AffectedSite&#58; AGLT2_SE
ConcernedVO&#58; atlas

-- by Paul Nilsson at Thu May 06 19&#58;37&#58;03 UTC 2010</pre></div><div class='update_description'><i onclick="document.location='8374#1272984498'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-04T14:48:18+00:00">May 4, 2010 02:48 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1272984498">&nbsp;</a></div><pre>Just to add, this will cover &#62; 90% of cases, since dCache stores (and exposes) the checksum and the same for DPM (at least the current production version i.e. 1.7.2). Careful to case sensitivity, there is an open bug in FTS about this.

On May 4, 2010, at 4&#58;40 PM, Paul Nilsson wrote&#58;

<font color='#7F7E6F'>&#62; Sorry, I missed your point. You&#39;re saying that if lcg-ls returns the info then use it. Sure, we can do that. Although it probably won&#39;t make it for the next release.</font>
<font color='#7F7E6F'>&#62; Paul</font>
-- by Simone Campana at Tue May 04 14&#58;47&#58;02 UTC 2010</pre></div><div class='update_description'><i onclick="document.location='8374#1272984157'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-04T14:42:37+00:00">May 4, 2010 02:42 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1272984157">&nbsp;</a></div><pre>ok. but in the pilot code for US, we don&#39;t do lcg-cr, instead do lcg-ls + lfc registration.

sh-3.2$  lcg-ls -l -b -T srmv2 <a href='srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/BNLT0D1/data10_7TeV/NTUP_TRKVALID/RAW_r1239/data10_7TeV.00152878.physics_MinBias.merge.NTUP_TRKVALID.RAW_r1239_tid134218_00/NTUP_TRKVALID.134218._001789.root.2' target='_blank' rel='nofollow'>srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/BNLT0D1/data10_7TeV/NTUP_TRKVALID/RAW_r1239/data10_7TeV.00152878.physics_MinBias.merge.NTUP_TRKVALID.RAW_r1239_tid134218_00/NTUP_TRKVALID.134218._001789.root.2</a>
-rw-r--r--   1     2     2 241781863               ONLINE /pnfs/usatlas.bnl.gov/BNLT0D1/data10_7TeV/NTUP_TRKVALID/RAW_r1239/data10_7TeV.00152878.physics_MinBias.merge.NTUP_TRKVALID.RAW_r1239_tid134218_00/NTUP_TRKVALID.134218._001789.root.2
* Checksum&#58; 89526bb2 (adler32)
* Space tokens&#58; 10000

this doesn&#39;t require any ToA change.

Regards,
Wensheng

[GGUS Internal Fields]
AffectedSite&#58; AGLT2_SE
ConcernedVO&#58; atlas

-- by Wensheng Deng at Tue May 04 14&#58;42&#58;32 UTC 2010

Sorry, I missed your point. You&#39;re saying that if lcg-ls returns the info then use it. Sure, we can do that. Although it probably won&#39;t make it for the next release.
Paul
-- by Paul Nilsson at Tue May 04 14&#58;41&#58;03 UTC 2010</pre></div><div class='update_description'><i onclick="document.location='8374#1272983946'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-04T14:39:06+00:00">May 4, 2010 02:39 PM UTC</time> by <b>Shawn McKee</b><a class="anchor" name="1272983946">&nbsp;</a></div><pre>Hi Paul, Wensheng,

Paul, it probably is a good idea to allow for one retry after 1 minute if either checking for the file existing fails or the checksum fetching fails.  However see the next paragraph.

It seems like the newest lcg-ls may return checksum info without even specifying -checksum.   It would be useful to see what happens to other sites.   In any case, as Wensheng noted, if you could extract that checksum info (if it shows up) that would remove the need to specifically try to get it.  If it isn&#39;t present from the lcg-ls an explicit call could be made after.

Thanks,

Shawn</pre></div><div class='update_description'><i onclick="document.location='8374#1272983717'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-04T14:35:17+00:00">May 4, 2010 02:35 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1272983717">&nbsp;</a></div><pre>The advice from Simone was to not use --checksum anywhere until the ToA modifications are in place. Using it can cause unpredictable failures in the commands. At BNL it works fine since the server is also updated, but it will not work on all sites even if the local command supports the new option, so the pilot will not know when it can use it. We will add this feature to the pilot within the next several weeks when ToA has been updated.
Paul

[GGUS Internal Fields]
AffectedSite&#58; AGLT2_SE
ConcernedVO&#58; atlas

-- by Paul Nilsson at Tue May 04 14&#58;33&#58;03 UTC 2010</pre></div><div class='update_description'><i onclick="document.location='8374#1272983271'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-04T14:27:51+00:00">May 4, 2010 02:27 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1272983271">&nbsp;</a></div><pre>Hi,

As mentioned in my previous reply, obtaining checksum with current lcg-ls is very simple. I tried the client installation both in CERN and BNL, to the SRM servers in AGLT2 and BNL&#58;
source /afs/cern.ch/project/gd/LCG-share/sl5/external/etc/profile.d/grid-env.sh
which lcg-ls; /afs/cern.ch/project/gd/LCG-share/3.2.1-0/lcg/bin/lcg-ls

. /afs/usatlas.bnl.gov/osg/client/@sys/current/setup.sh
which lcg-ls; /afs/usatlas.bnl.gov/osg/client/x8664_sl5/osg-1.2.3/lcg/bin/lcg-ls

sh-3.2$ lcg-ls -l -b -T srmv2 <a href='srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasproddisk/mc09_7TeV/HITS/e542_s766/mc09_7TeV.113203.HerwigppMinBias.simul.HITS.e542_s766_tid133285_03/HITS.133285._037277.pool.root.1' target='_blank' rel='nofollow'>srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasproddisk/mc09_7TeV/HITS/e542_s766/mc09_7TeV.113203.HerwigppMinBias.simul.HITS.e542_s766_tid133285_03/HITS.133285._037277.pool.root.1</a>
-rw-r--r--   1     2     2 71926849               ONLINE /pnfs/aglt2.org/atlasproddisk/mc09_7TeV/HITS/e542_s766/mc09_7TeV.113203.HerwigppMinBias.simul.HITS.e542_s766_tid133285_03/HITS.133285._037277.pool.root.1
* Checksum&#58; 6cfb25f4 (adler32)
* Space tokens&#58; 980400

sh-3.2$  lcg-ls -l -b -T srmv2 <a href='srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/BNLT0D1/data10_7TeV/NTUP_TRKVALID/RAW_r1239/data10_7TeV.00152878.physics_MinBias.merge.NTUP_TRKVALID.RAW_r1239_tid134218_00/NTUP_TRKVALID.134218._001789.root.2' target='_blank' rel='nofollow'>srm&#58;//dcsrm.usatlas.bnl.gov&#58;8443/srm/managerv2?SFN=/pnfs/usatlas.bnl.gov/BNLT0D1/data10_7TeV/NTUP_TRKVALID/RAW_r1239/data10_7TeV.00152878.physics_MinBias.merge.NTUP_TRKVALID.RAW_r1239_tid134218_00/NTUP_TRKVALID.134218._001789.root.2</a>
-rw-r--r--   1     2     2 241781863               ONLINE /pnfs/usatlas.bnl.gov/BNLT0D1/data10_7TeV/NTUP_TRKVALID/RAW_r1239/data10_7TeV.00152878.physics_MinBias.merge.NTUP_TRKVALID.RAW_r1239_tid134218_00/NTUP_TRKVALID.134218._001789.root.2
* Checksum&#58; 89526bb2 (adler32)
* Space tokens&#58; 10000

As we can see, lcg-ls return the file size AND checksum. In pilot code, where you extract file size from the result of lcg-ls, why not add a few lines to get checksum?

Just in case to some srm servers, lcg-ls could not get checksum, we can do the tricks (cat, or http/Ruby) as before.

This is not so urgent as before since we  now have checksum verification in T1 site services. But still it&#39;s better to add the check, also why keeps retrying cat we know it won&#39;t work?

Best Regards,
Wensheng

[GGUS Internal Fields]
AffectedSite&#58; AGLT2_SE
ConcernedVO&#58; atlas

-- by Wensheng Deng at Tue May 04 14&#58;26&#58;08 UTC 2010</pre></div><div class='update_description'><i onclick="document.location='8374#1272965785'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-04T09:36:25+00:00">May 4, 2010 09:36 AM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1272965785">&nbsp;</a></div><pre>Hi,

Currently the pilot can only verify the version of the client but this is not enough since the --checksum option has to be supported on the server side as well, which in turn is not supported everywhere. We&#39;re working on adding this info to ToA which the pilot can query. There&#39;s no time estimate when this will be ready however, and most likely it will take a couple of more weeks at least.

If the pilot cannot perform the checksum test, it will default to the size verification - unless, as you have seen, the file doesn&#39;t exist in which case it will fail. Shawn, can you please remind me (I can&#39;t find the email where we discussed it earlier) - was the conclusion that the pilot should wait a minute and then repeat the checksum test? It will not succeed due to the missing info but at least it will not fail the job, assuming the file will show up within a couple of minutes. I presume it won&#39;t help to just skip the checksum test since the file size test will also fail due to &#34;missing file&#34; issue.

<font color='#7F7E6F'>&#62; Hiro provided us with a Ruby/mongrel/pound solution to retrieve dCache/Chimera checksums using PNFSID. This &#34;service&#34; allows &#62; a wget/curl command to retrieve the checksum from our dCache (head02.aglt2.org) headnode</font>

We are using this at BNL but it is only implemented in the special BNL dCache site mover, so it will take time to adapt for use at other sites. It has been on the long term todo list since a long time. I will make it a higher priority although it will not make it for the next pilot release since the changes are significant.

Let me know about the checksum questions above and I will try to fix it in the next pilot release.

Cheers,
Paul

[GGUS Internal Fields]
AffectedSite&#58; AGLT2_SE
ConcernedVO&#58; atlas

-- by Paul Nilsson at Tue May 04 09&#58;35&#58;03 UTC 2010</pre></div><div class='update_description'><i onclick="document.location='8374#1272913707'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-03T19:08:27+00:00">May 3, 2010 07:08 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1272913707">&nbsp;</a></div><pre>This job finished at AGLT2 today&#58; <a href='http&#58;//panda.cern.ch&#58;25980/server/pandamon/query?job=1067921666' target='_blank' rel='nofollow'>http&#58;//panda.cern.ch&#58;25980/server/pandamon/query?job=1067921666</a>
Its log is&#58;
<a href='http&#58;//voatlas19.cern.ch&#58;25980/monitor/logs/40159e10-056f-42a0-a2c3-efd18d72ac24/tarball_PandaJob_1067921666_AGLT2/pilotlog.txt' target='_blank' rel='nofollow'>http&#58;//voatlas19.cern.ch&#58;25980/monitor/logs/40159e10-056f-42a0-a2c3-efd18d72ac24/tarball_PandaJob_1067921666_AGLT2/pilotlog.txt</a>

After the ouput was copied to the SE,  we called lcg-ls to get the size of the file on SE. But checksum is available just one below the size, at least with the version of lcg-ls I have. So it looks like we don&#39;t need to do the &#39;cat /pnfs......(use)(2)...&#39; trick which does not work anyway.
<font color='#7F7E6F'>&#62; lcg-ls -l -b -T srmv2 <a href='srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasproddisk/mc09_7TeV/HITS/e542_s766/mc09_7TeV.113203.HerwigppMinBias.simul.HITS.e542_s766_tid133285_03/HITS.133285._037277.pool.root.1' target='_blank' rel='nofollow'>srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasproddisk/mc09_7TeV/HITS/e542_s766/mc09_7TeV.113203.HerwigppMinBias.simul.HITS.e542_s766_tid133285_03/HITS.133285._037277.pool.root.1</a></font>
-rw-r--r--   1     2     2 71926849               ONLINE /pnfs/aglt2.org/atlasproddisk/mc09_7TeV/HITS/e542_s766/mc09_7TeV.113203.HerwigppMinBias.simul.HITS.e542_s766_tid133285_03/HITS.133285._037277.pool.root.1
* Checksum&#58; 6cfb25f4 (adler32)
* Space tokens&#58; 980400
<font color='#7F7E6F'>&#62; lcg-ls --version</font>
lcg_util-1.7.4-1
GFAL-client-1.11.6-2

Regards,
Wensheng

[GGUS Internal Fields]
AffectedSite&#58; AGLT2_SE
ConcernedVO&#58; atlas

-- by Wensheng Deng at Mon May 03 19&#58;06&#58;37 UTC 2010</pre></div><div class='update_description'><i onclick="document.location='8374#1272912567'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-05-03T18:49:27+00:00">May 3, 2010 06:49 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1272912567">&nbsp;</a></div><pre>According to a mesasge on atlas-project-adc-operations list last Wednesday, there are more than ten sites in Atlas which are using Chimera. How is it handled in these sites? It looks like lcg-cr and lcg-cp has the options&#58;
[--checksum] [--checksum-type type]

Regards,
Wensheng

[GGUS Internal Fields]
AffectedSite&#58; AGLT2_SE
ConcernedVO&#58; atlas

-- by Wensheng Deng at Mon May 03 18&#58;47&#58;50 UTC 2010</pre></div><div class='update_description'><i onclick="document.location='8374#1272630391'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-30T12:26:31+00:00">Apr 30, 2010 12:26 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1272630391">&nbsp;</a></div><pre>All,

Is there any update on this issue?

Thanks,
Kyle</pre></div><div class='update_description'><i onclick="document.location='8374#1271791587'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-20T19:26:27+00:00">Apr 20, 2010 07:26 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1271791587">&nbsp;</a></div><pre>I have set the next action date to one week from today.  I will ping at that time.

Kyle</pre></div><div class='update_description'><i onclick="document.location='8374#1271446146'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-16T19:29:06+00:00">Apr 16, 2010 07:29 PM UTC</time> by <b>Shawn McKee</b><a class="anchor" name="1271446146">&nbsp;</a></div><pre>Hi Paul,

Chimera (as opposed to PNFS) no longer provides access to the dCache checksums via this method&#58;

&#39;cat &#60;path&#62;/.(use)(2)(filename)&#39;

We have been running Chimera for over 1 year (so this has not changed recently).   As an example on our site&#58;

smckee@umt3int01 ~$ cat &#39;/pnfs/aglt2.org/atlasproddisk/mc09_7TeV/ESD/e517_s764_s767_r1229/mc09_7TeV.105001.pythia_minbias.recon.ESD.e517_s764_s767_r1229_tid126165_00/.(use)(2)(ESD.126165._009018.pool.root.1)&#39;
2,0,0,0.0,0.0
&#58;h=no;

As you can see there is no checksum returned.   This is a change from what PNFS does.

So you should not be able to get ANY checksums from our site using this method.  As you noted, most jobs ARE working so either the checksum isn&#39;t required or you have alternate methods to retrieve it?

Hiro provided us with a Ruby/mongrel/pound solution to retrieve dCache/Chimera checksums using PNFSID.   This &#34;service&#34; allows a wget/curl command to retrieve the checksum from our dCache (head02.aglt2.org) headnode.

Shawn</pre></div><div class='update_description'><i onclick="document.location='8374#1271445651'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-16T19:20:51+00:00">Apr 16, 2010 07:20 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1271445651">&nbsp;</a></div><pre>Hi Shawn,

<font color='#7F7E6F'>&#62;Just a quick comment about this routine&#58; It won&#39;t work on dCache/Chimera sites.</font>

What does this mean? I think I don&#39;t understand the point.. Looking at the panda monitor, &#34;only&#34; 250 jobs failed out of 1642 (finished) and 912 (transferring). Did you change something in the SE recently? The code has been in use for a long time.

Cheers,
Paul

[GGUS Internal Fields]
AffectedSite&#58; AGLT2_SE
ConcernedVO&#58; atlas

-- by Paul Nilsson at Fri Apr 16 19&#58;19&#58;02 UTC 2010</pre></div><div class='update_description'><i onclick="document.location='8374#1271442280'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-16T18:24:40+00:00">Apr 16, 2010 06:24 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1271442280">&nbsp;</a></div><pre>That is what is being actually used in AGLT2. See a job failed today which has the log available&#58;
<a href='http&#58;//panda.cern.ch&#58;25980/server/pandamon/query?job=1062641902' target='_blank' rel='nofollow'>http&#58;//panda.cern.ch&#58;25980/server/pandamon/query?job=1062641902</a>
<a href='http&#58;//voatlas19.cern.ch&#58;25980/monitor/logs/87c2a57d-89b0-49fa-a21a-8b532e570d52/tarball_PandaJob_1062641902_AGLT2/pilotlog.txt' target='_blank' rel='nofollow'>http&#58;//voatlas19.cern.ch&#58;25980/monitor/logs/87c2a57d-89b0-49fa-a21a-8b532e570d52/tarball_PandaJob_1062641902_AGLT2/pilotlog.txt</a>
......
16 Apr 16&#58;23&#58;03|Mover.py    | !!WARNING!!2999!! Error in copying (attempt 1)&#58; 1103 - The pilot will fail the job since the remote file does not exist
16 Apr 16&#58;23&#58;03|Mover.py    | Return code&#58; 1103
16 Apr 16&#58;23&#58;03|Mover.py    | !!WARNING!!2999!! Failed to transfer ESD.126183._002690.pool.root.1&#58; 1103 (No such file or directory)
16 Apr 16&#58;23&#58;03|Mover.py    | Return fields&#58; [&#39;&#39;, &#39;&#39;, &#39;&#39;, &#39;&#39;, &#39;&#39;, &#39;&#39;, &#39;&#39;]
16 Apr 16&#58;23&#58;03|runJob.py   | Put function returned code&#58; 1103
16 Apr 16&#58;23&#58;03|runJob.py   | !!FAILED!! No such file or directory
16 Apr 16&#58;23&#58;03|RunJobUtilit| Final job state set to&#58; failed
......

it exited from &#39;attempt 1&#39; and failed.

For a finished job, the pilot made four attempts to get checksum on SE as expected, failed. And then verified the size and went ahead to register the file&#58;
<a href='http&#58;//panda.cern.ch&#58;25980/server/pandamon/query?job=1062649125' target='_blank' rel='nofollow'>http&#58;//panda.cern.ch&#58;25980/server/pandamon/query?job=1062649125</a>
<a href='http&#58;//voatlas21.cern.ch&#58;25980/monitor/logs/64035196-79b9-4b1c-b6cb-1a5d86d627f8/tarball_PandaJob_1062649125_AGLT2/pilotlog.txt' target='_blank' rel='nofollow'>http&#58;//voatlas21.cern.ch&#58;25980/monitor/logs/64035196-79b9-4b1c-b6cb-1a5d86d627f8/tarball_PandaJob_1062649125_AGLT2/pilotlog.txt</a>
......
16 Apr 14&#58;39&#58;30|SiteMover.py| dCache checksum retrieval failed (attempt 1)
16 Apr 14&#58;39&#58;33|SiteMover.py| data = [&#39;2,0,0,0.0,0.0&#92;n&#39;, &#39;&#58;h=no;&#92;n&#39;]
16 Apr 14&#58;39&#58;33|SiteMover.py| dCache checksum retrieval failed (attempt 2)
16 Apr 14&#58;39&#58;39|SiteMover.py| data = [&#39;2,0,0,0.0,0.0&#92;n&#39;, &#39;&#58;h=no;&#92;n&#39;]
16 Apr 14&#58;39&#58;39|SiteMover.py| dCache checksum retrieval failed (attempt 3)
16 Apr 14&#58;39&#58;48|lcgcp2SiteMo| Could not get remote checksum
.....
-- by Wensheng Deng at Fri Apr 16 18&#58;23&#58;06 UTC 2010</pre></div><div class='update_description'><i onclick="document.location='8374#1271440026'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-16T17:47:06+00:00">Apr 16, 2010 05:47 PM UTC</time> by <b>USATLAS</b><a class="anchor" name="1271440026">&nbsp;</a></div><pre>Ticket ID&#58; [rt.racf.bnl.gov #15953]
Requestors&#58; osg@....
Queue&#58; GLTier2
Owner&#58; Shawn Mckee
Status&#58; open
Priority&#58; None
Transaction&#58; Correspondence added by smckee@....
Subject&#58; GGUS-Ticket-ID&#58; #57186 Open Science Grid&#58; US/AGLT2 Log put error&#58; The pilot will fail the job since the remote file ... ISSUE=8374 PROJ=71
OSG GOC Ticket&#58; 8374
GGUS Ticket&#58; 57186

------------------------------------------------------------------------------

Just a quick comment about this routine&#58;  It won&#39;t work on dCache/Chimera
sites.

In dCache/Chimera the checksum is no longer provided as part of the level-2
metadata in /pnfs.

Not sure what is done for Chimera sites?

Thanks,

Shawn</pre></div><div class='update_description'><i onclick="document.location='8374#1271439759'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-16T17:42:39+00:00">Apr 16, 2010 05:42 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1271439759">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; wget <a href='http&#58;//panda.cern.ch&#58;25880/cache/pilotcode.tar.gz' target='_blank' rel='nofollow'>http&#58;//panda.cern.ch&#58;25880/cache/pilotcode.tar.gz</a></font>
<font color='#7F7E6F'>&#62; tar zxvf pilotcode.tar.gz</font>

The getdCacheChecksum( ) is in the script SiteMover.py&#58;
def getdCacheChecksum(dir, filename)&#58;
&#34;&#34;&#34; Retrieve the remote checksum in SEs using dCache and PNFS &#34;&#34;&#34;
# Note&#58; this function is used by both lcgcp2SiteMover and dCacheSiteMover
# which is why it is not put in dCacheSiteMover even though it is specific to dCache

fchecksum = None

# abort check if the remote file system is not visible on the worker node
if not SiteMover.isPNFSVisible(dir)&#58;
return None

for attempt in range(1,4)&#58;
try&#58;
f = open(&#34;%s/.(use)(2)(%s)&#34; % (dir, filename), &#39;r&#39;)
except Exception, e&#58;
tolog(&#34;Warning&#58; Exception caught in getdCacheChecksum()&#58; %s, attempt %d&#34; % (str(e), attempt))
if &#34;No such file or directory&#34; in str(e)&#58;
return &#34;NOSUCHFILE&#34;
else&#58;
data = f.readlines()
# data = [&#39;2,0,0,0.0,0.0&#92;n&#39;, &#39;&#58;c=1&#58;3ef569d9;h=yes;l=60170430;&#92;n&#39;]
f.close()
tolog(&#34;data = %s&#34; % str(data))
for line in data&#58;
if &#39;c=&#39; in line&#58;
for word in line.split(&#39;;&#39;)&#58;
if word.startswith(&#39;c=&#39;) or word.startswith(&#39;&#58;c=&#39;)&#58;
value = word.split(&#39;=&#39;)[1]
fchecksum = value.split(&#39;&#58;&#39;)[1]
if fchecksum&#58;
break
<div id='show_1740153635' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1740153635'>else&#58;
tolog(&#34;dCache checksum retrieval failed (attempt %d)&#34; % (attempt))
fchecksum = None
time.sleep(attempt*3)

if fchecksum&#58;
# adler32 or md5sum
if len(fchecksum) == 8 or len(fchecksum) == 32&#58;
pass # valid checksum
else&#58;
tolog(&#34;!!WARNING!!2999!! Bad dCache checksum&#58; %s&#34; % (fchecksum))
fchecksum = None

return fchecksum
getdCacheChecksum = staticmethod(getdCacheChecksum)

[GGUS Internal Fields]
AffectedSite&#58; AGLT2_SE
ConcernedVO&#58; atlas

-- by Wensheng Deng at Fri Apr 16 17&#58;41&#58;08 UTC 2010
</div><script type='text/javascript'>
        $('#show_1740153635').click(function() {
            $('#detail_1740153635').slideDown("normal");
            $('#show_1740153635').hide();
            $('#hide_1740153635').show();
        });
        $('#hide_1740153635').click(function() {
            $('#detail_1740153635').slideUp();
            $('#hide_1740153635').hide();
            $('#show_1740153635').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='8374#1271431567'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-16T15:26:07+00:00">Apr 16, 2010 03:26 PM UTC</time> by <b>USATLAS</b><a class="anchor" name="1271431567">&nbsp;</a></div><pre>Ticket ID&#58; [rt.racf.bnl.gov #15953]
Requestors&#58; osg@....
Queue&#58; GLTier2
Owner&#58; Shawn Mckee
Status&#58; open
Priority&#58; None
Transaction&#58; Correspondence added by smckee@....
Subject&#58; GGUS-Ticket-ID&#58; #57186 Open Science Grid&#58; US/AGLT2 Log put error&#58; The pilot will fail the job since the remote file ... ISSUE=8374 PROJ=71
OSG GOC Ticket&#58; 8374
GGUS Ticket&#58; 57186

------------------------------------------------------------------------------

Just got this email from Mark Sosebee.   Seems to be the same issue.

&#34;Hi Bob, Shawn,

This morning there have been 71 job failures at AGLT2 with errors like this in
the pilot log&#58;

16 Apr 13&#58;08&#58;15|SiteMover.py| Warning&#58; Exception caught in
getdCacheChecksum()&#58; [Errno 2] No such file or directory&#58;
&#39;/pnfs/aglt2.org/atlasproddisk/mc09_7TeV/ESD/e517_s764_s767_r1229/mc09_7TeV.105001.pythia_minbias.recon.ESD.e517_s764_s767_r1229_tid126165_00/.(use)(2)(ESD.126165._009018.pool.root.1)&#39;,
attempt 1

16 Apr 13&#58;08&#58;15|lcgcp2SiteMo| !!WARNING!!2999!! The pilot will fail the job
since the remote file does not exist

16 Apr 13&#58;08&#58;15|lcgcp2SiteMo| Updated tracing report&#58; {&#39;protocol&#39;&#58; &#39;lcg2&#39;,
&#39;transferStart&#39;&#58; None, &#39;eventType&#39;&#58; &#39;put_sm&#39;, &#39;suspicious&#39;&#58; &#39;0&#39;, &#39;timeEnd&#39;&#58;
1271423295.4075489, &#39;dataset&#39;&#58;
&#39;mc09_7TeV.105001.pythia_minbias.recon.ESD.e517_s764_s767_r1229_tid126165_00_sub06720588&#39;,
&#39;catStart&#39;&#58; 1271422937.518213, &#39;duid&#39;&#58; None, &#39;guid&#39;&#58;
&#39;4624C4494949DF11BEA70026B92674A6&#39;, &#39;uuid&#39;&#58; &#39;48f9fa90495811dfaf110026b92674a6&#39;,
&#39;hostname&#39;&#58; &#39;bl-3-8.aglt2.org&#39;, &#39;remoteSite&#39;&#58; &#39;AGLT2_PRODDISK&#39;, &#39;filename&#39;&#58;
<div id='show_1925755244' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1925755244'>&#39;ESD.126165._009018.pool.root.1&#39;, &#39;version&#39;&#58; None, &#39;filesize&#39;&#58; &#39;906550588&#39;,
&#39;ip&#39;&#58; &#39;192.41.230.79&#39;, &#39;usrdn&#39;&#58; &#39;borut.kersevan@....&#39;, &#39;usr&#39;&#58;
&#39;9630920b4c8a5c1b94ecf22376915231&#39;, &#39;eventVersion&#39;&#58; &#39;pilot3&#39;, &#39;localSite&#39;&#58;
&#39;AGLT2_PRODDISK&#39;, &#39;validateStart&#39;&#58; 1271423295.387907, &#39;timeStart&#39;&#58;
1271422937.4699631, &#39;relativeStart&#39;&#58; 1271422941.6640589, &#39;appid&#39;&#58; 1062606024,
&#39;clientState&#39;&#58; &#39;NOSUCHFILE&#39;}

16 Apr 13&#58;08&#58;15|SiteMover.py| Tracing server&#58;
<a href='https&#58;//atlas-ddmtracer.cern.ch&#58;443/dq2/ws_tracer/rpc' target='_blank' rel='nofollow'>https&#58;//atlas-ddmtracer.cern.ch&#58;443/dq2/ws_tracer/rpc</a>

16 Apr 13&#58;08&#58;15|SiteMover.py| Sending tracing report&#58; {&#39;protocol&#39;&#58; &#39;lcg2&#39;,
&#39;transferStart&#39;&#58; None, &#39;eventType&#39;&#58; &#39;put_sm&#39;, &#39;suspicious&#39;&#58; &#39;0&#39;, &#39;timeEnd&#39;&#58;
1271423295.4075489, &#39;dataset&#39;&#58;
&#39;mc09_7TeV.105001.pythia_minbias.recon.ESD.e517_s764_s767_r1229_tid126165_00_sub06720588&#39;,
&#39;catStart&#39;&#58; 1271422937.518213, &#39;duid&#39;&#58; None, &#39;guid&#39;&#58;
&#39;4624C4494949DF11BEA70026B92674A6&#39;, &#39;uuid&#39;&#58; &#39;48f9fa90495811dfaf110026b92674a6&#39;,
&#39;hostname&#39;&#58; &#39;bl-3-8.aglt2.org&#39;, &#39;remoteSite&#39;&#58; &#39;AGLT2_PRODDISK&#39;, &#39;filename&#39;&#58;
&#39;ESD.126165._009018.pool.root.1&#39;, &#39;version&#39;&#58; None, &#39;filesize&#39;&#58; &#39;906550588&#39;,
&#39;ip&#39;&#58; &#39;192.41.230.79&#39;, &#39;usrdn&#39;&#58; &#39;borut.kersevan@....&#39;, &#39;usr&#39;&#58;
&#39;9630920b4c8a5c1b94ecf22376915231&#39;, &#39;eventVersion&#39;&#58; &#39;pilot3&#39;, &#39;localSite&#39;&#58;
&#39;AGLT2_PRODDISK&#39;, &#39;validateStart&#39;&#58; 1271423295.387907, &#39;timeStart&#39;&#58;
1271422937.4699631, &#39;relativeStart&#39;&#58; 1271422941.6640589, &#39;appid&#39;&#58; 1062606024,
&#39;clientState&#39;&#58; &#39;NOSUCHFILE&#39;}

16 Apr 13&#58;08&#58;15|SiteMover.py| Executing command&#58; curl --connect-timeout 20
--max-time 120 -v -k -d
&#34;report=%7B%27protocol%27%3A+%27lcg2%27%2C+%27transferStart%27%3A+None%2C+%27eventType%27%3A+%27put_sm%27%2C+%27suspicious%27%3A+%270%27%2C+%27timeEnd%27%3A+1271423295.4075489%2C+%27dataset%27%3A+%27mc09_7TeV.105001.pythia_minbias.recon.ESD.e517_s764_s767_r1229_tid126165_00_sub06720588%27%2C+%27catStart%27%3A+1271422937.518213%2C+%27duid%27%3A+None%2C+%27guid%27%3A+%274624C4494949DF11BEA70026B92674A6%27%2C+%27uuid%27%3A+%2748f9fa90495811dfaf110026b92674a6%27%2C+%27hostname%27%3A+%27bl-3-8.aglt2.org%27%2C+%27remoteSite%27%3A+%27AGLT2_PRODDISK%27%2C+%27filename%27%3A+%27ESD.126165._009018.pool.root.1%27%2C+%27version%27%3A+None%2C+%27filesize%27%3A+%27906550588%27%2C+%27ip%27%3A+%27192.41.230.79%27%2C+%27usrdn%27%3A+%27borut.kersevan%40ijs.si%27%2C+%27usr%27%3A+%279630920b4c8a5c1b94ecf22376915231%27%2C+%27eventVersion%27%3A+%27pilot3%27%2C+%27localSite%27%3A+%27AGLT2_PRODDISK%27%2C+%27validateStart%27%3A+1271423295.387907%2C+%27timeStart%27%3A+1271422937.4699631%2C+%27relativeStart%27%3A+1271422941.6640589%2C+%27appid%27%3A+1062606024%2C+%27clientState%27%3A+%27NOSUCHFILE%27%7D&operation=addReport&API=0_3_0&#34;
<a href='https&#58;//atlas-ddmtracer.cern.ch&#58;443/dq2/ws_tracer/rpc' target='_blank' rel='nofollow'>https&#58;//atlas-ddmtracer.cern.ch&#58;443/dq2/ws_tracer/rpc</a>

16 Apr 13&#58;08&#58;17|SiteMover.py| Tracing report sent

16 Apr 13&#58;08&#58;17|Mover.py | Site mover put function returned&#58; s=1103, r_gpfn=,
r_fsize=0, r_fchecksum=0, r_farch=, pilotErrorDiag=The pilot will fail the job
since the remote file does not exist

16 Apr 13&#58;08&#58;17|Mover.py | !!WARNING!!2999!! Error in copying (attempt 1)&#58; 1103
- The pilot will fail the job since the remote file does not exist

16 Apr 13&#58;08&#58;17|Mover.py | Return code&#58; 1103

16 Apr 13&#58;08&#58;17|Mover.py | !!WARNING!!2999!! Failed to transfer
ESD.126165._009018.pool.root.1&#58; 1103 (No such file or directory)

Job listing&#58;

<a href='http&#58;//panda.cern.ch&#58;25980/server/pandamon/query?job=*&pilotErrorCode=1103&site=AGLT2&cloud=US&hours=12&sort=endt' target='_blank' rel='nofollow'>http&#58;//panda.cern.ch&#58;25980/server/pandamon/query?job=*&pilotErrorCode=1103&site=AGLT2&cloud=US&hours=12&sort=endt</a>

-- Mark&#34;

Again this time the &#34;missing&#34; file does exist on our system&#58;

smckee@umt3int01 ~$ ls -al
/pnfs/aglt2.org/atlasproddisk/mc09_7TeV/ESD/e517_s764_s767_r1229/mc09_7TeV.105001.pythia_minbias.recon.ESD.e517_s764_s767_r1229_tid126165_00/ESD.126165._009018.pool.root.1

-rw-r--r-- 1 usatlas1 usatlas 906550588 Apr 16 09&#58;07
/pnfs/aglt2.org/atlasproddisk/mc09_7TeV/ESD/e517_s764_s767_r1229/mc09_7TeV.105001.pythia_minbias.recon.ESD.e517_s764_s767_r1229_tid126165_00/ESD.126165._009018.pool.root.1

There must be some kind of timing issue involved here?     I&#39;m not sure what we
can do to resolve this.

Shawn
</div><script type='text/javascript'>
        $('#show_1925755244').click(function() {
            $('#detail_1925755244').slideDown("normal");
            $('#show_1925755244').hide();
            $('#hide_1925755244').show();
        });
        $('#hide_1925755244').click(function() {
            $('#detail_1925755244').slideUp();
            $('#hide_1925755244').hide();
            $('#show_1925755244').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='8374#1271423175'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-16T13:06:15+00:00">Apr 16, 2010 01:06 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1271423175">&nbsp;</a></div><pre>I don&#39;t see any job or transfer errors caused by this from the site in the past day here, so it looks like this is fixed now?

[GGUS Internal Fields]
AffectedSite&#58; AGLT2_SE
ConcernedVO&#58; atlas

-- by Douglas Smith at Fri Apr 16 13&#58;05&#58;41 UTC 2010</pre></div><div class='update_description'><i onclick="document.location='8374#1271422730'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-16T12:58:50+00:00">Apr 16, 2010 12:58 PM UTC</time> by <b>Rob Quick</b><a class="anchor" name="1271422730">&nbsp;</a></div><pre>Wensheng or Paul,

Is there any update to this missing file issue?

Rob</pre></div><div class='update_description'><i onclick="document.location='8374#1271099780'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-12T19:16:20+00:00">Apr 12, 2010 07:16 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1271099780">&nbsp;</a></div><pre>it looks like conversation about this is ongoing, so I&#39;ll change the action date and ping next week.

Kyle</pre></div><div class='update_description'><i onclick="document.location='8374#1271005370'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-11T17:02:50+00:00">Apr 11, 2010 05:02 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1271005370">&nbsp;</a></div><pre>I should CC to Paul earlier. Just did it now.

Wensheng

[GGUS Internal Fields]
AffectedSite&#58; AGLT2_SE
ConcernedVO&#58; atlas

-- by Wensheng Deng at Sun Apr 11 17&#58;01&#58;06 UTC 2010</pre></div><div class='update_description'><i onclick="document.location='8374#1271004966'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-11T16:56:06+00:00">Apr 11, 2010 04:56 PM UTC</time> by <b>USATLAS</b><a class="anchor" name="1271004966">&nbsp;</a></div><pre>Ticket ID&#58; [rt.racf.bnl.gov #15953]
Requestors&#58; osg@....
Queue&#58; GLTier2
Owner&#58; Shawn Mckee
Status&#58; new
Priority&#58; None
Transaction&#58; Correspondence added by smckee@....
Subject&#58; 57186 Open Science Grid&#58; US/AGLT2 Log put error&#58; The pilot will fail the job since the remote file ... ISSUE=8374 PROJ=71
OSG GOC Ticket&#58; 8374
GGUS Ticket&#58; 57186

------------------------------------------------------------------------------

For the example shown I found the following.

The file exists in /pnfs&#58;

[root@bl-2-2 network-scripts]# ls -al
/pnfs/aglt2.org/atlasproddisk/mc09_7TeV/log/e524_s765/mc09_7TeV.108495.PythiaB_bbmu4X.simul.log.e524_s765_tid120957_34/log.120957._348841.job.log.tgz.1
-rw-r--r-- 1 usatlas1 usatlas 213488 Apr 11 09&#58;37
/pnfs/aglt2.org/atlasproddisk/mc09_7TeV/log/e524_s765/mc09_7TeV.108495.PythiaB_bbmu4X.simul.log.e524_s765_tid120957_34/log.120957._348841.job.log.tgz.1

This is ipnfsid 000071FA337EE7984C179C42E6DFD604AD8B.  I tracked this to our
UMFS07_3 dCache pool.  The details&#58;

[root@umfs07 ~]# cd /dcache2/pool/data
[root@umfs07 data]# ls -al 000071FA337EE7984C179C42E6DFD604AD8B
-rw-r--r-- 1 root root 213488 Apr 11 09&#58;37 000071FA337EE7984C179C42E6DFD604AD8B
[root@umfs07 data]# adler32 000071FA337EE7984C179C42E6DFD604AD8B
dcc3d947

I also checked to verify we can get checksum information via our dCache/Chimera
checksum service&#58;

[root@head02 ~]# curl
<div id='show_1032199113' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1032199113'>http&#58;//localhost&#58;12346/checksum/getChecksumByPnfsid?pnfsid=000071FA337EE7984C179C42E6DFD604AD8B
dcc3d947

So everything seems OK on our end.  The original problem was shown here&#58;

11 Apr 13&#58;37&#58;44| SiteMover.py| /pnfs/aglt2.org is visible&#58; [&#39;data&#39;, &#39;dq2&#39;,
&#39;atlasmcdisk&#39;, &#39;atlasdatadisk&#39;, &#39;atlascalibdata&#39;, &#39;atlascalibdisk&#39;,
&#39;atlasgroupdisk&#39;, &#39;atlasproddisk&#39;, &#39;atlasuserdisk&#39;, &#39;atlasscratchdisk&#39;,
&#39;atlaslocalgroupdisk&#39;, &#39;atlashotdisk&#39;]

11 Apr 13&#58;37&#58;44| SiteMover.py| Warning&#58; Exception caught in
getdCacheChecksum()&#58; [Errno 2] No such file or directory&#58;
&#39;/pnfs/aglt2.org/atlasproddisk/mc09_7TeV/log/e524_s765/mc09_7TeV.108495.PythiaB_bbmu4X.simul.log.e524_s765_tid120957_34/.(use)(2)(log.120957._348841.job.log.tgz.1)&#39;,
attempt 1

11 Apr 13&#58;37&#58;44| lcgcp2SiteMo| !!WARNING!!2999!! The pilot will fail the job
since the remote file does not exist

Could there be some timing issue present?   What does getdCacheChecksum() try
to do?   I note it mentioned &#34;attempt 1&#34;...are there follow-on attempts or is
this site-db configured?

Shawn
</div><script type='text/javascript'>
        $('#show_1032199113').click(function() {
            $('#detail_1032199113').slideDown("normal");
            $('#show_1032199113').hide();
            $('#hide_1032199113').show();
        });
        $('#hide_1032199113').click(function() {
            $('#detail_1032199113').slideUp();
            $('#hide_1032199113').hide();
            $('#show_1032199113').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='8374#1271003526'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-11T16:32:06+00:00">Apr 11, 2010 04:32 PM UTC</time> by <b>USATLAS</b><a class="anchor" name="1271003526">&nbsp;</a></div><pre>Subject&#58; AutoReply&#58; Open Science Grid&#58; US/AGLT2 Log put error&#58; The pilot will fail the job since the remote file ... ISSUE=8374 PROJ=71

Greetings,

This message has been automatically generated in response to the
creation of a support ticket you submitted regarding&#58;

&#34;Open Science Grid&#58; US/AGLT2 Log put error&#58; The pilot will fail the job since the remote file ... ISSUE=8374 PROJ=71&#34;

A summary of your ticket, which has been assigned a request ID of
[rt.racf.bnl.gov #15953], appears below.

To modify your ticket or add follow-ups, simply reply to this email
message.  Please DO NOT change the subject of this e-mail when
replying or you might generate a new ticket.

Thank you,
RT-RACF@....

------------------------------------------------------------------------------

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='8374#1271003451'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2010-04-11T16:30:51+00:00">Apr 11, 2010 04:30 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1271003451">&nbsp;</a></div><pre>There were about one hundred jobs failed. The list is here&#58;
<a href='http&#58;//panda.cern.ch&#58;25980/server/pandamon/query?job=*&pilotErrorCode=1103&site=AGLT2&cloud=US&hours=12&computingSite=AGLT2' target='_blank' rel='nofollow'>http&#58;//panda.cern.ch&#58;25980/server/pandamon/query?job=*&pilotErrorCode=1103&site=AGLT2&cloud=US&hours=12&computingSite=AGLT2</a>
e.g.
<a href='http&#58;//panda.cern.ch&#58;25980/server/pandamon/query?job=1060683704' target='_blank' rel='nofollow'>http&#58;//panda.cern.ch&#58;25980/server/pandamon/query?job=1060683704</a>
<a href='http&#58;//gridui07.usatlas.bnl.gov&#58;25880/schedlogs/tp_gridui07_30052_20100411/tp_gridui07_30052_20100411-093211_6952/pilot.out' target='_blank' rel='nofollow'>http&#58;//gridui07.usatlas.bnl.gov&#58;25880/schedlogs/tp_gridui07_30052_20100411/tp_gridui07_30052_20100411-093211_6952/pilot.out</a>

0 bytes      0.00 KB/sec avg      0.00 KB/sec inst
0 bytes      0.00 KB/sec avg      0.00 KB/sec inst
213488 bytes      2.91 KB/sec avg      2.91 KB/sec inst
213488 bytes      2.91 KB/sec avg      2.91 KB/sec inst
213488 bytes      2.91 KB/sec avg      2.91 KB/sec inst
213488 bytes      2.91 KB/sec avg      2.91 KB/sec inst
213488 bytes      2.91 KB/sec avg      2.91 KB/sec instDestination SE type&#58; SRMv2
Source URL&#58; file&#58;/tmp/Panda_Pilot_3086104_1270978368/log.120957._348841.job.log.tgz.1
File size&#58; 213488
Source URL for copy&#58; file&#58;/tmp/Panda_Pilot_3086104_1270978368/log.120957._348841.job.log.tgz.1
Destination URL&#58; <a href='srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasproddisk/mc09_7TeV/log/e524_s765/mc09_7TeV.108495.PythiaB_bbmu4X.simul.log.e524_s765_tid120957_34/log.120957._348841.job.log.tgz.1' target='_blank' rel='nofollow'>srm&#58;//head01.aglt2.org&#58;8443/srm/managerv2?SFN=/pnfs/aglt2.org/atlasproddisk/mc09_7TeV/log/e524_s765/mc09_7TeV.108495.PythiaB_bbmu4X.simul.log.e524_s765_tid120957_34/log.120957._348841.job.log.tgz.1</a>
# streams&#58; 1
# set timeout to  3600 (seconds)

Transfer took 76070 ms, len(o) = 5361
11 Apr 13&#58;37&#58;44| lcgcp2SiteMo| Detected dCache system&#58; will verify local checksum with the local SE checksum
11 Apr 13&#58;37&#58;44| lcgcp2SiteMo| File path&#58; /pnfs/aglt2.org/atlasproddisk/mc09_7TeV/log/e524_s765/mc09_7TeV.108495.PythiaB_bbmu4X.simul.log.e524_s765_tid120957_34/log.120957._348841.job.log.tgz.1
11 Apr 13&#58;37&#58;44| lcgcp2SiteMo| Local checksum&#58; dcc3d947
11 Apr 13&#58;37&#58;44| SiteMover.py| subdir&#58; [&#39;&#39;, &#39;pnfs&#39;, &#39;aglt2.org&#39;, &#39;atlasproddisk&#39;, &#39;mc09_7TeV&#39;, &#39;log&#39;, &#39;e524_s765&#39;, &#39;mc09_7TeV.108495.PythiaB_bbmu4X.simul.log.e524_s765_tid120957_34&#39;]
11 Apr 13&#58;37&#58;44| SiteMover.py| path&#58; /pnfs/aglt2.org
11 Apr 13&#58;37&#58;44| SiteMover.py| dir&#58; /pnfs/aglt2.org/atlasproddisk/mc09_7TeV/log/e524_s765/mc09_7TeV.108495.PythiaB_bbmu4X.simul.log.e524_s765_tid120957_34
11 Apr 13&#58;37&#58;44| SiteMover.py| /pnfs/aglt2.org is visible&#58; [&#39;data&#39;, &#39;dq2&#39;, &#39;atlasmcdisk&#39;, &#39;atlasdatadisk&#39;, &#39;atlascalibdata&#39;, &#39;atlascalibdisk&#39;, &#39;atlasgroupdisk&#39;, &#39;atlasproddisk&#39;, &#39;atlasuserdisk&#39;, &#39;atlasscratchdisk&#39;, &#39;atlaslocalgroupdisk&#39;, &#39;atlashotdisk&#39;]
11 Apr 13&#58;37&#58;44| SiteMover.py| Warning&#58; Exception caught in getdCacheChecksum()&#58; [Errno 2] No such file or directory&#58; &#39;/pnfs/aglt2.org/atlasproddisk/mc09_7TeV/log/e524_s765/mc09_7TeV.108495.PythiaB_bbmu4X.simul.log.e524_s765_tid120957_34/.(use)(2)(log.120957._348841.job.log.tgz.1)&#39;, attempt 1
11 Apr 13&#58;37&#58;44| lcgcp2SiteMo| !!WARNING!!2999!! The pilot will fail the job since the remote file does not exist

Regards,
Wensheng

[Ticket Origin]
<div id='show_78496106' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_78496106'>GGUSSOAPAccessor(ggus2_fp71) ID&#58; 57186
</div><script type='text/javascript'>
        $('#show_78496106').click(function() {
            $('#detail_78496106').slideDown("normal");
            $('#show_78496106').hide();
            $('#hide_78496106').show();
        });
        $('#hide_78496106').click(function() {
            $('#detail_78496106').slideUp();
            $('#hide_78496106').hide();
            $('#show_78496106').show();
        });
        </script></pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F8374">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

});
</script>


</body>
