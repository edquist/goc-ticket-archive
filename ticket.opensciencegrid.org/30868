<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[30868] gratia-probe-slurm problem at OU_OSCER_ATLAS (os33-el7)</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=30868" method="post">
<div class="page-header">
    <h3><span class="muted">30868</span> / gratia-probe-slurm problem at OU_OSCER_ATLAS (os33-el7)</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Horst Severini</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">OU_OSCER_ATLAS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Horst Severini</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Investigation</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2016-09-20</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Carl Edquist <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Brian Lin <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/30868", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/30868?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/30868?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20gratia-probe-slurm%20problem%20at%20OU_OSCER_ATLAS%20%28os33-el7%29%20ISSUE%3D30868%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='30868#1474384430'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-20T15:13:50+00:00">Sep 20, 2016 03:13 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1474384430">&nbsp;</a></div><pre>Thank you for informing us that this issue has been resolved. I will close this ticket.  Please submit problems, requests, and questions at&#58; <a href='https&#58;//ticket.grid.iu.edu/goc/open' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/open</a> OSG Grid Operations Center goc@...., 317-278-9699 Visit the OSG Operations Page&#58; <a href='http&#58;//osggoc.blogspot.com/' target='_blank' rel='nofollow'>http&#58;//osggoc.blogspot.com/</a></pre></div><div class='update_description'><i onclick="document.location='30868#1474296134'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-19T14:42:14+00:00">Sep 19, 2016 02:42 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1474296134">&nbsp;</a></div><pre>Thanks Brian!

Horst</pre></div><div class='update_description'><i onclick="document.location='30868#1474294512'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-19T14:15:12+00:00">Sep 19, 2016 02:15 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1474294512">&nbsp;</a></div><pre>Ticket can be found here&#58;
<a href='https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-2171' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-2171</a>

- Brian</pre></div><div class='update_description'><i onclick="document.location='30868#1474290317'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-19T13:05:17+00:00">Sep 19, 2016 01:05 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1474290317">&nbsp;</a></div><pre>Can anyone else verify if there is a jira ticket for the patching of the current /usr/share/gratia/slurm/SlurmProbe.py for the missing cpus_alloc parameter? If not, does there need to be one created? Once someone can confirm this info I&#39;ll close this out or if I don&#39;t hear back and there are no objections I&#39;ll close this later this week.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='30868#1474052771'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-16T19:06:11+00:00">Sep 16, 2016 07:06 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1474052771">&nbsp;</a></div><pre>Hi Chris,

I think this is pretty much solved, actually.

There are now open JIRA tickets for the logging (2456) and locking
(2454) problems, and I think the issue of patching the current
/usr/share/gratia/slurm/SlurmProbe.py for the missing cpus_alloc
parameter is being worked one as well, but I don&#39;t know if there&#39;s an
open JIRA ticket for that yet.

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='30868#1474051376'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-16T18:42:56+00:00">Sep 16, 2016 06:42 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1474051376">&nbsp;</a></div><pre>Hello All,

What is the status of this? Is there anything I can do to assist?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='30868#1473785230'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-13T16:47:10+00:00">Sep 13, 2016 04:47 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1473785230">&nbsp;</a></div><pre>Ahh,

good point, I&#39;ll pass it on.

Thanks,

Horst

Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='30868#1473784871'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-13T16:41:11+00:00">Sep 13, 2016 04:41 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1473784871">&nbsp;</a></div><pre>Actually, I think the file should be named &#39;gratia-probes-cron.conf&#39; to
match the name of the gratia service file. I&#39;m not sure if this is just
a convention or an actual requirement.

Cheers,
Brian</pre></div><div class='update_description'><i onclick="document.location='30868#1473784512'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-13T16:35:12+00:00">Sep 13, 2016 04:35 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1473784512">&nbsp;</a></div><pre>Thanks Brian,

I&#39;ll ask the OSCER admins to add this /etc/tmpfiles.d/gratia.conf .

Horst</pre></div><div class='update_description'><i onclick="document.location='30868#1473782544'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-13T16:02:24+00:00">Sep 13, 2016 04:02 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1473782544">&nbsp;</a></div><pre>We&#39;ve got a ticket about that here&#58; <a href='https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-2454.' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-2454.</a> systemd-tmpfiles are used to manage folders/files on tmpfs&#58; <a href='https&#58;//www.freedesktop.org/software/systemd/man/systemd-tmpfiles.html.' target='_blank' rel='nofollow'>https&#58;//www.freedesktop.org/software/systemd/man/systemd-tmpfiles.html.</a> You can create a temporary fix for this until we update the package by creating /etc/tmpfiles.d/gratia.conf containing&#58;

d       /var/lock/gratia              0755    root  root  -       -

Here&#39;s a ticket about logging slurm_meter exceptions&#58; <a href='https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-2456' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-2456</a></pre></div><div class='update_description'><i onclick="document.location='30868#1473720430'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-12T22:47:10+00:00">Sep 12, 2016 10:47 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1473720430">&nbsp;</a></div><pre>Hi again,

we looked at this /var/lock/gratia/ problem again, and it seems like
the problem is indeed that /var/lock/ is tmpfs on CentOS7,
so it gets wiped out at every reboot, and gratia isn&#39;t recreating it,
since it&#39;s part of the gratia-probe-common RPM, and therefore
Gratia just expects it to be there, right?

What&#39;s the best way to address this?

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='30868#1473694331'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-12T15:32:11+00:00">Sep 12, 2016 03:32 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1473694331">&nbsp;</a></div><pre>Hi again,

looks like things are working again, so this seems to have been a problem
on the SLURM management node after all.

But this still doesn&#39;t change my other comment that we need to find a way
to get slurm_meter errors into the Gratia log files, since we have wasted
several weeks spinning our wheels not finding anything useful in the logs
until someone suggested running slurm_meter by hand.

Is there a simple way to do that?

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='30868#1473685511'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-12T13:05:11+00:00">Sep 12, 2016 01:05 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1473685511">&nbsp;</a></div><pre>Hi again,

hmm, now we have a different problem since yesterday all of a sudden&#58;

----
[hs@grid1 ~]$ sudo /usr/share/gratia/slurm/slurm_meter
Traceback (most recent call last)&#58;
File &#34;/usr/share/gratia/slurm/slurm_meter&#34;, line 234, in &#60;module&#62;
SlurmMeter().main()
File &#34;/usr/share/gratia/slurm/slurm_meter&#34;, line 217, in main
for job in self.sacct.completed_jobs(self.checkpoint.val)&#58;
File &#34;/usr/share/gratia/slurm/SlurmProbe.py&#34;, line 374, in _jobs
cursor.execute(sql)
File &#34;/usr/lib64/python2.7/site-packages/MySQLdb/cursors.py&#34;, line
174, in execute
self.errorhandler(self, exc, value)
File &#34;/usr/lib64/python2.7/site-packages/MySQLdb/connections.py&#34;,
line 36, in defaulterrorhandler
raise errorclass, errorvalue
_mysql_exceptions.InternalError&#58; (1, &#34;Can&#39;t create/write to file
&#39;/var/tmp/#sql_773_1.MAI&#39; (Errcode&#58; 28)&#34;)
----

I&#39;ve never seen this error before. Does it refer to a temporary sql file
on grid1, or on the SLURM manager (odin)? It sounds like on grid1, but
/var/tmp/ looks perfectly normal, so I don&#39;t know why this slurm_meter
process wouldn&#39;t be able to create a file there.

I don&#39;t think we changed anything, and I verified that the ProbeConfig
and SlurmProbe.py files haven&#39;t changed -- although Schooner was (is?)
having some SLURM batch problems, maybe that&#39;s related?

But if it is, then the error message is very confusing.

Speaking of error messages&#58; these slurm_meter errors never make it into
<div id='show_2055453826' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_2055453826'>/var/log/gratia/..., and I really think they should, since without them,
those logs give *ABSOLUTELY NO* useful information on how to track *ANY*
of the problems we&#39;ve had here at all.

Thanks,

Horst
</div><script type='text/javascript'>
        $('#show_2055453826').click(function() {
            $('#detail_2055453826').slideDown("normal");
            $('#show_2055453826').hide();
            $('#hide_2055453826').show();
        });
        $('#hide_2055453826').click(function() {
            $('#detail_2055453826').slideUp();
            $('#hide_2055453826').hide();
            $('#show_2055453826').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='30868#1473458890'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-09T22:08:10+00:00">Sep 9, 2016 10:08 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1473458890">&nbsp;</a></div><pre>Hi Brian,

they did reboot the machine today, and /var/lock/ is indeed on tmpfs.

I&#39;ve asked them if they know what happened exactly, let&#39;s see what they say.

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='30868#1473457631'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-09T21:47:11+00:00">Sep 9, 2016 09:47 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1473457631">&nbsp;</a></div><pre>Did they restart the machine? This is EL7 right? Is /var/lock on tmpfs?

- Brian</pre></div><div class='update_description'><i onclick="document.location='30868#1473457453'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-09T21:44:13+00:00">Sep 9, 2016 09:44 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1473457453">&nbsp;</a></div><pre>Hi again,

well, the OSCER admins made some gratia-unrelated changes to the OSG
setup and re-ran &#39;osg-configure -c&#39;, and that broke Gratia again, since
it not only wiped out &#39;SlurmCluster=&#34;schooner&#34;&#39; and set it back to the
empty &#39;SlurmCluster=&#34;&#34;&#39;, but it also seems to have deleted the directory
/var/lock/gratia/, since afterwards, /usr/share/gratia/slurm/slurm_meter
quit with the error that it couldn&#39;t create a lock.

Maybe the first problem keep happening because we don&#39;t have
&#39;SlurmCluster&#39; set in our config.ini? Oh right, there&#39;s a line in
20-slurm.ini that we need to fix&#58;

slurm_cluster = UNAVAILABLE

But why was the directory /var/lock/gratia/ deleted?

Thanks a lot,
have a good weekend,

Horst</pre></div><div class='update_description'><i onclick="document.location='30868#1473435493'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-09T15:38:13+00:00">Sep 9, 2016 03:38 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1473435493">&nbsp;</a></div><pre>Thanks Brian!

The problem itself is fixed, now we just need to feed the solution back
to Gratia, so that the next update won&#39;t break it again. &#58;)

Thanks a lot,

Horst</pre></div><div class='update_description'><i onclick="document.location='30868#1473435130'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-09T15:32:10+00:00">Sep 9, 2016 03:32 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1473435130">&nbsp;</a></div><pre>Hey Horst,

Sorry for the radio silence but I&#39;ve been slammed with pre-release work
this week so I haven&#39;t been able to get to this. I&#39;ll look into it next
week!

Cheers,
Brian</pre></div><div class='update_description'><i onclick="document.location='30868#1472931059'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-03T19:30:59+00:00">Sep 3, 2016 07:30 PM UTC</time><a class="anchor" name="1472931059">&nbsp;</a></div><pre>Okay, Gratia seems to be updating fine to

<a href='http&#58;//gratiaweb.grid.iu.edu/gratia/site?facility=OU_OSCER_ATLAS' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/site?facility=OU_OSCER_ATLAS</a>

now, so I think we fixed it!

So now we need to make sure that the next update won&#39;t break it again -- both /etc/gratia/slurm/ProbeConfig and /usr/share/gratia/slurm/SlurmProbe.py .

I&#39;m open for suggestions. &#58;)

Thanks a lot
have a good weekend,

Horst

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Horst Severini 27</pre></div><div class='update_description'><i onclick="document.location='30868#1472853190'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-02T21:53:10+00:00">Sep 2, 2016 09:53 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1472853190">&nbsp;</a></div><pre>Hi Carl,

okay, thanks for jogging my memory! I went back to our original gratia
thread end of March between you, Tanya, Derek and me -- Subject&#58; Re&#58;
Gratia on new OU_OSCER_ATLAS SLURM CE (grid0.oscer.ou.edu) -- and
re-read it in more detail, and it turns out that what apparently broke
gratia reporting was that /etc/gratia/slurm/ProbeConfig was overwritten,
and the new version had lost the all-important line

SlurmCluster=&#34;schooner&#34;

It was set back to &#34;&#34;, and that broke the running of
/usr/share/gratia/slurm/slurm_meter -- it throws a mysql connection
error -- just like it didn&#39;t work back in March before we fixed it the
first time.

I&#39;m not sure when this was changed the first time, but probably on May
5th, since that&#39;s when the reports from grid0 stopped, right? I can&#39;t
find any RPM updates or anything else significant, and the reason I
don&#39;t have the exact date of that change is that it was changed again on
August 24th, when the OSCER admins did some OSG updates, and the latest
gratia RPMs were installed, which overwrote both
/etc/gratia/slurm/ProbeConfig and /usr/share/gratia/slurm/SlurmProbe.py .

And it turns out that we actually do need the patch you noticed --
SlurmProbe-cpus_alloc.patch, which I believe you authored, actually ;)
(or maybe it was Derek) -- since without that, slurm_meter also errors
out with

(1054, &#34;Unknown column &#39;j.cpus_alloc&#39; in &#39;field list&#39;&#34;)

So I put the SlurmCluster info back into ProbConfig, and re-patched
SlurmProbe.py, and then ran slurm_meter, and it&#39;s still running, so I
take that as a good sign! Can you see new records appear on your end
from OU_OSCER_ATLAS / grid1.oscer.ou.edu now?
<div id='show_1192467888' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1192467888'>
So we need to figure out why ProbeConfig was overwritten, if possible.
There&#39;s this ticket, which suggests that this was fixed&#58;

<a href='https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-2264' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-2264</a>

I&#39;m not sure this is relevant here, since I don&#39;t believe that
osg-configure was run -- but I&#39;m not positive, since the OSCER admins
might&#39;ve run it. Either way, we need to make sure that the SlurmCluster
info won&#39;t get wiped out again.

And we need to port this SlurmProbe cpus_alloc patch into to the next
official version -- or find a way to prevent this patch from being wiped
out again some other way.

And yes, I think Hola has definitely gone off the deep end, and I have
uninstalled it on all our laptops!

Thanks a lot,

Horst
</div><script type='text/javascript'>
        $('#show_1192467888').click(function() {
            $('#detail_1192467888').slideDown("normal");
            $('#show_1192467888').hide();
            $('#hide_1192467888').show();
        });
        $('#hide_1192467888').click(function() {
            $('#detail_1192467888').slideUp();
            $('#hide_1192467888').hide();
            $('#show_1192467888').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='30868#1472779516'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-02T01:25:16+00:00">Sep 2, 2016 01:25 AM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1472779516">&nbsp;</a></div><pre>Oh PS&#58;

<font color='#7F7E6F'>&#62; First I thought maybe it was the Adblock Plus, but that wasn&#39;t it,</font>
<font color='#7F7E6F'>&#62; it&#39;s just related to Hola. Hola doesn&#39;t seem to be that useful anymore,</font>

I heard Hola is bad-news&#58;

<a href='http&#58;//www.digitaltrends.com/computing/hola-found-to-be-selling-users-internet-bandwidth-as-botnet/' target='_blank' rel='nofollow'>http&#58;//www.digitaltrends.com/computing/hola-found-to-be-selling-users-internet-bandwidth-as-botnet/</a>

&#58;-x

Carl</pre></div><div class='update_description'><i onclick="document.location='30868#1472777875'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-02T00:57:55+00:00">Sep 2, 2016 12:57 AM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1472777875">&nbsp;</a></div><pre>Oh hey, attachments!  Sorry for all the trouble getting those posted...

So the thing that jumps out at me is that the services and gridftp-transfer ProbeConfig&#39;s are disabled and have SiteName=&#34;Generic site&#34; ... probably that&#39;s fine since we&#39;re concerned with the slurm one.  Is SlurmDbHost=&#34;odin.oscer.ou.edu&#34; still valid?

As for the SlurmProbe.txt (.py) ... looks like this is definitely a custom version -- the &#39;_parse_tres&#39; function (&#34;Parse SLURM database tres_alloc job data into dict&#34;) looks new.  Pasting diff below.  Not sure what the story is with this version?

Anyways, after this week I am going to be out until the 19th so I won&#39;t really be able to offer more input until then.  I&#39;m &#34;promoting&#34; Brian Lin from a CC to an Assignee so the ticket doesn&#39;t get too forgotten about in the mean time.  Brian, feel free to reassign or include others that might have ideas too.  (Suchandra or Gratia folks?)

Carl

---

|--- SlurmProbe.py	2016-09-01 19&#58;50&#58;34.766537543 -0500
|+++ SlurmProbe.txt	2016-09-01 19&#58;49&#58;58.838535596 -0500
|@@ -24,7 +24,7 @@
| import MySQLdb.cursors
| import re
|
|-prog_version = &#34;%%%RPMVERSION%%%&#34;
|+prog_version = &#34;1.15.0-1.osg33.el7&#34;
| prog_revision = &#39;$Revision$&#39;
|
| class SlurmProbe&#58;
|@@ -244,6 +244,29 @@
|         except (KeyError, TypeError)&#58;
|             return err
|
|+    def _parse_tres(self, tres)&#58;
|+        &#34;&#34;&#34;Parse SLURM database tres_alloc job data into dict&#34;&#34;&#34;
|+        # SLURM 15 changed its job_table.cpus_alloc database column to tres_alloc
|+        #    and converted the data to a comma separated list of &#34;key=value&#34; pairs
|+        # Keys are defined in tres_types_t in src/common/slurmdb_defs.h
|+        #    1 =&#62; CPU, 2 =&#62; MEM, 3 =&#62; ENERGY, 4 =&#62; NODE
|+
|+        ret = dict()
<div id='show_698350034' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_698350034'>|+
|+        for item in tres.split(&#39;,&#39;)&#58;
|+            # Skip blank entries
|+            if not item&#58;
|+                continue
|+
|+            try&#58;
|+                k, v = item.split(&#39;=&#39;, 1)
|+                ret[int(k)] = int(v)
|+            except ValueError&#58;
|+                # TRES string is damaged? Continuing.
|+                DebugPrint(1, &#34;Error parsing TRES string &#39;%s&#39;&#34; % tres)
|+
|+        return ret
|+
|     def _addUserInfoIfMissing(self, r)&#58;
|         &#34;&#34;&#34;Add user/acct if missing (resolving uid/gid)&#34;&#34;&#34;
|         if r[&#39;user&#39;] is None&#58;
|@@ -256,13 +279,17 @@
|     def _users(self, where)&#58;
|         cursor = self._conn.cursor()
|
|+        # Default GROUP_CONCAT() maximum length is 1024 chars
|+        # Increase it to 64MB
|+        cursor.execute(&#39;SET SESSION group_concat_max_len=64*1024*1024;&#39;);
|+
|         # See enum job_states in slurm/slurm.h for state values
|         sql = &#39;&#39;&#39;SELECT j.id_user
|             , j.id_group
|             , (SELECT SUM(cpus_req)   FROM %(cluster)s_job_table WHERE
|                   id_user = j.id_user AND state IN (0,2)) AS cpus_pending
|-            , (SELECT SUM(cpus_alloc) FROM %(cluster)s_job_table WHERE
|-                  id_user = j.id_user AND state IN (1)  ) AS cpus_running
|+            , (SELECT GROUP_CONCAT(&#39;|&#39;, tres_alloc) FROM %(cluster)s_job_table WHERE
|+                  id_user = j.id_user AND state IN (1)  ) AS tres_alloc_list
|             , MAX(j.time_end) AS time_end
|             , a.acct
|             , a.user
|@@ -279,11 +306,21 @@
|         for r in cursor&#58;
|             # Add handy data to job record
|             r[&#39;cluster&#39;] = self._cluster
|+
|+            # Extract cpus_alloc from tres_alloc and sum to get cpus_running
|+            # We were formerly relying on SQL to sum the cpus_alloc.
|+            # Now we get a list of tres_alloc parameters, parse them, and sum
|+            # the CPU count ourselves.
|+            r[&#39;cpus_running&#39;] = 0
|+            if r[&#39;tres_alloc_list&#39;]&#58;
|+                for tres_txt in r[&#39;tres_alloc_list&#39;].split(&#39;|&#39;)&#58;
|+                    tres = self._parse_tres(tres_txt)
|+                    # tres_types_t.TRES_CPU = 1
|+                    r[&#39;cpus_running&#39;] += tres.get(1, 0)
|+
|             # Return 0 instead of None where we don&#39;t have values
|             if r[&#39;cpus_pending&#39;] is None&#58;
|                 r[&#39;cpus_pending&#39;] = 0
|-            if r[&#39;cpus_running&#39;] is None&#58;
|-                r[&#39;cpus_running&#39;] = 0
|             self._addUserInfoIfMissing(r)
|             yield r
|
|@@ -300,7 +337,7 @@
|             , j.id_group
|             , j.id_user
|             , j.job_name
|-            , j.cpus_alloc
|+            , j.tres_alloc
|             , j.partition
|             , j.state
|             , MIN(j.time_start) AS time_start
|@@ -339,5 +376,10 @@
|         for r in cursor&#58;
|             # Add handy data to job record
|             r[&#39;cluster&#39;] = self._cluster
|+
|+            # Extract cpus_alloc from tres_alloc
|+            tres = self._parse_tres(r[&#39;tres_alloc&#39;])
|+            r[&#39;cpus_alloc&#39;] = tres.get(1, 0) # tres_types_t.TRES_CPU = 1
|+
|             self._addUserInfoIfMissing(r)
|             yield r
</div><script type='text/javascript'>
        $('#show_698350034').click(function() {
            $('#detail_698350034').slideDown("normal");
            $('#show_698350034').hide();
            $('#hide_698350034').show();
        });
        $('#hide_698350034').click(function() {
            $('#detail_698350034').slideUp();
            $('#hide_698350034').hide();
            $('#show_698350034').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='30868#1472751232'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-09-01T17:33:52+00:00">Sep 1, 2016 05:33 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1472751232">&nbsp;</a></div><pre>Good news Horst. Maybe Carl and Brian have new information regarding this.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='30868#1472674092'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-31T20:08:12+00:00">Aug 31, 2016 08:08 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1472674092">&nbsp;</a></div><pre>Hi Chris,

okay, you&#39;re right, it was me. ;)

I looked at about&#58;addons, and I disabled the few that I had,
and it turned out that as soon as I disabled the Hola VPN extension,
it started loading perfectly fine!

First I thought maybe it was the Adblock Plus, but that wasn&#39;t it,
it&#39;s just related to Hola. Hola doesn&#39;t seem to be that useful anymore,
anyway, since Netflix and Hulu seem to have figured out a way to detect it ... &#58;
Also, it now seems to install a daemon that runs in the background
at all time to share other people&#39;s traffic, so that&#39;s quite bad, too.

So now that we have solved that mystery, we should get back to the
actual problem of why we&#39;re still not reporting to Gratia. &#58;)

Thanks a lot,

Horst</pre></div><div class='update_description'><i onclick="document.location='30868#1472668877'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-31T18:41:17+00:00">Aug 31, 2016 06:41 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1472668877">&nbsp;</a></div><pre>Hi Horst,

Several of us have tried version 48 here and it seems to be working fine. Kyle suggested  that you disable all of your extensions in FF. Tom had this to say specifically. Disable all extensions ... if that doesn&#39;t work, it isn&#39;t extensions, but if it works, re-enable extensions starting with A-M, see if that makes a difference, if it does, re-disable extensions starting with A-G, etc. If disabling the extensions doesn&#39;t work maybe uninstall and reinstall FF?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='30868#1472664261'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-31T17:24:21+00:00">Aug 31, 2016 05:24 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1472664261">&nbsp;</a></div><pre>Thanks, Horst. I&#39;ll run this by Marina and see what she says.

~Chris</pre></div><div class='update_description'><i onclick="document.location='30868#1472596510'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-30T22:35:10+00:00">Aug 30, 2016 10:35 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1472596510">&nbsp;</a></div><pre>Hi again,

I just looked at this again from my MacBook at home, and it still
doesn&#39;t finish loading here -- but only on Firefox 48; when I try this
with Chrome, it loads fine. I don&#39;t have my certificate loaded in Chrome,
so it doesn&#39;t know me as me, but it still finishes loading just fine,
whereas on Firefox 48, even the http&#58;// version never loads.
The first time it gets stucck at &#39;Waiting for netdna.bootstrapcdn.com...&#39;,
and then I force a reload, then it gets stuck at &#39;Waiting for ticket.opensciencegrid.org...&#39;.

So maybe there&#39;s an incompatibility of the ticket system with Firefox 48?
I&#39;ve noticed that with one of my Credit Unions, where BillPay also
gets stuck in a similar fashion and never loads for Firefox 47 and 48.
Works fine with older versions ...

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='30868#1472579950'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-30T17:59:10+00:00">Aug 30, 2016 05:59 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1472579950">&nbsp;</a></div><pre>Hi Chris,

no, this seems to work again now, thanks!

Last time I tried the page never quite finished loading, but once I
escaped out of that, I could also see the attachments and attach new
files. Last I tried was from home on my MacBook, though, so I&#39;ll try it
again tonight from home and see if maybe my ISP (Cox) is blocking
something which prevents these pages from finishing to load.

Are there any news on the issue itself, why Gratia still isn&#39;t reporting?

Thanks a lot,

Horst</pre></div><div class='update_description'><i onclick="document.location='30868#1472578835'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-30T17:40:35+00:00">Aug 30, 2016 05:40 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1472578835">&nbsp;</a></div><pre>Hi Horst,

Are you still seeing this issue with attaching files etc..? Marina has tested this on both ITB and production. I am able to upload attachments both through IU and outside of IU network using  .txt, jpg and png files. The library it uses is jquery and javascript is always running on the clientâ€™s side. Do you have anything that could be blocking those ?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='30868#1472240649'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-26T19:44:09+00:00">Aug 26, 2016 07:44 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1472240649">&nbsp;</a></div><pre>Hi Horst,

Marina has been add to this ticket for review. She is looking into the cause of this for you so she may have some questions later.

Thanks.,
Chris</pre></div><div class='update_description'><i onclick="document.location='30868#1472226430'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-26T15:47:10+00:00">Aug 26, 2016 03:47 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1472226430">&nbsp;</a></div><pre>Hi Chris,

well, the tickets still don&#39;t finish loading for me; maybe they&#39;re
trying to load something that&#39;s blocked from offsite IU? It keeps
sitting at &#39;Waiting for ticket.grid.iu.edu...&#39;

But if I stop that by hitting &#39;escape&#39;, then afterwards the attached
files do show up, so that&#39;s good. I don&#39;t think the filename has
anything to do with it.

So how do we figure out why this is not working? Still getting these
errors in /var/log/gratia/2016-08-26.log&#58;

10&#58;30&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;undefined&#39;

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='30868#1472225903'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-26T15:38:23+00:00">Aug 26, 2016 03:38 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1472225903">&nbsp;</a></div><pre>I&#39;ve attached that slurmprob.py.txt but I renamed it to just txt. Maybe that had something to do with it?</pre></div><div class='update_description'><i onclick="document.location='30868#1472225806'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-26T15:36:46+00:00">Aug 26, 2016 03:36 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1472225806">&nbsp;</a></div><pre>Hi Horst the ticket loads fine for me. I&#39;d attach a screenshot but if its not loading for you IDK. I&#39;ll check with Marina and see what she says about it.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='30868#1472156771'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-25T20:26:11+00:00">Aug 25, 2016 08:26 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1472156771">&nbsp;</a></div><pre>Hi Chris,

well, the &#39;Attach files ...&#39; button looks better again than it did
yesterday -- but the ticket never finishes loading in Firefox 48 (and
neither do other tickets), and therefore attaching something doesn&#39;t
seem to work yet, either.

Does it finish loading for you?

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='30868#1472156072'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-25T20:14:32+00:00">Aug 25, 2016 08:14 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1472156072">&nbsp;</a></div><pre>Hi Horst,

There was an issue with a few libraries. These have been fixed and you can now upload attachments again. The files seems to all be there but could you verify?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='30868#1472066411'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-24T19:20:11+00:00">Aug 24, 2016 07:20 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1472066411">&nbsp;</a></div><pre>Hi Chris,

okay, I have attached the file to this email again. The ticket system
still won&#39;t allow me to attach anything, nor can I find the four files I
had already attached. Can you still see those?

Thanks a lot,

Horst

On 8/24/16 12&#58;42 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='30868#1472060571'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-24T17:42:51+00:00">Aug 24, 2016 05:42 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1472060571">&nbsp;</a></div><pre>Horst,

If you want to email the attachments to the goc and reference this ticket number I&#39;ll see if I can attach them for you. I&#39;m not sure what the issue is that is preventing you from attaching them.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='30868#1471980621'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-23T19:30:21+00:00">Aug 23, 2016 07:30 PM UTC</time><a class="anchor" name="1471980621">&nbsp;</a></div><pre>Hmm,

doesn&#39;t look like the email attachment made it into the ticket, so I&#39;ll try to attach it directly to the ticket.

But something seems to be strange here, since I can&#39;t attach new files; it claims to do it, but never does anything. And what&#39;s worse, the four ProbeConfig files no longer show up as attachments, either. Any idea what happened here?

Thanks, Horst

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Horst Severini 27</pre></div><div class='update_description'><i onclick="document.location='30868#1471980371'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-23T19:26:11+00:00">Aug 23, 2016 07:26 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1471980371">&nbsp;</a></div><pre>Hi Carl,

thanks for digging deeper here. So something must&#39;ve happened around May
5th that broke gratia, but what? I looked at /var/log/yum.log, but there
don&#39;t seem to have been any RPM updates since March 28th.

The time stamps on the /etc/gratia/*/ProbeConfig&#39;s are July 18, but &#39;rpm
-qV&#39; seems to indicate that they haven&#39;t actually been modified from the
original&#58;

----
[hs@grid1 ~]$ rpm -qfV /etc/gratia/*/ProbeConfig
S.5....T.    /usr/share/gratia/slurm/SlurmProbe.py
S.5....T.    /usr/share/gratia/slurm/SlurmProbe.pyc
----
[hs@grid1 ~]$ ls -ao /usr/share/gratia/slurm/SlurmProbe.py
-rw-r--r--. 1 root 13431 Mar 30 18&#58;32 /usr/share/gratia/slurm/SlurmProbe.py
----

And while SlurmProbe.py seems to have been modified, that was done in
March, so it can&#39;t really be the reason for the problem, either. I have
attached it to this email, anyway, maybe you can find something interesting?

So we still need to figure out where this error is coming from now&#58;

GridJobId was not parsed correctly&#58; &#39;&#39;

Thanks a lot,

Horst</pre></div><div class='update_description'><i onclick="document.location='30868#1471972927'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-23T17:22:07+00:00">Aug 23, 2016 05:22 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1471972927">&nbsp;</a></div><pre>Looks like grid0.oscer.ou.edu only has slurm records, and only until May&#58;

mysql&#62;
-&#62; SELECT VO.VOName, EndTime, Cores, WallDuration, Njobs, probename
-&#62;   FROM MasterSummaryData R
-&#62;   JOIN VONameCorrection VC
-&#62;     ON VC.corrid=R.VOcorrid
-&#62;   JOIN VO
-&#62;     ON VC.void = VO.void
-&#62;  WHERE probename like &#39;%grid0.oscer.ou.edu&#39;
-&#62;    AND EndTime &#62;= &#39;2016-03-01&#39;
-&#62;  ORDER BY EndTime;
+--------+---------------------+-------+--------------+-------+--------------------------+
| VOName | EndTime             | Cores | WallDuration | Njobs | probename                |
+--------+---------------------+-------+--------------+-------+--------------------------+
| atlas  | 2016-03-15 00&#58;00&#58;00 |    48 |           46 |     3 | slurm&#58;grid0.oscer.ou.edu |
| atlas  | 2016-03-16 00&#58;00&#58;00 |    48 |          143 |     1 | slurm&#58;grid0.oscer.ou.edu |
| atlas  | 2016-03-16 00&#58;00&#58;00 |    40 |           13 |     2 | slurm&#58;grid0.oscer.ou.edu |
| atlas  | 2016-03-16 00&#58;00&#58;00 |    48 |           12 |     2 | slurm&#58;grid0.oscer.ou.edu |
| atlas  | 2016-03-17 00&#58;00&#58;00 |    48 |            7 |     1 | slurm&#58;grid0.oscer.ou.edu |
| atlas  | 2016-03-17 00&#58;00&#58;00 |    40 |           48 |     7 | slurm&#58;grid0.oscer.ou.edu |
| atlas  | 2016-03-21 00&#58;00&#58;00 |    40 |            6 |     1 | slurm&#58;grid0.oscer.ou.edu |
| atlas  | 2016-03-21 00&#58;00&#58;00 |    48 |            6 |     1 | slurm&#58;grid0.oscer.ou.edu |
| atlas  | 2016-03-23 00&#58;00&#58;00 |    40 |            7 |     1 | slurm&#58;grid0.oscer.ou.edu |
| atlas  | 2016-03-23 00&#58;00&#58;00 |    48 |           25 |     4 | slurm&#58;grid0.oscer.ou.edu |
| atlas  | 2016-03-28 00&#58;00&#58;00 |    48 |            1 |     1 | slurm&#58;grid0.oscer.ou.edu |
| atlas  | 2016-03-28 00&#58;00&#58;00 |    48 |            7 |     1 | slurm&#58;grid0.oscer.ou.edu |
| atlas  | 2016-03-28 00&#58;00&#58;00 |    40 |           11 |     1 | slurm&#58;grid0.oscer.ou.edu |
| atlas  | 2016-03-29 00&#58;00&#58;00 |    48 |            8 |     1 | slurm&#58;grid0.oscer.ou.edu |
| atlas  | 2016-03-30 00&#58;00&#58;00 |    40 |            1 |     1 | slurm&#58;grid0.oscer.ou.edu |
| atlas  | 2016-03-30 00&#58;00&#58;00 |    48 |           18 |     2 | slurm&#58;grid0.oscer.ou.edu |
| dosar  | 2016-03-31 00&#58;00&#58;00 |    48 |           34 |     3 | slurm&#58;grid0.oscer.ou.edu |
| dosar  | 2016-03-31 00&#58;00&#58;00 |    40 |            1 |     1 | slurm&#58;grid0.oscer.ou.edu |
| atlas  | 2016-03-31 00&#58;00&#58;00 |     1 |            0 |     1 | slurm&#58;grid0.oscer.ou.edu |
| atlas  | 2016-03-31 00&#58;00&#58;00 |    48 |           25 |     1 | slurm&#58;grid0.oscer.ou.edu |
<div id='show_697956768' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_697956768'>| dosar  | 2016-04-13 00&#58;00&#58;00 |    20 |            0 |     1 | slurm&#58;grid0.oscer.ou.edu |
| dosar  | 2016-04-13 00&#58;00&#58;00 |    20 |            1 |     3 | slurm&#58;grid0.oscer.ou.edu |
| dosar  | 2016-04-13 00&#58;00&#58;00 |     1 |            0 |     1 | slurm&#58;grid0.oscer.ou.edu |
| atlas  | 2016-04-13 00&#58;00&#58;00 |    20 |            0 |     1 | slurm&#58;grid0.oscer.ou.edu |
| dosar  | 2016-04-26 00&#58;00&#58;00 |    20 |           14 |     2 | slurm&#58;grid0.oscer.ou.edu |
| dosar  | 2016-04-28 00&#58;00&#58;00 |    20 |           13 |     2 | slurm&#58;grid0.oscer.ou.edu |
| atlas  | 2016-04-28 00&#58;00&#58;00 |    20 |          661 |    47 | slurm&#58;grid0.oscer.ou.edu |
| atlas  | 2016-04-28 00&#58;00&#58;00 |    20 |          110 |    10 | slurm&#58;grid0.oscer.ou.edu |
| atlas  | 2016-04-28 00&#58;00&#58;00 |    20 |           78 |    33 | slurm&#58;grid0.oscer.ou.edu |
| dosar  | 2016-04-29 00&#58;00&#58;00 |    20 |          322 |     1 | slurm&#58;grid0.oscer.ou.edu |
| atlas  | 2016-04-29 00&#58;00&#58;00 |    20 |        17080 |    68 | slurm&#58;grid0.oscer.ou.edu |
| atlas  | 2016-04-29 00&#58;00&#58;00 |    20 |        40099 |   285 | slurm&#58;grid0.oscer.ou.edu |
| atlas  | 2016-04-30 00&#58;00&#58;00 |    20 |        13445 |    76 | slurm&#58;grid0.oscer.ou.edu |
| atlas  | 2016-04-30 00&#58;00&#58;00 |    20 |        47594 |   271 | slurm&#58;grid0.oscer.ou.edu |
| atlas  | 2016-05-01 00&#58;00&#58;00 |    20 |        27282 |   136 | slurm&#58;grid0.oscer.ou.edu |
| atlas  | 2016-05-01 00&#58;00&#58;00 |    20 |        62587 |   348 | slurm&#58;grid0.oscer.ou.edu |
| atlas  | 2016-05-02 00&#58;00&#58;00 |    20 |        15197 |    64 | slurm&#58;grid0.oscer.ou.edu |
| atlas  | 2016-05-02 00&#58;00&#58;00 |    20 |        47274 |   258 | slurm&#58;grid0.oscer.ou.edu |
| atlas  | 2016-05-03 00&#58;00&#58;00 |    20 |         9552 |    24 | slurm&#58;grid0.oscer.ou.edu |
| atlas  | 2016-05-03 00&#58;00&#58;00 |    20 |         4253 |    19 | slurm&#58;grid0.oscer.ou.edu |
| atlas  | 2016-05-04 00&#58;00&#58;00 |    20 |        94017 |    10 | slurm&#58;grid0.oscer.ou.edu |
| atlas  | 2016-05-04 00&#58;00&#58;00 |    20 |        20718 |     5 | slurm&#58;grid0.oscer.ou.edu |
| dosar  | 2016-05-05 00&#58;00&#58;00 |     1 |            5 |     1 | slurm&#58;grid0.oscer.ou.edu |
+--------+---------------------+-------+--------------+-------+--------------------------+
</div><script type='text/javascript'>
        $('#show_697956768').click(function() {
            $('#detail_697956768').slideDown("normal");
            $('#show_697956768').hide();
            $('#hide_697956768').show();
        });
        $('#hide_697956768').click(function() {
            $('#detail_697956768').slideUp();
            $('#hide_697956768').hide();
            $('#show_697956768').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='30868#1471905406'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-22T22:36:46+00:00">Aug 22, 2016 10:36 PM UTC</time><a class="anchor" name="1471905406">&nbsp;</a></div><pre>Hi Carl,

yes, July was when OSCER switched from the old LSF cluster Boomer to the new SLURM cluster Schooner. But the old head nodes are still running, so that&#39;s why the old grid1 must&#39;ve still been reporting to Gratia.

I thought we&#39;d gotten Gratia working on the new grid1 while I was at the AHM at Clemson in March (back then as grid0.oscer.ou.edu), but apparently something changed recently and broke this again.

Can you check if you can find any records from grid0.oscer.ou.edu between March and now? Presumably as pbs&#58;grid0.oscer.ou.edu?

I have attached the ProbeConfig files to this ticket, hope it helps.

Thanks a lot,

Horst

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Horst Severini 27</pre></div><div class='update_description'><i onclick="document.location='30868#1471899511'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-22T20:58:31+00:00">Aug 22, 2016 08:58 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1471899511">&nbsp;</a></div><pre>Well, as mentioned below it seemed like things were &#34;normal&#34; through the end of July then stopped, with a large isolated spike on July 26 ... So if there are any config files that changed on July 1 and/or July 26/27, that might be a clue.  (Unless you&#39;re saying that those old ones before July corresponded to the old cluster?)

Otherwise maybe attach your /etc/gratia/*/ProbeConfig&#39;s

What is the probename you are expecting to see?

Carl</pre></div><div class='update_description'><i onclick="document.location='30868#1471898650'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-22T20:44:10+00:00">Aug 22, 2016 08:44 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1471898650">&nbsp;</a></div><pre>Thanks Carl.

So these are definitely still from the old cluster. There were two OSG
jobs still running in LSF -- or rather, they must&#39;ve been hung somehow,
since no jobs should ever even be able to run for more than 2 days!

Anyway, I killed those jobs and shut down all OSG services, so we
shouldn&#39;t hear from that machine anymore.

So now we need to figure out why the new SLURM gratia probe isn&#39;t
working. Any hints as to where to look for this error?

Thanks,

Horst</pre></div><div class='update_description'><i onclick="document.location='30868#1471898377'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-22T20:39:37+00:00">Aug 22, 2016 08:39 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1471898377">&nbsp;</a></div><pre>Here are the recent source records&#58;

+--------+---------------------+-------+--------------+------------------------+----------------+
| VOName | EndTime             | Cores | WallDuration | probename              | SiteName       |
+--------+---------------------+-------+--------------+------------------------+----------------+
| dosar  | 2016-08-10 00&#58;00&#58;00 |     4 |          409 | lsf&#58;grid1.oscer.ou.edu | OU_OSCER_ATLAS |
| dosar  | 2016-08-10 00&#58;00&#58;00 |    10 |          104 | lsf&#58;grid1.oscer.ou.edu | OU_OSCER_ATLAS |
| dosar  | 2016-08-12 00&#58;00&#58;00 |     4 |          211 | lsf&#58;grid1.oscer.ou.edu | OU_OSCER_ATLAS |
| dosar  | 2016-08-12 00&#58;00&#58;00 |     4 |           12 | lsf&#58;grid1.oscer.ou.edu | OU_OSCER_ATLAS |
| dosar  | 2016-08-16 00&#58;00&#58;00 |     4 |           25 | lsf&#58;grid1.oscer.ou.edu | OU_OSCER_ATLAS |
| dosar  | 2016-08-17 00&#58;00&#58;00 |     4 |          419 | lsf&#58;grid1.oscer.ou.edu | OU_OSCER_ATLAS |
| dosar  | 2016-08-17 00&#58;00&#58;00 |    10 |           60 | lsf&#58;grid1.oscer.ou.edu | OU_OSCER_ATLAS |
| dosar  | 2016-08-18 00&#58;00&#58;00 |    10 |           17 | lsf&#58;grid1.oscer.ou.edu | OU_OSCER_ATLAS |
| dosar  | 2016-08-18 00&#58;00&#58;00 |     4 |           30 | lsf&#58;grid1.oscer.ou.edu | OU_OSCER_ATLAS |
| dosar  | 2016-08-19 00&#58;00&#58;00 |     4 |          331 | lsf&#58;grid1.oscer.ou.edu | OU_OSCER_ATLAS |
| dosar  | 2016-08-19 00&#58;00&#58;00 |     4 |          285 | lsf&#58;grid1.oscer.ou.edu | OU_OSCER_ATLAS |
+--------+---------------------+-------+--------------+------------------------+----------------+</pre></div><div class='update_description'><i onclick="document.location='30868#1471895415'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-22T19:50:15+00:00">Aug 22, 2016 07:50 PM UTC</time> by <b>Horst Severini</b><a class="anchor" name="1471895415">&nbsp;</a></div><pre>Hi Carl,

I just looked at the old LSF cluster gatekeeper, and it was still
running some OSG services, so it&#39;s possible that that was still
reporting to gratia, even though it&#39;s no longer associated with the
external hostname grid1.oscer.ou.edu .

I&#39;ve shut all the OSG services down on that node now, so it shouldn&#39;t be
reporting anymore.

Can you have a look at the source records for the last few days, and see
whether they were for LSF jobs or SLURM (or the PBS/Torque conversion)?
Also, the gratia version on the old gatekeeper is 1.13.31-1, while the
new one is running 1.15.0; that might also help narrow down where these
records are coming from.

We still need to figure out the error on the new SLURM grid1. Any hints
on what that could be?

Thanks a lot,

Horst</pre></div><div class='update_description'><i onclick="document.location='30868#1471893105'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-22T19:11:45+00:00">Aug 22, 2016 07:11 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1471893105">&nbsp;</a></div><pre>Just to note, it looks like there is a very small amount of time (like, less than 1hr/day) for the dosar VO recently (this past week)

<a href='http&#58;//gratiaweb.grid.iu.edu/gratia/site?facility=OU_OSCER_ATLAS' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/site?facility=OU_OSCER_ATLAS</a>

but looking a bit further back it looks like the drop off happened right at the end of June, with a large isolated spike on July 26&#58;

<a href='http&#58;//gratiaweb.grid.iu.edu/gratia/xml/vo_hours_bar_smry?facility=' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/xml/vo_hours_bar_smry?facility=</a>^OU_OSCER_ATLAS%24&probe=.*&resource-type=^Batch%24&vo=.*&user=.*&endtime=2016-08-22+23%3A59%3A59&exclude-vo=Unknown|unknown|other&includeFailed=true&exclude-role=NONE&span=86400&relativetime=None&role=.*&opportunistic-filter=BOTH&starttime=2016-06-08+00%3A00%3A00&exclude-facility=NONE|Generic|Obsolete&exclude-user=NONE&includeSuccess=true.

I don&#39;t suppose there were any configuration changes on July 1 and/or July 26/27 ?

Carl</pre></div><div class='update_description'><i onclick="document.location='30868#1471887918'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-22T17:45:18+00:00">Aug 22, 2016 05:45 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1471887918">&nbsp;</a></div><pre>Hi Brian and Carl,

Have you guys had time to review and discuss this?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='30868#1471368425'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-16T17:27:05+00:00">Aug 16, 2016 05:27 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1471368425">&nbsp;</a></div><pre>Adding Brian Lin also since he also helped look at the issue back at Clemson.

Carl</pre></div><div class='update_description'><i onclick="document.location='30868#1471368278'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-16T17:24:38+00:00">Aug 16, 2016 05:24 PM UTC</time> by <b>Carl Edquist</b><a class="anchor" name="1471368278">&nbsp;</a></div><pre>I will take a look.

Carl</pre></div><div class='update_description'><i onclick="document.location='30868#1471286862'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-15T18:47:42+00:00">Aug 15, 2016 06:47 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1471286862">&nbsp;</a></div><pre>Hi Software folks, could you please review this and provide assistance or point Horst in the right direction?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='30868#1470859813'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-10T20:10:13+00:00">Aug 10, 2016 08:10 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1470859813">&nbsp;</a></div><pre>Hello Software folks,

Can someone take a look at this and provide advice.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='30868#1470773104'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-08-09T20:05:04+00:00">Aug 9, 2016 08:05 PM UTC</time> by <b>Vince Neal</b><a class="anchor" name="1470773104">&nbsp;</a></div><pre>Hi all,

there seems to be a problem with Gratia on OU_OSCER_ATLAS now, since it no longer reports anything&#58;

<a href='http&#58;//gratiaweb.grid.iu.edu/gratia/site?facility=OU_OSCER_ATLAS' target='_blank' rel='nofollow'>http&#58;//gratiaweb.grid.iu.edu/gratia/site?facility=OU_OSCER_ATLAS</a>

I thought we got this working back in March during the OSG AHM at Clemson, but maybe something changed in SLURM recently which caused it to stop working? See below for the output of /var/log/gratia/2016-08-09.log .

I have attached a history file to this email. I guess the problem is here&#58;

GridJobId = undefined

The question is, why doesn&#39;t the probe get the proper Id from the job?

I also just attached an osg-system-profiler output to this ticket, in case that helps&#58;

<a href='30641' target='_blank' rel='nofollow'>https&#58;//ticket.opensciencegrid.org/30641</a>

Let me know what else I can provide to help get this fixed.

Thanks a lot,

Horst

----
14&#58;00&#58;01 CDT Gratia&#58; Using config file&#58; /etc/gratia/slurm/ProbeConfig
14&#58;00&#58;01 CDT Gratia&#58; Initializing Gratia with /etc/gratia/slurm/ProbeConfig
14&#58;00&#58;01 CDT Gratia&#58; Creating a Record 2016-08-09T19&#58;00&#58;01Z
14&#58;00&#58;01 CDT Gratia&#58; Creating a ProbeDetails record 2016-08-09T19&#58;00&#58;01Z
14&#58;00&#58;01 CDT Gratia&#58; ***********************************************************
14&#58;00&#58;01 CDT Gratia&#58; UsageXml&#58;  &#60;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&#62;&#60;ProbeDetails&#62;
&#60;RecordIdentity createTime=&#34;2016-08-09T19&#58;00&#58;01Z&#34; recordId=&#34;grid1.oscer.ou.edu&#58;1265278.0&#34;/&#62;
&#60;ProbeName&#62;slurm&#58;grid1.oscer.ou.edu&#60;/ProbeName&#62;
&#60;SiteName&#62;OU_OSCER_ATLAS&#60;/SiteName&#62;
&#60;Grid&#62;OSG&#60;/Grid&#62;
<div id='show_1353469017' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1353469017'>&#60;ReporterLibrary version=&#34;3997&#34;&#62;Gratia&#60;/ReporterLibrary&#62;
&#60;/ProbeDetails&#62;
14&#58;00&#58;01 CDT Gratia&#58; OK - Handshake added to bundle (1/100)
14&#58;00&#58;01 CDT Gratia&#58; ***********************************************************
14&#58;00&#58;01 CDT Gratia&#58; List of backup directories&#58; [u&#39;/var/lib/gratia/tmp&#39;]
14&#58;00&#58;01 CDT Gratia&#58; DEBUG&#58; Starting SearchOutstandingRecord
14&#58;00&#58;01 CDT Gratia&#58; DEBUG&#58; SearchOutstandingRecord /var/lib/gratia/tmp
14&#58;00&#58;01 CDT Gratia&#58; DEBUG&#58; Middle of SearchOutstandingRecord outbox&#58;0 staged outbox&#58;0 tarfiles&#58;0
14&#58;00&#58;01 CDT Gratia&#58; DEBUG&#58; Search add 0 for /var/lib/gratia/tmp/gratiafiles/r*.gratia.xml
14&#58;00&#58;01 CDT Gratia&#58; DEBUG&#58; List of Outstanding records&#58; []
14&#58;00&#58;01 CDT Gratia&#58; DEBUG&#58; After SearchOutstandingRecord outbox&#58;0 staged outbox&#58;0 tarfiles&#58;0
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79875.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79855.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;undefined&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79803.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;undefined&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79808.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;undefined&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79800.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;undefined&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79788.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;undefined&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79865.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;undefined&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79861.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;undefined&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79857.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;undefined&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79849.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;undefined&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79801.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;undefined&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79862.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;undefined&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79858.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;undefined&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79850.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;undefined&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79802.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79798.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79891.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;undefined&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79883.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;undefined&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79786.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79778.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79863.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79859.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79762.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79851.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79847.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79843.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79839.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79835.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79823.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79819.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79815.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79811.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79807.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;undefined&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79791.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79775.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79860.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79848.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79844.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79840.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79828.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79885.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;undefined&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79869.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;undefined&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79853.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79829.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79805.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79797.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79882.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;undefined&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79870.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;undefined&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79866.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;undefined&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79854.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79834.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79830.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79826.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79822.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79818.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79814.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79867.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79864.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79899.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;undefined&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79887.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;undefined&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79884.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79889.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79914.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;undefined&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79910.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;undefined&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79902.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;undefined&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79898.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;undefined&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79894.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;undefined&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79890.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;undefined&#39;
14&#58;00&#58;01 CDT Gratia&#58; Converting ClassAd /var/lib/gratia/condorce_data/history.79911.0 to certinfo file.
14&#58;00&#58;01 CDT Gratia&#58; GridJobId was not parsed correctly&#58; &#39;undefined&#39;
14&#58;00&#58;01 CDT Gratia&#58; Reprocessing response&#58; OK - Reprocessing 0 record(s) uploaded, 0 bundled, 0 failed
14&#58;00&#58;01 CDT Gratia&#58; After reprocessing&#58; 0 in outbox 0 in staged outbox 0 tar files
14&#58;00&#58;01 CDT Gratia&#58; Sleeping for 41 seconds before proceeding.
14&#58;00&#58;42 CDT Gratia&#58; Processing bundle file&#58;
14&#58;00&#58;42 CDT Gratia&#58; DEBUG&#58; Connect
14&#58;00&#58;42 CDT Gratia&#58; DEBUG&#58; Connect&#58; OK
14&#58;00&#58;42 CDT Gratia&#58; Connection via HTTP to&#58; gratia-osg-prod.opensciencegrid.org&#58;80
14&#58;00&#58;42 CDT Gratia&#58; DEBUG&#58; Connection SUCCESS
14&#58;00&#58;42 CDT Gratia&#58; TransactionId&#58; slurm&#58;grid1.oscer.ou.edu2016-08-09T190042Z
14&#58;00&#58;42 CDT Gratia&#58; DEBUG&#58; POST
14&#58;00&#58;42 CDT Gratia&#58; DEBUG&#58; POST&#58; OK
14&#58;00&#58;42 CDT Gratia&#58; DEBUG&#58; Read response
14&#58;00&#58;42 CDT Gratia&#58; DEBUG&#58; Read response&#58; OK
14&#58;00&#58;42 CDT Gratia&#58; Response&#58; (SUCCESS, OK)
14&#58;00&#58;42 CDT Gratia&#58; Processing bundle Response code&#58;  0
14&#58;00&#58;42 CDT Gratia&#58; Processing bundle Response message&#58;  OK
14&#58;00&#58;42 CDT Gratia&#58; OK - Processed bundle with 1 records&#58;  OK
14&#58;00&#58;42 CDT Gratia&#58; ***********************************************************
14&#58;00&#58;42 CDT Gratia&#58; Removing log files older than 31 days from /var/log/gratia
14&#58;00&#58;42 CDT Gratia&#58;  Will check the files&#58; [u&#39;/var/log/gratia/2016-07-23.log&#39;, u&#39;/var/log/gratia/2016-07-24.log&#39;, u&#39;/var/log/gratia/2016-07-25.log&#39;, u&#39;/var/log/gratia/2016-07-26.log&#39;, u&#39;/var/log/gratia/2016-07-27.log&#39;, u&#39;/var/log/gratia/2016-07-28.log&#39;, u&#39;/var/log/gratia/2016-07-29.log&#39;, u&#39;/var/log/gratia/2016-07-30.log&#39;, u&#39;/var/log/gratia/2016-07-31.log&#39;, u&#39;/var/log/gratia/2016-08-01.log&#39;, u&#39;/var/log/gratia/2016-08-02.log&#39;, u&#39;/var/log/gratia/2016-08-09.log&#39;, u&#39;/var/log/gratia/2016-07-09.log&#39;, u&#39;/var/log/gratia/2016-07-10.log&#39;, u&#39;/var/log/gratia/2016-07-11.log&#39;, u&#39;/var/log/gratia/2016-07-12.log&#39;, u&#39;/var/log/gratia/2016-07-13.log&#39;, u&#39;/var/log/gratia/2016-07-14.log&#39;, u&#39;/var/log/gratia/2016-07-15.log&#39;, u&#39;/var/log/gratia/2016-07-16.log&#39;, u&#39;/var/log/gratia/2016-07-17.log&#39;, u&#39;/var/log/gratia/2016-07-18.log&#39;, u&#39;/var/log/gratia/2016-07-22.log&#39;]
14&#58;00&#58;42 CDT Gratia&#58; /var/log/gratia uses 0.058% and there is 79% free
14&#58;00&#58;42 CDT Gratia&#58; Removing incomplete data files older than 31 days from /var/lib/gratia/data/
14&#58;00&#58;42 CDT Gratia&#58;  Will check the files&#58; [u&#39;/var/lib/gratia/data/gratia_certinfo_pbs_546252&#39;, u&#39;/var/lib/gratia/data/gratia_certinfo_pbs_546251&#39;, u&#39;/var/lib/gratia/data/gratia_certinfo_pbs_546250&#39;]
14&#58;00&#58;42 CDT Gratia&#58; /var/lib/gratia/data uses 0% and there is 79% free
14&#58;00&#58;42 CDT Gratia&#58; Removing quarantines data files older than 31 days from /var/lib/gratia/data/quarantine
14&#58;00&#58;42 CDT Gratia&#58;  Will check the files&#58; [u&#39;/var/lib/gratia/data/quarantine/subdir.slurm_grid0.oscer.ou.edu_gratia-osg-prod.opensciencegrid.org_80&#39;]
14&#58;00&#58;42 CDT Gratia&#58; Removing quarantines data files older than 31 days from /var/lib/gratia/data/quarantine/subdir.slurm_grid0.oscer.ou.edu_gratia-osg-prod.opensciencegrid.org_80
14&#58;00&#58;42 CDT Gratia&#58; End of execution summary&#58; new records sent successfully&#58; 0
14&#58;00&#58;42 CDT Gratia&#58;                           new records suppressed&#58; 0
14&#58;00&#58;42 CDT Gratia&#58;                           new records failed&#58; 0
14&#58;00&#58;42 CDT Gratia&#58;                           records reprocessed successfully&#58; 0
14&#58;00&#58;42 CDT Gratia&#58;                           reprocessed records failed&#58; 0
14&#58;00&#58;42 CDT Gratia&#58;                           handshake records sent successfully&#58; 1
14&#58;00&#58;42 CDT Gratia&#58;                           handshake records failed&#58; 0
14&#58;00&#58;42 CDT Gratia&#58;                           bundle of records sent successfully&#58; 1
14&#58;00&#58;42 CDT Gratia&#58;                           bundle of records failed&#58; 0
14&#58;00&#58;42 CDT Gratia&#58;                           outstanding records&#58; 0
14&#58;00&#58;42 CDT Gratia&#58;                           outstanding staged records&#58; 0
14&#58;00&#58;42 CDT Gratia&#58;                           outstanding records tar files&#58; 0
14&#58;00&#58;42 CDT Gratia&#58; End-of-execution disconnect ...

</div><script type='text/javascript'>
        $('#show_1353469017').click(function() {
            $('#detail_1353469017').slideDown("normal");
            $('#show_1353469017').hide();
            $('#hide_1353469017').show();
        });
        $('#hide_1353469017').click(function() {
            $('#detail_1353469017').slideUp();
            $('#hide_1353469017').hide();
            $('#show_1353469017').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F30868">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 30868});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
