<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[32147] Supporting OSG VO</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=32147" method="post">
<div class="page-header">
    <h3><span class="muted">32147</span> / Supporting OSG VO</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Douglas Johnson</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Douglas Johnson</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Gliden Support Review</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2017-02-16</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">OSG Glidein Factory Support <span class="muted"> / OSG Support Centers</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/32147", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/32147?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/32147?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20Supporting%20OSG%20VO%20ISSUE%3D32147%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='32147#1487278780'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-16T20:59:40+00:00">Feb 16, 2017 08:59 PM UTC</time><a class="anchor" name="1487278780">&nbsp;</a></div><pre>Greetings,

Concerning glexec&#58; We provide glexec as CMS requires it. We do not require that GRID jobs use glexec. My understanding is that CMS is either the only VO or one of the few that uses it.

Thank you,
doug

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=johnsond/CN=655679/CN=Douglas Johnson</pre></div><div class='update_description'><i onclick="document.location='32147#1487272583'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-16T19:16:23+00:00">Feb 16, 2017 07:16 PM UTC</time><a class="anchor" name="1487272583">&nbsp;</a></div><pre>OSG VO had a low value for max job length. We have no adjusted the value to 8 hours. That should give most jobs plenty of time to finish up and make the glidein exit cleanly before the 48 hour wall time limit.

There could always be users trying to run longer jobs, but that should not happen very often.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Mats Rynge 45</pre></div><div class='update_description'><i onclick="document.location='32147#1487271947'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-16T19:05:47+00:00">Feb 16, 2017 07:05 PM UTC</time><a class="anchor" name="1487271947">&nbsp;</a></div><pre>Hi Doug,

Yes, this partial log symptom does often occur when the local batch system kills the glidein before it finishes cleaning up on its way out. But the OSG glideins should be respecting the same limits as CMS glideins. But I&#39;ll double check the limits anyway as I&#39;m still currently investigating any differences I can find between CMS and OSG glideins.

Marty Kandes
UCSD Glidein Factory Operations

P.S. Random question&#58; Do you require glexec at the site?

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='32147#1487271647'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-16T19:00:47+00:00">Feb 16, 2017 07:00 PM UTC</time> by <b>douglas.johnson@....</b><a class="anchor" name="1487271647">&nbsp;</a></div><pre>Greetings,

This morning I saw some OSG jobs running right up to the 48 hour wall time
limit. I don&#39;t know if they ended gracefully or were killed by the batch
system. Does the factory honor/expect/etc the 48 hour limit? Should OSG
jobs have a different wallclock limit? Could this be the problem you are
seeing?

Thank you,
doug

On Thu, Feb 16, 2017 at 11&#58;47 AM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='32147#1487270836'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-16T18:47:16+00:00">Feb 16, 2017 06:47 PM UTC</time><a class="anchor" name="1487270836">&nbsp;</a></div><pre>Hi Chris,

Sorry, I have to reopen this ticket. We&#39;re not quite done here.

Mats,

Can you determine if OSG user jobs landing here are running successfully? We&#39;re getting back some glideins with partial logs (i.e., no condor logs). So it&#39;s a bit hard to tell if these glideins are running user jobs.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='32147#1487269643'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-16T18:27:23+00:00">Feb 16, 2017 06:27 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1487269643">&nbsp;</a></div><pre>Thank you for informing us that this issue has been resolved. I will close this ticket.  Please submit problems, requests, and questions at&#58; <a href='https&#58;//ticket.grid.iu.edu/goc/open' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/open</a> OSG Grid Operations Center goc@...., 317-278-9699 Visit the OSG Operations Page&#58; <a href='http&#58;//osggoc.blogspot.com/' target='_blank' rel='nofollow'>http&#58;//osggoc.blogspot.com/</a></pre></div><div class='update_description'><i onclick="document.location='32147#1487131626'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-15T04:07:06+00:00">Feb 15, 2017 04:07 AM UTC</time><a class="anchor" name="1487131626">&nbsp;</a></div><pre>Doug,

Thanks for the confirmation. And yes, it looks like it may have affected both CMS and OSG glideins. We&#39;ll check back on glidein performance later this week. If all looks good, we can probably close out this ticket then. That is, of course, unless there is something else you think we need to discuss.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='32147#1487113752'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-14T23:09:12+00:00">Feb 14, 2017 11:09 PM UTC</time> by <b>douglas.johnson@....</b><a class="anchor" name="1487113752">&nbsp;</a></div><pre>Greetings,

Yes, we had SQUID server problems overnight. This most likely affected
CVMFS which would affect both OSG and CMS. Although it should be resolved
now, I am continuing to monitor it.

Thank you,
doug

On Tue, Feb 14, 2017 at 12&#58;49 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='32147#1487101770'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-14T19:49:30+00:00">Feb 14, 2017 07:49 PM UTC</time><a class="anchor" name="1487101770">&nbsp;</a></div><pre>Hi Doug,

I was able to confirm that both CMS [1] and OSG [2] glideins are in fact now landing on the correct paths. Note, however, I did observe some fraction of OSG glideins being returned today with only partial logs. And I also noticed that some CMS glideins were indicating a possible squid problem [3]. Any issues on your side recently?

Marty Kandes
UCSD Glidein Factory Operations

[1]

[1051] mkandes@test-frontend-1 ~/submit/cms_logs$ less test.out.8240.9
DESIRED_Sites&#58; CMSHTPC_T3_US_Colorado_heposg01
Submitted to&#58; CMSHTPC_T3_US_Colorado_heposg01
uscms4597
Fri Feb 10 09&#58;47&#58;02 MST 2017
Linux lnxfarm209.colorado.edu 2.6.32-642.6.2.el6.x86_64 #1 SMP Tue Oct 25 15&#58;06&#58;33 CDT 2016 x86_64 x86_64 x86_64 GNU/Linux
/batch/lnxfarm209/7382589.1.lnxfarm/glide_kCVqye/execute/dir_4066
/sge-batch/7382589.1.lnxfarm
/tmp/glide_uscms4597_KueT36
3600
jobs slept for 3600 seconds.

[2]

[1048] mkandes@test-frontend-1 ~/submit/mis_logs$ less test.out.8241.9
DESIRED_Sites&#58; CMSHTPC_T3_US_Colorado_heposg01
Submitted to&#58; CMSHTPC_T3_US_Colorado_heposg01
mis
Fri Feb 10 09&#58;47&#58;02 MST 2017
Linux lnxfarm295.colorado.edu 2.6.32-573.22.1.el6.x86_64 #1 SMP Tue Mar 22 17&#58;15&#58;28 CDT 2016 x86_64 x86_64 x86_64 GNU/Linux
/batch/lnxfarm295/7382585.1.lnxfarm/glide_VngoQC/execute/dir_16616
/sge-batch/7382585.1.lnxfarm
/tmp/glide_mis_TvVmg3
3600
jobs slept for 3600 seconds.

<div id='show_984934046' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_984934046'>[3]

Frontier Request&#58;
<a href='http&#58;//cmsfrontier.cern.ch&#58;8080/FrontierProd/Frontier?type=frontier_request&#58' target='_blank' rel='nofollow'>http&#58;//cmsfrontier.cern.ch&#58;8080/FrontierProd/Frontier?type=frontier_request&#58</a>;1&#58;DEFAULT&amp;encoding=BLOB&amp;p1=eNoLdvVxdQ5RMFRwC/L3VXAJdfQBACyLBKw=

test_squid.py&#58; Error. squid <a href='http&#58;//cmsprxy02.colorado.edu&#58;3128' target='_blank' rel='nofollow'>http&#58;//cmsprxy02.colorado.edu&#58;3128</a> is down,
unreachable or will not reply.
urllib2.URLError&#58;
timed out
squid&#58; <a href='http&#58;//cmsprxy03.colorado.edu&#58;3128' target='_blank' rel='nofollow'>http&#58;//cmsprxy03.colorado.edu&#58;3128</a>

Frontier Request&#58;
<a href='http&#58;//cmsfrontier.cern.ch&#58;8080/FrontierProd/Frontier?type=frontier_request&#58' target='_blank' rel='nofollow'>http&#58;//cmsfrontier.cern.ch&#58;8080/FrontierProd/Frontier?type=frontier_request&#58</a>;1&#58;DEFAULT&amp;encoding=BLOB&amp;p1=eNoLdvVxdQ5RMFRwC/L3VXAJdfQBACyLBKw=

test_squid.py&#58; Error. squid <a href='http&#58;//cmsprxy03.colorado.edu&#58;3128' target='_blank' rel='nofollow'>http&#58;//cmsprxy03.colorado.edu&#58;3128</a> is down,
unreachable or will not reply.
urllib2.URLError&#58;
timed out
test_squid.py&#58; All squid(s) failed

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049
</div><script type='text/javascript'>
        $('#show_984934046').click(function() {
            $('#detail_984934046').slideDown("normal");
            $('#show_984934046').hide();
            $('#hide_984934046').show();
        });
        $('#hide_984934046').click(function() {
            $('#detail_984934046').slideUp();
            $('#hide_984934046').hide();
            $('#show_984934046').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32147#1487018621'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-13T20:43:41+00:00">Feb 13, 2017 08:43 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1487018621">&nbsp;</a></div><pre>HI Marty,

How is this looking now?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='32147#1486745053'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-10T16:44:13+00:00">Feb 10, 2017 04:44 PM UTC</time> by <b>douglas.johnson@....</b><a class="anchor" name="1486745053">&nbsp;</a></div><pre>Hi Marty,

Given the worker node name lnxfarm245, the path would be either&#58;

/batch/lnxfarm245/#########.1.lnxfarm
/sge-batch/########.1.lnxfarm

Where ######## is a 7 digit integer.  The lnxfarm at the end indicates the
SGE queue.

On every machine /sge-batch is symbolic link to /batch/$hostname so they
are the same location and are disks local to the worker node.

I hope this helps,
doug

On Fri, Feb 10, 2017 at 8&#58;58 AM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='32147#1486742320'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-10T15:58:40+00:00">Feb 10, 2017 03:58 PM UTC</time><a class="anchor" name="1486742320">&nbsp;</a></div><pre>Doug,

What should a typical PATH for TMPDIR look like? I just want to make sure we confirm we&#39;re seeing the glideins land there as well.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='32147#1486682054'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-09T23:14:14+00:00">Feb 9, 2017 11:14 PM UTC</time> by <b>douglas.johnson@....</b><a class="anchor" name="1486682054">&nbsp;</a></div><pre>Hi Marian,

The method described in <a href='https&#58;//twiki.grid.iu.edu/b' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/b</a>
in/view/Documentation/Release3/IniConfigurationOptions#Local_Settings works
for me.

root&#62; cd /etc/osg/config.d/
root&#62; cat 40-localsettings.ini
;
; Put any environment variables that should go into the local
; job environment for grid jobs here.  The format is
;   env = setting
; and case is preserved, the setting does not need to be quoted
; See <a href='https&#58;//twiki.grid.iu.edu/bin/view/Documentation/' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/Documentation/</a>
Release3/IniConfigurationOptions#Local_Settings
; for more details
[Local Settings]

OSG_WN_TMP = $TMPDIR

root&#62; osg-configure -c
root&#62; grep TMPDIR /var/lib/osg/osg*
/var/lib/osg/osg-job-environment.conf&#58;OSG_WN_TMP=&#34;$TMPDIR&#34;
/var/lib/osg/osg-local-job-environment.conf&#58;OSG_WN_TMP=&#34;$TMPDIR&#34;

Then when the job runs, it uses $TMPDIR for OSG_WN_TMP which is exactly
what we want. TMPDIR is the scratch area generated by the batch system at
run time.

Thank you,
doug

On Thu, Feb 9, 2017 at 4&#58;11 PM, Douglas Johnson &#60;drjohn@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; Hi Marian,</font>
<div id='show_590744135' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_590744135'><font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; I am a little confused. The method described in</font>
<font color='#7F7E6F'>&#62; <a href='https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3</a></font>
<font color='#7F7E6F'>&#62; /IniConfigurationOptions#Local_Settings works for me.</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; root&#62; cd /etc/osg/config.d/</font>
<font color='#7F7E6F'>&#62; root&#62; cat 40-localsettings.ini</font>
<font color='#7F7E6F'>&#62; ;</font>
<font color='#7F7E6F'>&#62; ; Put any environment variables that should go into the local</font>
<font color='#7F7E6F'>&#62; ; job environment for grid jobs here.  The format is</font>
<font color='#7F7E6F'>&#62; ;   env = setting</font>
<font color='#7F7E6F'>&#62; ; and case is preserved, the setting does not need to be quoted</font>
<font color='#7F7E6F'>&#62; ; See <a href='https&#58;//twiki.grid.iu.edu/bin/view/Documentation/' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/Documentation/</a></font>
<font color='#7F7E6F'>&#62; Release3/IniConfigurationOptions#Local_Settings</font>
<font color='#7F7E6F'>&#62; ; for more details</font>
<font color='#7F7E6F'>&#62; [Local Settings]</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; OSG_WN_TMP = $TMPDIR</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; root&#62; osg-configure -c</font>
<font color='#7F7E6F'>&#62; root&#62; grep TMPDIR /var/lib/osg/osg*</font>
<font color='#7F7E6F'>&#62; /var/lib/osg/osg-job-environment.conf&#58;OSG_WN_TMP=&#34;$TMPDIR&#34;</font>
<font color='#7F7E6F'>&#62; /var/lib/osg/osg-local-job-environment.conf&#58;OSG_WN_TMP=&#34;$TMPDIR&#34;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; Then when the job runs, it uses $TMPDIR for OSG_WN_TMP</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; On Thu, Feb 9, 2017 at 2&#58;59 PM, Open Science Grid FootPrints &#60;</font>
<font color='#7F7E6F'>&#62; osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62;&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_590744135').click(function() {
            $('#detail_590744135').slideDown("normal");
            $('#show_590744135').hide();
            $('#hide_590744135').show();
        });
        $('#hide_590744135').click(function() {
            $('#detail_590744135').slideUp();
            $('#hide_590744135').hide();
            $('#show_590744135').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32147#1486682051'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-09T23:14:11+00:00">Feb 9, 2017 11:14 PM UTC</time> by <b>douglas.johnson@....</b><a class="anchor" name="1486682051">&nbsp;</a></div><pre>Hi Marian,

I am a little confused. The method described in <a href='https&#58;//twiki.grid.iu.edu/' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/</a>
bin/view/Documentation/Release3/IniConfigurationOptions#Local_Settings works
for me.

root&#62; cd /etc/osg/config.d/
root&#62; cat 40-localsettings.ini
;
; Put any environment variables that should go into the local
; job environment for grid jobs here.  The format is
;   env = setting
; and case is preserved, the setting does not need to be quoted
; See <a href='https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/</a>
IniConfigurationOptions#Local_Settings
; for more details
[Local Settings]

OSG_WN_TMP = $TMPDIR

root&#62; osg-configure -c
root&#62; grep TMPDIR /var/lib/osg/osg*
/var/lib/osg/osg-job-environment.conf&#58;OSG_WN_TMP=&#34;$TMPDIR&#34;
/var/lib/osg/osg-local-job-environment.conf&#58;OSG_WN_TMP=&#34;$TMPDIR&#34;

Then when the job runs, it uses $TMPDIR for OSG_WN_TMP

On Thu, Feb 9, 2017 at 2&#58;59 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='32147#1486681873'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-09T23:11:13+00:00">Feb 9, 2017 11:11 PM UTC</time> by <b>douglas.johnson@....</b><a class="anchor" name="1486681873">&nbsp;</a></div><pre>Hi Marian,

I am a little confused. The method described in
<a href='https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/IniConfigurationOptions#Local_Settings' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/IniConfigurationOptions#Local_Settings</a>
works for me.

root&#62; cd /etc/osg/config.d/
root&#62; cat 40-localsettings.ini
;
; Put any environment variables that should go into the local
; job environment for grid jobs here.  The format is
;   env = setting
; and case is preserved, the setting does not need to be quoted
; See
<a href='https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/IniConfigurationOptions#Local_Settings' target='_blank' rel='nofollow'>https&#58;//twiki.grid.iu.edu/bin/view/Documentation/Release3/IniConfigurationOptions#Local_Settings</a>
; for more details
[Local Settings]

OSG_WN_TMP = $TMPDIR

root&#62; osg-configure -c
root&#62; grep TMPDIR /var/lib/osg/osg*
/var/lib/osg/osg-job-environment.conf&#58;OSG_WN_TMP=&#34;$TMPDIR&#34;
/var/lib/osg/osg-local-job-environment.conf&#58;OSG_WN_TMP=&#34;$TMPDIR&#34;

On Thu, Feb 9, 2017 at 2&#58;59 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='32147#1486677558'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-09T21:59:18+00:00">Feb 9, 2017 09:59 PM UTC</time><a class="anchor" name="1486677558">&nbsp;</a></div><pre>Doug,

Yeah, I don&#39;t think there is an easy way to dynamically set the worker_node_temp variable in the HTCondor-CE configuration (ini) files. However, if TMPDIR is a standard environment variable SGE provides to all batch jobs, we may be able to tell the glideins to look for it instead of for the worker_node_temp variable. Where again will TMPDIR normally point a job to for scratch?

Marian,

I&#39;ve created a separate test entry on the GOC-ITB factory in 20-local-itb.xml with work_dir = TMPDIR for us to test. We should see what scratch space these test glideins write to and compare with those in production.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='32147#1486677013'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-09T21:50:13+00:00">Feb 9, 2017 09:50 PM UTC</time> by <b>douglas.johnson@....</b><a class="anchor" name="1486677013">&nbsp;</a></div><pre>Greetings,

This is now working on the Colorado site. This is a great feature and
deserves more publicity.

Thank you for all of your help,
doug

On Tue, Feb 7, 2017 at 11&#58;50 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='32147#1486536611'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-08T06:50:11+00:00">Feb 8, 2017 06:50 AM UTC</time> by <b>marian.zvada@....</b><a class="anchor" name="1486536611">&nbsp;</a></div><pre>Hi Doug,

<font color='#7F7E6F'>&#62; I am not positive but I believe that at one point work_dir evaluated to</font>
<font color='#7F7E6F'>&#62; $TMPDIR for Colorado. As far as I understand, it does not work for a site</font>
<font color='#7F7E6F'>&#62; to put a dynamic variable in /etc/osg/config.d/10-storage.ini for</font>
<font color='#7F7E6F'>&#62; worker_node_temp. For example, none of the following work&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; worker_node_temp = $TMPDIR</font>
<font color='#7F7E6F'>&#62; worker_node_temp = &#92;$TMPDIR</font>
<font color='#7F7E6F'>&#62; worker_node_temp = &#39;$TMPDIR&#39;</font>
<font color='#7F7E6F'>&#62; worker_node_temp = &#39;&#92;$TMPDIR&#39;</font>
<font color='#7F7E6F'>&#62; etc...</font>

this reminds me we&#39;ve been solving something similar for Bockjoo long
ago and should have been fixed&#58;
<a href='https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-2221' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-2221</a>

I wonder now, does that address your issue?

Thanks,
Marian

On 2/7/17 4&#58;41 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='32147#1486507315'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-07T22:41:55+00:00">Feb 7, 2017 10:41 PM UTC</time><a class="anchor" name="1486507315">&nbsp;</a></div><pre>Hi,

yeah, that&#39;s what I was trying to tell, thanks for pointing out the file, Marty. 10-storage.ini comes from osg-configure-ce package located in /etc/osg/config.d/. And, indeed there is set worker_node_temp to whatever location site prefers. I&#39;m not sure what it changes on our end if we change it to TMPDIR as long as worker_node_temp is configured at Colorado. Or are you saying, Doug, you want it different way?

Quick parse through glidein Starter logs doesn&#39;t show any evidence of errors since Feb 2 ... I also checked Startd(s), the only sign of some trouble I found here&#58;

02/02/17 19&#58;44&#58;21 (pid&#58;10705) DaemonCore&#58; ERROR&#58; Can&#39;t delete address file /sge-batch/glide_Vao87M/log/.startd_address

But, that is also from 5 days ago, and I checked only OSG glideins.

-Marian

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=zvada/CN=684832/CN=Marian Zvada</pre></div><div class='update_description'><i onclick="document.location='32147#1486507275'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-07T22:41:15+00:00">Feb 7, 2017 10:41 PM UTC</time> by <b>douglas.johnson@....</b><a class="anchor" name="1486507275">&nbsp;</a></div><pre>Greetings,

I am not positive but I believe that at one point work_dir evaluated to
$TMPDIR for Colorado. As far as I understand, it does not work for a site
to put a dynamic variable in /etc/osg/config.d/10-storage.ini for
worker_node_temp. For example, none of the following work&#58;

worker_node_temp = $TMPDIR
worker_node_temp = &#92;$TMPDIR
worker_node_temp = &#39;$TMPDIR&#39;
worker_node_temp = &#39;&#92;$TMPDIR&#39;
etc...

It is fine if you can&#39;t do this at the factory any longer and close the
ticket.

Thank you for the help,
doug

On Tue, Feb 7, 2017 at 2&#58;53 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='32147#1486505035'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-07T22:03:55+00:00">Feb 7, 2017 10:03 PM UTC</time><a class="anchor" name="1486505035">&nbsp;</a></div><pre>Marian,

From Doug&#39;s description it sounds like it may be more appropriate for us to try and use work_dir = TMPDIR instead of work_dir = OSG with how his SGE batch system is configured. However, before making any change on our end, please double check if we&#39;re still seeing the condor_starter errors I observed last week.

Marty Kandes
UCSD Glidein Factory Operations

P.S. I believe the glideinWMS factory work_dir = OSG translates to work_dir = worker_node_temp in the context of an HTCondor-CE (10-storage.ini) configuration.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='32147#1486504411'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-07T21:53:31+00:00">Feb 7, 2017 09:53 PM UTC</time><a class="anchor" name="1486504411">&nbsp;</a></div><pre>Not sure whether there is question to Factory, but seeing mention of TMPDIR this is what we do on Factory side&#58;

work_dir=&#34;OSG&#34;

Here the OSG translates to whatever is set on the site side in the environment. I&#39;m not now entirely sure which config is it, but it has something to do with osg-configure on WNs.

-Marian

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=zvada/CN=684832/CN=Marian Zvada</pre></div><div class='update_description'><i onclick="document.location='32147#1486499715'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-07T20:35:15+00:00">Feb 7, 2017 08:35 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1486499715">&nbsp;</a></div><pre>Hello All,

Is there an update for this? Is this ok to close?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='32147#1486068075'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-02T20:41:15+00:00">Feb 2, 2017 08:41 PM UTC</time> by <b>douglas.johnson@....</b><a class="anchor" name="1486068075">&nbsp;</a></div><pre>Hi Marty.

One of the reasons that this issue went unnoticed on my end is that a few
years ago I got the factory to change their configuration parameters so
that the glideins would start in the temporary directory created by the
batch system. SGE provides every job with the environmental variable
TMPDIR. This is a directory dynamically created and removed by SGE. This
directory is automatically removed when the job exits and has none of the
problems with removing files that can come from using glexec. (I understand
that CMS is the only VO using it.) It will clean up this directory for
almost any reason the jobs exits including if the system crashes. The
directory /sge-batch is the directory defined in 10-storage.ini&#58;

worker_node_temp = /sge-batch

As far as I know, there is no way for me to define a dynamic directory in
the OSG configuration. Is there someway to have the factory (for both CMS
and OSG) submit jobs to Colorado so that pilots use the directory pointed
to by the variable TMPDIR? As I said, this was the case at one point but
seems to no longer be the case. Both CMS and OSG jobs seem to create a run
directory under worker_node_temp.

As to the error you reported, it could be an effect of the clean up script.
It seems that OSG jobs stay around for the full 48 hours; CMS jobs rarely
stay that long. The age for removing old files may have a bit too tight and
I have now increased it to 3 days; 24 hours longer than jobs should be
running.

Thank you,
doug

On Thu, Feb 2, 2017 at 10&#58;07 AM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='32147#1486055347'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-02T17:09:07+00:00">Feb 2, 2017 05:09 PM UTC</time><a class="anchor" name="1486055347">&nbsp;</a></div><pre>Mats,

If you haven&#39;t already, please feel free to revert back to HTCondor 8.4.8 tarballs.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='32147#1486055249'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-02T17:07:29+00:00">Feb 2, 2017 05:07 PM UTC</time><a class="anchor" name="1486055249">&nbsp;</a></div><pre>Doug,

Thanks for tracking down the issue with the clean-up script. I may still be seeing some lingering errors [1] in the OSG glidein logs associated with the script. Let&#39;s leave this ticket open for a few more days and let the newer glideins cycle through the system. If their logs look clean, we can then go ahead and close out then.

Marty Kandes
UCSD Glidein Factory Operations

[1]

2/01/17 07&#58;38&#58;37 (pid&#58;13929) Create_Process&#58; Cannot access specified executable &#34;/sge-batch/glide_MPeqA0/main/condor/sbin/condor_starter&#34;&#58; errno = 2 (No such file or directory)
02/01/17 07&#58;38&#58;37 (pid&#58;13929) slot1_5&#58; ERROR&#58; exec_starter failed!
02/01/17 07&#58;38&#58;37 (pid&#58;13929) slot1_5&#58; ERROR&#58; exec_starter returned 0

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='32147#1485967315'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-01T16:41:55+00:00">Feb 1, 2017 04:41 PM UTC</time><a class="anchor" name="1485967315">&nbsp;</a></div><pre>Sounds good to me.

Thanks,
Marian

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=zvada/CN=684832/CN=Marian Zvada</pre></div><div class='update_description'><i onclick="document.location='32147#1485965329'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-02-01T16:08:49+00:00">Feb 1, 2017 04:08 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1485965329">&nbsp;</a></div><pre>OK, this seems like it&#39;s resolved for now can we close this ticket and open a new one if other issues come of this?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='32147#1485886150'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-31T18:09:10+00:00">Jan 31, 2017 06:09 PM UTC</time> by <b>douglas.johnson@....</b><a class="anchor" name="1485886150">&nbsp;</a></div><pre>Greetings,

What I can say is that the OSG jobs start and continue running for long
past one hour. I don&#39;t know, but do hope, that people are getting useful
time now.

job-ID  prior   name       user         state submit/start at     queue
slots ja-task-ID
-----------------------------------------------------------------------------------------------------------------
7202097 50.01923 bl_41484b5 osg          r     01/30/2017 09&#58;01&#58;10
lnxfarm@....     8
7202099 50.01923 bl_6f9f873 osg          r     01/30/2017 09&#58;01&#58;10
lnxfarm@....     8
7202100 50.01923 bl_63b43c7 osg          r     01/30/2017 09&#58;01&#58;10
lnxfarm@....     8
7202102 50.01923 bl_3ea2707 osg          r     01/30/2017 09&#58;01&#58;10
lnxfarm@....     8
7202104 50.01923 bl_64bde9c osg          r     01/30/2017 09&#58;01&#58;25
lnxfarm@....     8
7202106 50.01923 bl_5dad091 osg          r     01/30/2017 09&#58;01&#58;25
lnxfarm@....     8
7202124 50.01923 bl_bb399d6 osg          r     01/30/2017 09&#58;01&#58;25
lnxfarm@....     8
7202125 50.01923 bl_b9bcd69 osg          r     01/30/2017 09&#58;01&#58;25
lnxfarm@....     8
7202126 50.01923 bl_47828c8 osg          r     01/30/2017 09&#58;24&#58;40
lnxfarm@....     8
7202130 50.01923 bl_3e3f0e4 osg          r     01/30/2017 09&#58;42&#58;10
lnxfarm@....     8
7202131 50.01923 bl_7604ddc osg          r     01/30/2017 09&#58;51&#58;40
lnxfarm@....     8
7202132 50.01923 bl_0b87b52 osg          r     01/30/2017 10&#58;02&#58;55
lnxfarm@....     8
7202140 50.01923 bl_7430373 osg          r     01/30/2017 10&#58;12&#58;25
lnxfarm@....     8
<div id='show_897394078' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_897394078'>7202141 50.01923 bl_e9eea13 osg          r     01/30/2017 10&#58;25&#58;10
lnxfarm@....     8
7202146 50.01923 bl_8f902cb osg          r     01/30/2017 10&#58;59&#58;25
lnxfarm@....     8
7202147 50.01923 bl_71f1aa0 osg          r     01/30/2017 11&#58;04&#58;25
lnxfarm@....     8
7202148 50.01923 bl_1b22919 osg          r     01/30/2017 11&#58;10&#58;40
lnxfarm@....     8
7202153 50.01923 bl_dbbe9fd osg          r     01/30/2017 13&#58;05&#58;10
lnxfarm@....     8
7202178 50.01923 bl_8b81336 osg          r     01/30/2017 13&#58;05&#58;40
lnxfarm@....     8
7202182 50.01923 bl_717f697 osg          r     01/30/2017 13&#58;10&#58;40
lnxfarm@....     8
7202183 50.01923 bl_b4e3691 osg          r     01/30/2017 13&#58;11&#58;40
lnxfarm@....     8
7202185 50.01923 bl_4d4cf7a osg          r     01/30/2017 13&#58;24&#58;10
lnxfarm@....     8
7202590 50.01923 bl_b455352 osg          r     01/30/2017 13&#58;29&#58;25
lnxfarm@....     8
7202601 50.01923 bl_551c10c osg          r     01/30/2017 13&#58;43&#58;25
lnxfarm@....     8
7202609 50.01923 bl_3af6d1f osg          r     01/30/2017 13&#58;52&#58;25
lnxfarm@....     8
7203136 50.01923 bl_bf3d3b0 osg          r     01/31/2017 00&#58;54&#58;40
lnxfarm@....     8

Thank you,
doug

On Tue, Jan 31, 2017 at 10&#58;57 AM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_897394078').click(function() {
            $('#detail_897394078').slideDown("normal");
            $('#show_897394078').hide();
            $('#hide_897394078').show();
        });
        $('#hide_897394078').click(function() {
            $('#detail_897394078').slideUp();
            $('#hide_897394078').hide();
            $('#show_897394078').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32147#1485885450'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-31T17:57:30+00:00">Jan 31, 2017 05:57 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1485885450">&nbsp;</a></div><pre>HI Doug,

How is this working today? Did it clear up?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='32147#1485799599'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-30T18:06:39+00:00">Jan 30, 2017 06:06 PM UTC</time><a class="anchor" name="1485799599">&nbsp;</a></div><pre>Hi Doug, on the bright side this sounds like great news! Let&#39;s see how it goes then.

Thanks,
Marian

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=zvada/CN=684832/CN=Marian Zvada</pre></div><div class='update_description'><i onclick="document.location='32147#1485794172'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-30T16:36:12+00:00">Jan 30, 2017 04:36 PM UTC</time> by <b>douglas.johnson@....</b><a class="anchor" name="1485794172">&nbsp;</a></div><pre>Greetings,

This is rather embarrassing, but I think I know what the issue is. Years
ago, the CMS glideins did not clean up after themselves at the end of a
job. This lead to the worker node scratch space accumulating files and
eventually filling up. In order to address the issue, I added code to the
scratch monitoring routine that specifically looked for orphaned glidein
directories; glidein directories when no CMS job was running. At the time,
only CMS was supported here and pilots were still &#34;kind of&#34; new. Well this
code has been removing the OSG VO scratch directories every hour on the
hour. I have now disabled that part of the code which should not run on the
next hour. Hopefully this will stop the segmentation faults.

If this is indeed the cause, I sincerely apologize for all the work and
wasted effort I have caused. At the same time I am quite appreciative that
you have be willing to help so much.

With great humility,
Thank you
doug

On Mon, Jan 30, 2017 at 8&#58;59 AM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='32147#1485791940'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-30T15:59:00+00:00">Jan 30, 2017 03:59 PM UTC</time><a class="anchor" name="1485791940">&nbsp;</a></div><pre>We are seeing segfaults with 8.4.2 as well&#58;

Unsetting X509_USER_PROXY
Stack dump for process 10090 at timestamp 1485784875 (24 frames)
/sge-batch/glide_bP7h8Y/main/condor/lib/libcondor_utils_8_4_2.so(dprintf_dump_stack+0x12d)[0x2b1dc2e5af7d]
/sge-batch/glide_bP7h8Y/main/condor/lib/libcondor_utils_8_4_2.so(+0x15b432)[0x2b1dc2e6e432]
/lib64/libpthread.so.0[0x3f0f40f7e0]
/sge-batch/glide_bP7h8Y/main/condor/lib/libcondor_utils_8_4_2.so(_ZN16ProcFamilyClient13signal_familyEi21proc_family_command_tRb+0x33)[0x2b1dc2fceb03]
/sge-batch/glide_bP7h8Y/main/condor/lib/libcondor_utils_8_4_2.so(_ZN15ProcFamilyProxy11kill_familyEi+0x3f)[0x2b1dc2e76b1f]
/sge-batch/glide_bP7h8Y/main/condor/lib/libcondor_utils_8_4_2.so(_ZN10DaemonCore11Kill_FamilyEi+0x16)[0x2b1dc2fa45c6]
/sge-batch/glide_bP7h8Y/main/condor/sbin/condor_master(_ZN6daemon10KillFamilyEv+0x1f)[0x40a40f]
/sge-batch/glide_bP7h8Y/main/condor/sbin/condor_master(_ZN6daemon8HardKillEv+0x53)[0x40a483]
/sge-batch/glide_bP7h8Y/main/condor/sbin/condor_master(_ZN7Daemons18HardKillAllDaemonsEv+0x59)[0x40bbe9]
/sge-batch/glide_bP7h8Y/main/condor/sbin/condor_master(DoCleanup+0x46)[0x411616]
/sge-batch/glide_bP7h8Y/main/condor/lib/libcondor_utils_8_4_2.so(_EXCEPT_+0x11e)[0x2b1dc2e706de]
/sge-batch/glide_bP7h8Y/main/condor/lib/libcondor_utils_8_4_2.so(_ZN15ProcFamilyProxy24recover_from_procd_errorEv+0x1bb)[0x2b1dc2e7692b]
/sge-batch/glide_bP7h8Y/main/condor/lib/libcondor_utils_8_4_2.so(_ZN15ProcFamilyProxy11kill_familyEi+0x30)[0x2b1dc2e76b10]
/sge-batch/glide_bP7h8Y/main/condor/lib/libcondor_utils_8_4_2.so(_ZN10DaemonCore11Kill_FamilyEi+0x16)[0x2b1dc2fa45c6]
/sge-batch/glide_bP7h8Y/main/condor/sbin/condor_master(_ZN6daemon10KillFamilyEv+0x1f)[0x40a40f]
/sge-batch/glide_bP7h8Y/main/condor/sbin/condor_master(_ZN6daemon6ExitedEi+0x149)[0x40aa59]
/sge-batch/glide_bP7h8Y/main/condor/sbin/condor_master(_ZN7Daemons13DefaultReaperEii+0xa3)[0x40c0c3]
/sge-batch/glide_bP7h8Y/main/condor/lib/libcondor_utils_8_4_2.so(_ZN10DaemonCore10CallReaperEiPKcii+0x195)[0x2b1dc2fa81e5]
/sge-batch/glide_bP7h8Y/main/condor/lib/libcondor_utils_8_4_2.so(_ZN10DaemonCore17HandleProcessExitEii+0x2e9)[0x2b1dc2fb0309]
/sge-batch/glide_bP7h8Y/main/condor/lib/libcondor_utils_8_4_2.so(_ZN10DaemonCore24HandleDC_SERVICEWAITPIDSEi+0x7e)[0x2b1dc2fb050e]
/sge-batch/glide_bP7h8Y/main/condor/lib/libcondor_utils_8_4_2.so(_ZN10DaemonCore6DriverEv+0x823)[0x2b1dc2fb4773]
/sge-batch/glide_bP7h8Y/main/condor/lib/libcondor_utils_8_4_2.so(_Z7dc_mainiPPc+0x1799)[0x2b1dc2f950d9]
/lib64/libc.so.6(__libc_start_main+0xfd)[0x3f0ec1ed1d]
/sge-batch/glide_bP7h8Y/main/condor/sbin/condor_master[0x4090e9]
/sge-batch/glide_bP7h8Y/main/condor_startup.sh&#58; line 978&#58; 10090 Segmentation fault      $CONDOR_DIR/sbin/condor_master -f -pidfile $PWD/condor_master2.pid
ls&#58; cannot access log&#58; No such file or directory
/sge-batch/glide_bP7h8Y/main/condor_startup.sh&#58; line 1141&#58; /sge-batch/glide_bP7h8Y/main/error_gen.sh&#58; No such file or directory
/nfs/gridusers/htcondor/3806/0/cluster263806.proc0.subproc0/glidein_startup.sh&#58; line 1758&#58; /sge-batch/glide_bP7h8Y/main/error_augment.sh&#58; No such file or directory
/nfs/gridusers/htcondor/3806/0/cluster263806.proc0.subproc0/glidein_startup.sh&#58; line 1759&#58; /sge-batch/glide_bP7h8Y/main/error_augment.sh&#58; No such file or directory
Mon Jan 30 07&#58;01&#58;15 MST 2017 Error running &#39;condor_startup.sh&#39;
=== Exit messages left by periodic scripts ===
<div id='show_1538414678' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1538414678'>cat&#58; exit_message&#58; No such file or directory

And it is after the 1 hour which has been noted earlier in this ticket&#58;

=== Condor starting Mon Jan 30 06&#58;01&#58;53 MST 2017 (1485781313) ===
=== Condor started in background, now waiting on process 10090 ===
=== Condor ended Mon Jan 30 07&#58;01&#58;15 MST 2017 (1485784875) after 3562 ===

Any clues in the SGE logs?

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Mats Rynge 45
</div><script type='text/javascript'>
        $('#show_1538414678').click(function() {
            $('#detail_1538414678').slideDown("normal");
            $('#show_1538414678').hide();
            $('#hide_1538414678').show();
        });
        $('#hide_1538414678').click(function() {
            $('#detail_1538414678').slideUp();
            $('#hide_1538414678').hide();
            $('#show_1538414678').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32147#1485544798'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-27T19:19:58+00:00">Jan 27, 2017 07:19 PM UTC</time><a class="anchor" name="1485544798">&nbsp;</a></div><pre>Mats,

Okay, cool. Well, just let us know if and when you make the switch back.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='32147#1485544421'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-27T19:13:41+00:00">Jan 27, 2017 07:13 PM UTC</time><a class="anchor" name="1485544421">&nbsp;</a></div><pre>We will try. The only concern is that there was some pslot fixes in the later revisions which we might need. If I see any problems with those, I might have to switch back.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Mats Rynge 45</pre></div><div class='update_description'><i onclick="document.location='32147#1485540654'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-27T18:10:54+00:00">Jan 27, 2017 06:10 PM UTC</time><a class="anchor" name="1485540654">&nbsp;</a></div><pre>Mats,

Ah, okay. Hmmm. Can you leave it in 8.4.2 over the next week or so? If so, then maybe on Monday, we&#39;ll have Doug turn back on his 6 GB per job limit, let that go for another day or two and see what happens. If that does not bring back seg fault, we&#39;ll have you switch back to 8.4.x? Does that sound reasonable?

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='32147#1485540312'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-27T18:05:12+00:00">Jan 27, 2017 06:05 PM UTC</time> by <b>douglas.johnson@....</b><a class="anchor" name="1485540312">&nbsp;</a></div><pre>Hi Marty,

It appears that the vast majority of the pilots last for one hour. The
interesting part is that they seem to terminate at 1 minute past the hour.
Every so often a glidein runs for more than one hour. Recently one ran for
18 hours.

Yes, I can leave the memory restriction turned off. I can also think about
setting up a configuration so that OSG jobs get unlimited memory. One
difference between CMS and OSG jobs is that CMS uses glexec. This means
that the piloted jobs run as a different user. It is quite possible that
this results in the batch system not being able to track the resource usage
of the jobs.

Thank you for you help,
doug

On Fri, Jan 27, 2017 at 10&#58;33 AM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='32147#1485538414'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-27T17:33:34+00:00">Jan 27, 2017 05:33 PM UTC</time><a class="anchor" name="1485538414">&nbsp;</a></div><pre>I switched to HTCondor 8.4.2 so that might also be the reason.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Mats Rynge 45</pre></div><div class='update_description'><i onclick="document.location='32147#1485537932'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-27T17:25:32+00:00">Jan 27, 2017 05:25 PM UTC</time><a class="anchor" name="1485537932">&nbsp;</a></div><pre>Doug,

Okay, it looks like I&#39;m seeing an improvement. There are many more OSG glideins now reporting back their full logs without the seg fault cutting off the condor logs. Can we leave the 6 GB per job limit off over the weekend and return to check on glidein performance again next week? I&#39;d like to see what things look like once all of the glideins submitted before the limit was lifted work their way through the system to be sure that this was the problem.

Note&#58; When multicore glideins are sent to a site, the VO may choose to use partitionable slots. This allows them to slice and dice the resources of each glidein any way they see fit to match jobs to the available resources. Since the 8-core glideins at Colorado provide 16 GB of memory, you can expect sometimes 1 user job that lands on a glidein may want to use all of that memory, regardless of the number of cores they request alongside.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='32147#1485534959'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-27T16:35:59+00:00">Jan 27, 2017 04:35 PM UTC</time><a class="anchor" name="1485534959">&nbsp;</a></div><pre>Doug,

Thanks for the explanation. I&#39;ll check and see if the OSG glidein logs have changed since the restriction was lifted. Are all OSG glideins/jobs lasting only 1 hour exactly? I think my test jobs are set to do that. But hopefully not all jobs are running exactly 1 hour.

Mats,

Any chance you can give us an idea of what the resource requirements are for OSG jobs typically running at Colorado? e.g., Does it sound like the 6GB per job limit sound like a good suspect?

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='32147#1485480551'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-27T01:29:11+00:00">Jan 27, 2017 01:29 AM UTC</time> by <b>douglas.johnson@....</b><a class="anchor" name="1485480551">&nbsp;</a></div><pre>Hi Marty,

OSG and CMS jobs are submitted to the queue with identical resource
requirements. SGE provides a feature called JSV where I can rewrite the
job&#39;s submission requirements. OSG and CMS jobs are handled by the exact
same code.

The one caveat I am not sure about is how resources are charged against a
job that allocates 8 cores and runs one multi-threaded job. CMS allocates 8
cores and runs 8 jobs. As far as I can tell, for CMS each job is treated as
though is had been submitted independently. Things might be different for
multi-threaded jobs. We impose a maximum memory allocation of 6GB/job; we
over subscribe the RAM. If the multi-threaded jobs are being charged with
the sum of the memory of each thread they could be exceeding 6GB. I have
now removed the 6GB restriction; there is now no memory constraint. The
jobs could be charged for the time of each thread as well, but since the
wall clock limit is 50 hours, I don&#39;t see how an 8 threaded job runs out of
time in 1 hour.

Let&#39;s hope this is the issue and jobs start running longer.

Thank you,
doug

On Thu, Jan 26, 2017 at 5&#58;35 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='32147#1485477702'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-27T00:41:42+00:00">Jan 27, 2017 12:41 AM UTC</time><a class="anchor" name="1485477702">&nbsp;</a></div><pre>I haven&#39;t seen anything with OSG VO workloads. I would be willing to switch to 8.4.2 to see if that makes a difference.

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Mats Rynge 45</pre></div><div class='update_description'><i onclick="document.location='32147#1485477348'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-27T00:35:48+00:00">Jan 27, 2017 12:35 AM UTC</time><a class="anchor" name="1485477348">&nbsp;</a></div><pre>Doug,

We&#39;ve seen something like this before at Clemson [1]. There, if I remember correctly, I think we were hitting some local batch queue limits that would kill the glideins when they hit those limits. Are both CMS and OSG glideins submitted to the same SGE queue at Colorado? i.e., Do they both have the same default limits on CPU, memory, wall time, etc?

Marty Kandes
UCSD Glidein Factory Operations

[1]

<a href='29110.html' target='_blank' rel='nofollow'>https&#58;//ticket.opensciencegrid.org/29110</a>

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='32147#1485476572'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-27T00:22:52+00:00">Jan 27, 2017 12:22 AM UTC</time><a class="anchor" name="1485476572">&nbsp;</a></div><pre>Mats,

Do you see anything out of the ordinary with OSG glideins and user jobs at this site from the frontend?

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='32147#1485370211'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-25T18:50:11+00:00">Jan 25, 2017 06:50 PM UTC</time> by <b>marian.zvada@....</b><a class="anchor" name="1485370211">&nbsp;</a></div><pre>Yes - we just discussed it on today&#39;s Ops meeting - Marty will contact
FE admins of OSG and try to elaborate on the issue. It seems like it&#39;s
just OSG glideins which fail with segfault and all others (like CMS) run
just fine. It&#39;s currently unclear why it is happening.

Thanks,
Marian

On 1/25/17 12&#58;14 PM, Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='32147#1485368076'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-25T18:14:36+00:00">Jan 25, 2017 06:14 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1485368076">&nbsp;</a></div><pre>Hello All,

Does anyone have any news on this?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='32147#1484790484'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-19T01:48:04+00:00">Jan 19, 2017 01:48 AM UTC</time><a class="anchor" name="1484790484">&nbsp;</a></div><pre>Doug,

This is going take a bit more time. Basic observations are as follows&#58;

(1) CMS glideins on both our GOC and SDSC production factories run glideins and user jobs successfully without any sign of the segmentation fault given below;
(2) however, the segmentation fault persists for OSG glideins ... even though it may not be affecting user jobs that run on the glideins;
(3) when we attempt to run either CMS and OSG/MIS test glideins from our test infrastructure, both have the segmentation fault.

Initial guess is it may have something to do with what version of HTCondor each glidein runs. (1) runs 8.4.2, (2) runs 8.4.8, and (3) runs 8.4.6. I&#39;m going to try and force 8.4.2 on our test frontend and see what happens. We&#39;ll try to get back to you tomorrow.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='32147#1484771649'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-18T20:34:09+00:00">Jan 18, 2017 08:34 PM UTC</time><a class="anchor" name="1484771649">&nbsp;</a></div><pre>P.S. BTW - my test jobs I&#39;m debugging with are those &#39;mis&#39; jobs in the condor_ce_q.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='32147#1484771003'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-18T20:23:23+00:00">Jan 18, 2017 08:23 PM UTC</time><a class="anchor" name="1484771003">&nbsp;</a></div><pre>Doug,

Thanks for the reply. There is something funky going on. I need some more time to investigate. Hopefully, I&#39;ll have an answer here by the end of the afternoon. Is there any way you can give me a ballpark estimate of sorts on wallclock times for CMS and OSG glideins in last day or so? e.g., maybe number running less than 20 minutes, and the number of those running more than 20 min?

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='32147#1484770451'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-18T20:14:11+00:00">Jan 18, 2017 08:14 PM UTC</time> by <b>douglas.johnson@....</b><a class="anchor" name="1484770451">&nbsp;</a></div><pre>Hi Marty,

The permissions on /sge-batch on every machine is 1777. These permissions
are monitored on an hourly basis. In addition, the OSG pilot jobs land and
do create a tmp area under /sge-batch. There are also jobs that get run for
up to an hour as shown below&#58;

root&#62; qstat -s r -u osg
job-ID  prior   name       user         state submit/start at
queue                          slots ja-task-ID
-----------------------------------------------------------------------------------------------------------------
7187086 50.16667 bl_b63e5b0 osg          r     01/18/2017 00&#58;01&#58;25
lnxfarm@....     8
7187132 50.16667 bl_afd0ee9 osg          r     01/18/2017 12&#58;01&#58;10
lnxfarm@....     8
7187133 50.16667 bl_af8d6e6 osg          r     01/18/2017 12&#58;01&#58;25
lnxfarm@....     8

One job has been running since just after midnight MST. It looks to me like
the pilot has started multiple jobs on lnxfarm298 some with upward of 600
minutes of CPU time. The other 2 jobs appear to be an 8 threaded job called
gbatch-orbit.exe (/cvmfs/
ams.cern.ch/Offline/AMSDataDir/DataManagement/exe/linux/gbatch-orbit.exe.v5.01.0.B1091.g4).
These jobs have been landing here for the past few days. They appear to run
for exactly one hour and then exit abruptly. I am attaching part of one of
the log files they generate. The file starts some where in the middle of
job and should include the final output it generated. I do not see anything
in the file to suggest why it exits after one hour. I don&#39;t know how to
tell if the pilot should have started another job when this one finished.

I looked at your list of possible bad hosts, but I am skeptical that it is
a host problem. You list included about 90% of all the hosts. Some on the
list ran the gbatch-orbit jobs and they all run CMS jobs. The list was
helpful though in that when looking through it I found a few hosts with
heating issues. I do not think this would be causing the problem and the
<div id='show_878119080' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_878119080'>queues on those hosts were disabled on Friday. They will remain disabled
until I resolve the heating issue.

The only other issue that I have noticed recently is that CMS xrootd
recently started using IPv6 by default and falls back to IPv4 when IPv6 is
not available. We had IPv6 configured locally but not globally on the
worker nodes. I have since turned off IPv6 on the worker nodes. This fixed
a CMS xrootd test that we were failing, but seems to have had no affect on
the OSG VO jobs.

Thank you for your continued help,
doug

On Wed, Jan 18, 2017 at 12&#58;44 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>
</div><script type='text/javascript'>
        $('#show_878119080').click(function() {
            $('#detail_878119080').slideDown("normal");
            $('#show_878119080').hide();
            $('#hide_878119080').show();
        });
        $('#hide_878119080').click(function() {
            $('#detail_878119080').slideUp();
            $('#hide_878119080').hide();
            $('#show_878119080').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32147#1484768657'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-18T19:44:17+00:00">Jan 18, 2017 07:44 PM UTC</time><a class="anchor" name="1484768657">&nbsp;</a></div><pre>Doug,

Can you do me a favor and double check that the new &#39;osg&#39; user has the same permissions as the &#39;cms&#39; one does to the /sge-batch scratch space?

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='32147#1484680624'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-17T19:17:04+00:00">Jan 17, 2017 07:17 PM UTC</time><a class="anchor" name="1484680624">&nbsp;</a></div><pre>Hi All,

This looks really funky. Was this entry already working for CMS? I have only seen this kind of error when running for example sl7 binaires on sl6 or things like that. Maybe would be worth to double check that.

For now this does not look to be a Software team neither a HTCondor-Ce problem so I will be dropping Software from this.

Thanks,

Edgar
OSG Software Support

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Edgar Mauricio Fajardo Hernandez 2020</pre></div><div class='update_description'><i onclick="document.location='32147#1484263547'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-12T23:25:47+00:00">Jan 12, 2017 11:25 PM UTC</time><a class="anchor" name="1484263547">&nbsp;</a></div><pre>Hi Doug,

I think I was able get the list of hosts where this particular segfault is happening. Please, have a look at&#58;
<a href='http&#58;//t2.unl.edu/store/zvada/doug/segfault-hosts-colorado-doug.txt' target='_blank' rel='nofollow'>http&#58;//t2.unl.edu/store/zvada/doug/segfault-hosts-colorado-doug.txt</a>

Hope that helps.

Thanks,
Marian
(gWMS Factory Ops)

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=zvada/CN=684832/CN=Marian Zvada</pre></div><div class='update_description'><i onclick="document.location='32147#1484260514'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-12T22:35:14+00:00">Jan 12, 2017 10:35 PM UTC</time><a class="anchor" name="1484260514">&nbsp;</a></div><pre>Hi Marty,

I am a little lost as to how to try to debug this issue. The error appears to be with condor which I assume is part of the glidein payload? I also see a few osg glideins that appear to have started jobs. At least I think&#58;

/cvmfs/ams.cern.ch/Offline/AMSDataDir/DataManagement/exe/linux/gbatch-orbit.exe.v5.01.0.B1091.g4

is a user job? Right now there are 10 jobs running, one for more than 3.5 hours.

root&#62; qstat -s r | grep osg
7181445 54.93281 bl_1d8ae32 osg          r     01/12/2017 12&#58;01&#58;16 lnxfarm@....     8
7181843 25.63594 bl_f044bff osg          r     01/12/2017 15&#58;01&#58;16 lnxfarm@....     8
7181844 25.63594 bl_3c52f0d osg          r     01/12/2017 15&#58;01&#58;16 lnxfarm@....     8
7181845 25.63594 bl_6fced39 osg          r     01/12/2017 15&#58;01&#58;16 lnxfarm@....     8
7181846 25.63594 bl_387683c osg          r     01/12/2017 15&#58;01&#58;16 lnxfarm@....     8
7181847 25.63594 bl_bc724b2 osg          r     01/12/2017 15&#58;01&#58;16 lnxfarm@....     8
7181848 25.63594 bl_16c7cfb osg          r     01/12/2017 15&#58;01&#58;16 lnxfarm@....     8
7181850 25.63594 bl_8e8d140 osg          r     01/12/2017 15&#58;01&#58;16 lnxfarm@....     8
7181857 25.63594 bl_4ba58a9 osg          r     01/12/2017 15&#58;01&#58;16 lnxfarm@....     8
7181860 25.63594 bl_266a55d osg          r     01/12/2017 15&#58;01&#58;31 lnxfarm@....     8

Perhaps the problem is specific to one or more hosts? Do you have the worker node names for the failed jobs? Am I really seeing running jobs?

Thank you for your help,
doug

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=johnsond/CN=655679/CN=Douglas Johnson</pre></div><div class='update_description'><i onclick="document.location='32147#1484250636'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-12T19:50:36+00:00">Jan 12, 2017 07:50 PM UTC</time><a class="anchor" name="1484250636">&nbsp;</a></div><pre>Doug,

OSG glideins are now successfully submitted to your site. However, they fail to startup up properly. They&#39;re experiencing some sort of segfualt [1]. Can you see if there&#39;s anything you can find on your end about this?

Marty Kandes
UCSD Glidein Factory Operations

[1]

Stack dump for process 2253 at timestamp 1484247671 (20 frames)
/sge-batch/glide_LujiYp/main/condor/lib/libcondor_utils_8_4_6.so(dprintf_dump_stack+0x12d)[0x2b5560b0bced]
/sge-batch/glide_LujiYp/main/condor/lib/libcondor_utils_8_4_6.so(+0x162542)[0x2b5560b29542]
/lib64/libpthread.so.0[0x3fe900f7e0]
/sge-batch/glide_LujiYp/main/condor/lib/libcondor_utils_8_4_6.so(_ZN16ProcFamilyClient13signal_familyEi21proc_family_command_tRb+0x33)[0x2b5560c82f83]
/sge-batch/glide_LujiYp/main/condor/lib/libcondor_utils_8_4_6.so(_ZN15ProcFamilyProxy11kill_familyEi+0x3f)[0x2b5560b6654f]
/sge-batch/glide_LujiYp/main/condor/lib/libcondor_utils_8_4_6.so(_ZN10DaemonCore11Kill_FamilyEi+0x16)[0x2b5560c51b16]
/sge-batch/glide_LujiYp/main/condor/sbin/condor_master(_ZN6daemon10KillFamilyEv+0x1f)[0x40a40f]
/sge-batch/glide_LujiYp/main/condor/sbin/condor_master(_ZN6daemon8HardKillEv+0x53)[0x40a483]
/sge-batch/glide_LujiYp/main/condor/sbin/condor_master(_ZN7Daemons18HardKillAllDaemonsEv+0x59)[0x40bc09]
/sge-batch/glide_LujiYp/main/condor/sbin/condor_master(DoCleanup+0x46)[0x4115f6]
/sge-batch/glide_LujiYp/main/condor/lib/libcondor_utils_8_4_6.so(_EXCEPT_+0x11e)[0x2b5560b5a95e]
/sge-batch/glide_LujiYp/main/condor/lib/libcondor_utils_8_4_6.so(_ZN15ProcFamilyProxy24recover_from_procd_errorEv+0x1bb)[0x2b5560b6635b]
/sge-batch/glide_LujiYp/main/condor/lib/libcondor_utils_8_4_6.so(_ZN15ProcFamilyProxy12procd_reaperEii+0x4c)[0x2b5560b663ec]
/sge-batch/glide_LujiYp/main/condor/lib/libcondor_utils_8_4_6.so(_ZN10DaemonCore10CallReaperEiPKcii+0x195)[0x2b5560c55795]
/sge-batch/glide_LujiYp/main/condor/lib/libcondor_utils_8_4_6.so(_ZN10DaemonCore17HandleProcessExitEii+0x2e9)[0x2b5560c5d8b9]
/sge-batch/glide_LujiYp/main/condor/lib/libcondor_utils_8_4_6.so(_ZN10DaemonCore24HandleDC_SERVICEWAITPIDSEi+0x7e)[0x2b5560c5dabe]
/sge-batch/glide_LujiYp/main/condor/lib/libcondor_utils_8_4_6.so(_ZN10DaemonCore6DriverEv+0x823)[0x2b5560c61d23]
/sge-batch/glide_LujiYp/main/condor/lib/libcondor_utils_8_4_6.so(_Z7dc_mainiPPc+0x1799)[0x2b5560c79ff9]
/lib64/libc.so.6(__libc_start_main+0xfd)[0x3fe841ed1d]
/sge-batch/glide_LujiYp/main/condor/sbin/condor_master[0x4090e9]
/sge-batch/glide_LujiYp/main/condor_startup.sh&#58; line 978&#58;  2253 Segmentation fault      $CONDOR_DIR/sbin/condor_master -f -pidfile $PWD/condor_master2.pid
ls&#58; cannot access log&#58; No such file or directory
/sge-batch/glide_LujiYp/main/condor_startup.sh&#58; line 1141&#58; /sge-batch/glide_LujiYp/main/error_gen.sh&#58; No such file or directory
/nfs/gridusers/htcondor/4394/0/cluster224394.proc0.subproc0/glidein_startup.sh&#58; line 1758&#58; /sge-batch/glide_LujiYp/main/error_augment.sh&#58; No such file or directory
/nfs/gridusers/htcondor/4394/0/cluster224394.proc0.subproc0/glidein_startup.sh&#58; line 1759&#58; /sge-batch/glide_LujiYp/main/error_augment.sh&#58; No such file or directory
<div id='show_580545884' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_580545884'>Thu Jan 12 12&#58;01&#58;11 MST 2017 Error running &#39;condor_startup.sh&#39;
=== Exit messages left by periodic scripts ===
cat&#58; exit_message&#58; No such file or directory

grep&#58; /sge-batch/glide_LujiYp/glidein_config&#58; No such file or directory
grep&#58; /sge-batch/glide_LujiYp/glidein_config&#58; No such file or directory
grep&#58; /sge-batch/glide_LujiYp/glidein_config&#58; No such file or directory
egrep&#58; /sge-batch/glide_LujiYp/glidein_config&#58; No such file or directory
mv&#58; cannot stat &#96;/sge-batch/glide_LujiYp/glidein_config&#39;&#58; No such file or directory
Thu Jan 12 12&#58;01&#58;11 MST 2017 Error renaming /sge-batch/glide_LujiYp/glidein_config into /sge-batch/glide_LujiYp/glidein_config.old

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049
</div><script type='text/javascript'>
        $('#show_580545884').click(function() {
            $('#detail_580545884').slideDown("normal");
            $('#show_580545884').hide();
            $('#hide_580545884').show();
        });
        $('#hide_580545884').click(function() {
            $('#detail_580545884').slideUp();
            $('#hide_580545884').hide();
            $('#show_580545884').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='32147#1484184053'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-12T01:20:53+00:00">Jan 12, 2017 01:20 AM UTC</time><a class="anchor" name="1484184053">&nbsp;</a></div><pre>Doug,

We had not enabled OSGVO in the GLIDEIN_Supported_VOs list in the factory configuration. This parameter lets the VO frontend know they can request glideins at your site. Now that it is enable, you should begin seeing OSG glideins land at your site. We&#39;ll check back tomorrow to see if OSG glidein submission has begun and is proceeding successfully.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='32147#1484153371'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-11T16:49:31+00:00">Jan 11, 2017 04:49 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1484153371">&nbsp;</a></div><pre>Hello Glidein Factory Support,

Could you please review this issue and provide Brian with any logs that may be helpful?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='32147#1483999014'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-09T21:56:54+00:00">Jan 9, 2017 09:56 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1483999014">&nbsp;</a></div><pre>Adding Glidein Factory Support because we&#39;ll need to look at the glidein logs to see why glideins are exiting.</pre></div><div class='update_description'><i onclick="document.location='32147#1483996151'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-09T21:09:11+00:00">Jan 9, 2017 09:09 PM UTC</time> by <b>douglas.johnson@....</b><a class="anchor" name="1483996151">&nbsp;</a></div><pre>Greetings,

My apologies, this slipped through the cracks.

I believe that the pilots land on site, start on the worker node and then
exit after a few minutes. They are all 8 core jobs. I assume that they are
not matching/receiving jobs to start.

Thank you,
doug

On Mon, Jan 9, 2017 at 1&#58;40 PM, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='32147#1483994441'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-09T20:40:41+00:00">Jan 9, 2017 08:40 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1483994441">&nbsp;</a></div><pre>Hi Doug,

Have you had time to review Brian&#39;s last post?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='32147#1483649072'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-05T20:44:32+00:00">Jan 5, 2017 08:44 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1483649072">&nbsp;</a></div><pre>Doug,

When you say pilots land at your site, do you mean they get submitted to your CE and remain idle? Or do they get submitted to your backend (SGE, iirc?) start running but fail immediately? If it&#39;s the latter we&#39;ll have to rope in factory ops to see if we can get pilot logs.

Thanks,
Brian</pre></div><div class='update_description'><i onclick="document.location='32147#1483648365'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-01-05T20:32:45+00:00">Jan 5, 2017 08:32 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1483648365">&nbsp;</a></div><pre>Hi Brian,

I know you just got back from vacation but could you update this once you get caught up?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='32147#1482428921'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-22T17:48:41+00:00">Dec 22, 2016 05:48 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1482428921">&nbsp;</a></div><pre>Doug,

Our HTCondor-CE expert (Brian Lin) is already on vacation and will be back on Wednesday, January 4th. As I am not sure whether you have a supported-VOs issue or a job router issue, I think it would be best to wait for his return and get some clear advice then.

Tim</pre></div><div class='update_description'><i onclick="document.location='32147#1482177483'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-19T19:58:03+00:00">Dec 19, 2016 07:58 PM UTC</time><a class="anchor" name="1482177483">&nbsp;</a></div><pre>Greetings,

How did you enable the OSG VO?

I added the user account osg and changed the value of allowed_vos to&#58;

allowed_vos = osg, cms

I have attached two osg-system-profiler files&#58;

osg-profile-UColorado_HEP.log - This is from the HTCondorCE
osg-profile-UColorado_HEP-WN.log  - This is from a worker node.

As far as I can tell, the pilot jobs lands on our site and then does not match any work flows. After a few minutes the pilot exits and I am not left with a log file. A log file from the pilot would be very useful.

I would also add that we are able (and have been able for almost 10 years) to run CMS jobs.

Thank you for any help,
doug

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=johnsond/CN=655679/CN=Douglas Johnson</pre></div><div class='update_description'><i onclick="document.location='32147#1482165868'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-19T16:44:28+00:00">Dec 19, 2016 04:44 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1482165868">&nbsp;</a></div><pre>Hello Doug,

I&#39;m not sure but we might need more information to understand what is happening. What kind of jobs, what process did you use to enable support for the OSG VO etc...

Also, it would be a good idea to run the osg-system-profiler on UColorado_HEP and attach osg-profile.txt to this ticket directly.

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='32147#1481836164'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-12-15T21:09:24+00:00">Dec 15, 2016 09:09 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1481836164">&nbsp;</a></div><pre>Greetings,

I recently enabled support for the OSG VO for UColorado_HEP. I have seen a few mutli-core jobs land on the site but they don&#39;t seem to be starting jobs. They run for a few minutes and then disappear. I would like to know how to debug the problem so that we can provide opportunistic resources to the OSG VO.

Thank you,
doug

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=johnsond/CN=655679/CN=Douglas Johnson</pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F32147">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>


</body>
