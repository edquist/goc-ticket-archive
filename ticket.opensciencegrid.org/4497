<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="/">
    <title>[4497] VOMS pacman -update modified apache .conf</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="//netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="//netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="https://ticket.opensciencegrid.org/images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="https://ticket.opensciencegrid.org/lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=4497" method="post">
<div class="page-header">
    <h3><span class="muted">4497</span> / VOMS pacman -update modified apache .conf</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">David Cafaro</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Followup w/SC</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2008-01-31</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=4497", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="/4497?sort=up&"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="/4497?expandall=true&">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20VOMS%20pacman%20-update%20modified%20apache%20.conf%20ISSUE%3D4497%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='4497#1201291430'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-25T20:03:50+00:00">Jan 25, 2008 08:03 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1201291430">&nbsp;</a></div><pre>Resolving.</pre></div><div class='update_description'><i onclick="document.location='4497#1201290969'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-25T19:56:09+00:00">Jan 25, 2008 07:56 PM UTC</time> by <b>VDT</b><a class="anchor" name="1201290969">&nbsp;</a></div><pre>Yes, close it. We&#39;ll improve our Apache configuration.

--
View ticket at &#60;<a href='http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3228&#62' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3228&#62</a>;
VDT Support, vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='4497#1201289293'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-25T19:28:13+00:00">Jan 25, 2008 07:28 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1201289293">&nbsp;</a></div><pre>Is there any more information on this ticket?  Can we consider it closed?  Just pinging.

OSG GOC</pre></div><div class='update_description'><i onclick="document.location='4497#1200429427'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-15T20:37:07+00:00">Jan 15, 2008 08:37 PM UTC</time> by <b>VDT</b><a class="anchor" name="1200429427">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; Nope, I had missed the part about saving the config files for apache</font>
<font color='#7F7E6F'>&#62; before hand.  That would be the root of my problem, failure to check</font>
<font color='#7F7E6F'>&#62; update documentation.  &#58;-(</font>

OK, good to know.

<font color='#7F7E6F'>&#62; Out of curiosity, why are new config files not dropped as something</font>
<font color='#7F7E6F'>&#62; like http.conf.new much like how other package managers create things</font>
<font color='#7F7E6F'>&#62; such as httpd.conf.rpmnew vs writing over the old files during</font>
<font color='#7F7E6F'>&#62; updates vs installs.  Is it a pacman limitation?</font>

Error on our part. &#58;(

Pacman is blissfully unaware of configuration files, so we handle this
sort of problem on our own. We&#39;ve missed some cases though, and it
bites us and causes us to have more complex installation directions.
Sorry about that!

-alain

--
View ticket at &#60;<a href='http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3228&#62' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3228&#62</a>;
VDT Support, vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='4497#1200361928'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-15T01:52:08+00:00">Jan 15, 2008 01:52 AM UTC</time> by <b>GUGrid</b><a class="anchor" name="1200361928">&nbsp;</a></div><pre>Nope, I had missed the part about saving the config files for apache
before hand.  That would be the root of my problem, failure to check
update documentation.  &#58;-(

Out of curiosity, why are new config files not dropped as something
like http.conf.new much like how other package managers create things
such as httpd.conf.rpmnew vs writing over the old files during
updates vs installs.  Is it a pacman limitation?

Thanks,
David

On Jan 14, 2008, at 4&#58;31 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='4497#1200346268'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-14T21:31:08+00:00">Jan 14, 2008 09:31 PM UTC</time> by <b>VDT</b><a class="anchor" name="1200346268">&nbsp;</a></div><pre><font color='#7F7E6F'>&#62; That&#39;s excellent. Looking at the latest results on VOMS Monitor, it</font>
<font color='#7F7E6F'>&#62; confirms that you&#39;re back in</font>
<font color='#7F7E6F'>&#62; business. I may push this to the VDT so that they can look at</font>
<font color='#7F7E6F'>&#62; preventing these types of issues in the future.</font>

Without seeing details of how the upgrade was done, it&#39;s very hard to
understand the particular problem here. Are any details available?

The upgrade instructions for VDT 1.8.1d describe how to preserve the
http.conf file. My guess that these directions were missed.
<a href='http&#58;//vdt.cs.wisc.edu/releases/1.8.1/release-d.html' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/releases/1.8.1/release-d.html</a>

Some of the blame rests squarely on the VDT. If people are performing
multiple updates to a single VDT installation, it can be very confusing
which directions to follow in which order. We certainly want to improve
this in the near future. (Suggestions are very welcome!)

If these directions were not missed, but were followed, then we have
some other sort of problem that I would like to understand. If they were
missed, then we have the known problem of improving our update process.

Thanks,
-alain

--
View ticket at &#60;<a href='http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3228&#62' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3228&#62</a>;
VDT Support, vdt-support@....</pre></div><div class='update_description'><i onclick="document.location='4497#1200340328'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-14T19:52:08+00:00">Jan 14, 2008 07:52 PM UTC</time> by <b>VDT</b><a class="anchor" name="1200340328">&nbsp;</a></div><pre>Greetings from the VDT support system!

This message was generated automatically in response to the creation of a
ticket regarding&#58;

RR - Open Science Grid - 4497 - 4 - VOMS pacman -update modified apache .conf  ISSUE=4497 PROJ=71

Your original request is copied below for reference.

There is no need to reply to this message right now -- someone from the VDT
team will respond to you as soon as possible.  If you wish to view your
support ticket online, visit&#58;

<a href='http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3228' target='_blank' rel='nofollow'>http&#58;//vdt.cs.wisc.edu/rt/Ticket/Display.html?user=guest&pass=guest&id=3228</a>

Your ticket has been assigned an ID as follows&#58;

[vdt-support #3228]

Please include the ticket ID in the subject line of all future email about
this issue.  To do so, you may reply to this message.

Thank you for your interest in the VDT.

-------------------------------------------------------------------------
[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='4497#1200339497'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2008-01-14T19:38:17+00:00">Jan 14, 2008 07:38 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1200339497">&nbsp;</a></div><pre></pre></div><div class='update_description'><i onclick="document.location='4497#0'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="1970-01-01T00:00:00+00:00">Jan 1, 1970 12:00 AM UTC</time> by <b>Tim Silvers&#58;</b><a class="anchor" name="0">&nbsp;</a></div><pre>David,

That&amp;#39;s excellent. Looking at the latest results on VOMS Monitor, it confirms that you&amp;#39;re
back in
business. I may push this to the VDT so that they can look at preventing these types of issues in
the
future.

Thanks,
Tim
OSG GOC



Thanks to the help of Steven Timm, I was able to get the GUGrid VO
back up on the VOMs server.

Turns out that the pacman -update I ran somehow grabbed an
apache .conf file that lacked the Tomcat JK forwarders and
configuration information.  The modules were loaded but not being used.

Added the missing lines to httpd.conf that Steven provided and back
up and running.

-David

On Jan 14, 2008, at 12&amp;#58;40 PM, Open Science Grid FootPrints wrote&amp;#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>



Currently looking into this, appears that when we updated for the new
VO certificates some how we lost our VO records in VOMS.

<div id='show_38578810' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_38578810'>-David

On Jan 14, 2008, at 11&amp;#58;13 AM, Open Science Grid FootPrints wrote&amp;#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font>



Hi GUGrid,

The GUGrid VOMS is failing to return results according to VOMS Monitor. The response is&amp;#58;

voms
search(https&amp;#58;//gugrid.arc.georgetown.edu&amp;#58;8443/voms/GUGrid/services/VOMSAdmin?method=l
istMembers)&amp;#58; Can&amp;#39;t connect to gugrid.arc.georgetown.edu&amp;#58;8443 (Timeout)

Exit with error(s) (code=64)

You may want to be sure you have the updated DOEGrids CA certificate. The expiration of the old
certificate last week (January 13th) caused problems for the VOMS service hosted at the GOC. You
can verify the expiration of this certificate by issuing the command&amp;#58;

openssl x509 -in 1c3f2ca8.0 -enddate (assuming you&amp;#39;re in /etc/grid-security/certificates)

See the following email from Burt regarding this certificate expiration...

From&amp;#58;    burt@....
Subject&amp;#58;  Old DOEGrids CA certifcate expired today
Date&amp;#58;  January 10, 2008 12&amp;#58;23&amp;#58;56 PM EST
To&amp;#58;    OSG-GENERAL@...., CMS-T2@....
Security&amp;#58;  ï¿¼Signed

Hi everyone,

The old DOEGrids CA certificate expired today.  This probably doesn&amp;#39;t affect grid sites since
the new
cert has been in the distribution for some time, but I&amp;#39;ve already heard from a few people
confused
about why their grid authenticated web browsing isn&amp;#39;t working.

If you have been having issues today with your browser, here&amp;#39;s a walkthrough for
firefox/mozilla&amp;#58;

Preferences-&#62;Privacy-&#62;Certificates-&#62;Manage Certificiates
Click Authorities Tab
Under ESnet, view the DOEGrids CA 1 certificate -- remove the one that expires on Jan 10 2008.  If
you have the newer DOEGrids cert (expires in 2013), you&amp;#39;re done. Otherwise&amp;#58;

https&amp;#58;//pki1.doegrids.org/ca/
Click Retreieval Tab
Import CA Certificate Chain

- B

Thanks,

Tim
OSG GOC
</div><script type='text/javascript'>
        $('#show_38578810').click(function() {
            $('#detail_38578810').slideDown("normal");
            $('#show_38578810').hide();
            $('#hide_38578810').show();
        });
        $('#hide_38578810').click(function() {
            $('#detail_38578810').slideUp();
            $('#hide_38578810').hide();
            $('#show_38578810').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F4497">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="/images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 4497});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
