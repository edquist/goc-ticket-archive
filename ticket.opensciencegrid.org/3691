<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[3691] SBGrid-Harvard Resource/Service Registration</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=3691" method="post">
<div class="page-header">
    <h3><span class="muted">3691</span> / SBGrid-Harvard Resource/Service Registration</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Piotr Sliz</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2007-08-22</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("https://ticket.opensciencegrid.org/attachment/list?id=3691", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="https://ticket.opensciencegrid.org/\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="https://ticket.opensciencegrid.org/\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/3691?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/3691?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20SBGrid-Harvard%20Resource%2FService%20Registration%20ISSUE%3D3691%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='3691#1187986244'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-08-24T20:10:44+00:00">Aug 24, 2007 08:10 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1187986244">&nbsp;</a></div><pre>Ian,

<a href='http&#58;//vors.grid.iu.edu/cgi-bin/index.cgi?region=0&amp' target='_blank' rel='nofollow'>http&#58;//vors.grid.iu.edu/cgi-bin/index.cgi?region=0&amp</a>;VO=0&amp;grid=4&amp;dtype=0&amp;res=331#SITELISTING

Get there by choosing ITB from the drop-down on the VORS homepage. If you&#39;re alluding to the
SBGrid VO, that a separate ticket, and doesn&#39;t pertain to this one.

Tim</pre></div><div class='update_description'><i onclick="document.location='3691#1187895907'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-08-23T19:05:07+00:00">Aug 23, 2007 07:05 PM UTC</time> by <b>ian@....</b><a class="anchor" name="1187895907">&nbsp;</a></div><pre>Hi Tim -- Sorry, but I&#39;m still not seeing SBGrid in VORS.

Thanks,
Ian

On Aug 21, 2007, at 3&#58;00 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='3691#1187722808'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-08-21T19:00:08+00:00">Aug 21, 2007 07:00 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1187722808">&nbsp;</a></div><pre>Ian,

Thanks for clarifying. You&#39;re on VORS now. When VORS updates here in the next couple hours or so
you&#39;ll see the results of the latest scan. The manual scan I ran verifies that you&#39;re passing site_verify.
This registration is complete. Ticket closed.

Thank you,
Tim
OSG Grid Operations Center</pre></div><div class='update_description'><i onclick="document.location='3691#1187710147'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-08-21T15:29:07+00:00">Aug 21, 2007 03:29 PM UTC</time> by <b>ian@....</b><a class="anchor" name="1187710147">&nbsp;</a></div><pre>Hi Tim,

Correct - our VO is &#34;SBGrid&#34;, but this CE in particular should be
called &#34;SBGrid-Harvard&#34;. We currently don&#39;t have an SE installed, so
for now that should be removed. Our FQDN for this CE is now
hpc.sbgrid.org.

Regarding authentication failures, can you please try again and let
me know if it&#39;s still a problem?

Best regards,
Ian

On Aug 15, 2007, at 12&#58;48 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='3691#1187203209'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-08-15T18:40:09+00:00">Aug 15, 2007 06:40 PM UTC</time> by <b>Piotr Sliz</b><a class="anchor" name="1187203209">&nbsp;</a></div><pre>Tim,

Ian is away this week, and it will be better if I discuss with him
before we change anything now. We will get back to you on Monday or
Tuesday next week.

Kind regards,

Piotr
On Aug 15, 2007, at 12&#58;48 PM, Open Science Grid FootPrints wrote&#58;

[Duplicate message snipped]</pre></div><div class='update_description'><i onclick="document.location='3691#1187196499'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-08-15T16:48:19+00:00">Aug 15, 2007 04:48 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1187196499">&nbsp;</a></div><pre>Hi Piotr,

Just to be clear, you want the SBGrid_CA registration changed to SBGrid-Harvard and you wanted the
SBGrid_SE registration (which is identical to SBGrid_CA) removed, correct? And you mentioned that
you may be changing the FQDN. Did that occur? If so, we&#39;ll need that before processing the
registration. Also, the site_verify is failing on the authentication. You need to support the MIS VO and
the GridScan DN, /DC=org/DC=doegrids/OU=People/CN=John Rosheck (GridScan) 474533 Let us
know if you have any questions.

Tim</pre></div><div class='update_description'><i onclick="document.location='3691#1185569761'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-07-27T20:56:01+00:00">Jul 27, 2007 08:56 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1185569761">&nbsp;</a></div><pre>Removing John Rosheck from this ticket. Adding another GOC engineer from RR.</pre></div><div class='update_description'><i onclick="document.location='3691#1185018247'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-07-21T11:44:07+00:00">Jul 21, 2007 11:44 AM UTC</time> by <b>ian@....</b><a class="anchor" name="1185018247">&nbsp;</a></div><pre>Hi Tim,

Sorry for the delayed response, as I was traveling in Sweden for the
past two weeks.

Our new host certs have indeed been installed. The only other thing
we have to do is complete the VOMS setup. I&#39;ll then create accounts
for the different sites which should get the tests to pass.

I&#39;ll send a new email to the GOC for VOMS support.

Thanks,
Ian

On Jul 18, 2007, at 1&#58;03 PM, Open Science Grid FootPrints wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='3691#1184179443'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-07-11T18:44:03+00:00">Jul 11, 2007 06:44 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1184179443">&nbsp;</a></div><pre>Ian,

Do you have an update on this for us?

Thank You,
Tim Silvers
OSG Grid Operations Center
goc@...., 317-278-9699
web&#58; <a href='http&#58;//www.opensciencegrid.org' target='_blank' rel='nofollow'>http&#58;//www.opensciencegrid.org</a>
rss&#58;Â <a href='http&#58;//www.grid.iu.edu/news/' target='_blank' rel='nofollow'>http&#58;//www.grid.iu.edu/news/</a>

From&#58; ian@....
Subject&#58; Re&#58; SBGrid
Date&#58; June 29, 2007 12&#58;29&#58;26 PM EDT
To&#58; tsilver@....

Hi Tim,

I&#39;m trying to authenticate (globusrun -a -r hpc.sbgrid.org) to the resource with the GridScan proxy.
I&#39;ve also tried with my personal proxy.

Ah, it turns out that we changed the FQDN of the server after doing the initial installation, which
broke globus. We&#39;re reinstalling and re-requesting a host cert. Once that&#39;s done, I&#39;ll get in touch for
a new round of tests.

Thanks!
Ian</pre></div><div class='update_description'><i onclick="document.location='3691#1183137520'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-06-29T17:18:40+00:00">Jun 29, 2007 05:18 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1183137520">&nbsp;</a></div><pre>From&#58; 	  ian@....
Subject&#58; 	Re&#58; SBGrid
Date&#58; 	June 29, 2007 12&#58;29&#58;26 PM EDT
To&#58; 	  tsilver@....

Hi Tim,

I&#39;m trying to authenticate (globusrun -a -r hpc.sbgrid.org) to the resource with the GridScan proxy.
I&#39;ve also tried with my personal proxy.

Ah, it turns out that we changed the FQDN of the server after doing the initial installation, which
broke globus. We&#39;re reinstalling and re-requesting a host cert. Once that&#39;s done, I&#39;ll get in touch for
a new round of tests.

Thanks!
Ian</pre></div><div class='update_description'><i onclick="document.location='3691#1182976532'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-06-27T20:35:32+00:00">Jun 27, 2007 08:35 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1182976532">&nbsp;</a></div><pre>From&#58; 	  sliz@....
Subject&#58; 	Re&#58; SBGrid
Date&#58; 	June 27, 2007 4&#58;22&#58;11 PM EDT
To&#58; 	  tsilver@....
Cc&#58; 	  jrosheck@...., rquick@...., kagross@...., ian@....

Tim,

The short name for this site should be SBGrid-Harvard. Please keep just the CE registered. Ian
Levesque should be able to answer further questions.</pre></div><div class='update_description'><i onclick="document.location='3691#1182965278'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-06-27T17:27:58+00:00">Jun 27, 2007 05:27 PM UTC</time> by <b>Tim Silvers</b><a class="anchor" name="1182965278">&nbsp;</a></div><pre>Piotr,

I just ran site_verify and the site fails authentication. You registered the two new SBGrid Resource.
If you&#39;re SE and CE are the same gatekeeper, you don&#39;t need to submit two registrations. Also, the
short names should not contain spaces. We suggest using dashes or underscores instead. So let me
know what you&#39;d prefer and notify us of which of the registrations you&#39;d like us to drop since you
don&#39;t need to register the same gatekeeper twice.

Thanks,

Tim

From&#58; 	  sliz@....
Subject&#58; 	Re&#58; SBGrid
Date&#58; 	June 27, 2007 9&#58;32&#58;36 AM EDT
To&#58; 	  tsilver@....

Tim,

Is it possible to schedule the site_verify test before Monday?

p

On Jun 27, 2007, at 8&#58;38 AM, Tim Silvers wrote&#58;

Hi Piotr,

I saw those new registrations. We&#39;ll review them at the next Operations Meeting and get them
added to monitoring once they pass the site_verify testing. A CE is what we often call a site or
resource. Let us know if you have any further questions.

Tim

On Jun 26, 2007, at 7&#58;14 PM, Piotr Sliz wrote&#58;

<div id='show_1991873293' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_1991873293'>Hi Tim,

Actually after further discussion we decided to keep our VO name as SBGrid. Instead we will name
our major OSG site at Harvard as SBGrid-Harvard.

BTW, we just completed registration forms for our first CE and storage element. Is a CE the same
thing as an OSG site?

Thanks,

Piotr
</div><script type='text/javascript'>
        $('#show_1991873293').click(function() {
            $('#detail_1991873293').slideDown("normal");
            $('#show_1991873293').hide();
            $('#hide_1991873293').show();
        });
        $('#hide_1991873293').click(function() {
            $('#detail_1991873293').slideUp();
            $('#hide_1991873293').hide();
            $('#show_1991873293').show();
        });
        </script></pre></div><div class='update_description'><i onclick="document.location='3691#1182897074'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2007-06-26T22:31:14+00:00">Jun 26, 2007 10:31 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1182897074">&nbsp;</a></div><pre>Resource Short Name SBGrid CA
Resource URL&#58; <a href='http&#58;//hpc.sbgrid.org' target='_blank' rel='nofollow'>http&#58;//hpc.sbgrid.org</a>
Resource DNS&#58; hpc.sbgrid.org

Grid Catalog&#58; OSG-ITB
Resource Type&#58; CE
Security Contact Name&#58; Ian Levesque
Email&#58; osgadmin@....
Phone&#58; 6176209916

Support Center Name&#58; SBGrid

Type&#58; Resource/Service Provider

Submitter Name&#58; Ian Levesque
Submitter Email&#58; osgadmin@....
Date&#58; 2007-06-26</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F3691">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 3691});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
