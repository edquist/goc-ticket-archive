<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[33908] UKI-NORTHGRID-MAN-HEP ---User Icecube glideins failing due to proxy shortening</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=33908" method="post">
<div class="page-header">
    <h3><span class="muted">33908</span> / UKI-NORTHGRID-MAN-HEP ---User Icecube glideins failing due to proxy shortening</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">VAIBHAV GUPTA</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">VAIBHAV GUPTA</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2017-05-25</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">GGUS (Prod)&nbsp;<a target="_blank" href="https://ggus.eu/ws/ticket_info.php?ticket=128453">128453</a> <span class="muted"> / Ticket Exchange</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/33908", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/33908?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/33908?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20UKI-NORTHGRID-MAN-HEP%20---User%20Icecube%20glideins%20failing%20due%20to%20proxy%20shortening%20ISSUE%3D33908%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='33908#1496966378'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-06-08T23:59:38+00:00">Jun 8, 2017 11:59 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1496966378">&nbsp;</a></div><pre>This ticket was closed automatically. If this issue has not been resolved according your expectations or if you need further information, please submit a new ticket referencing this one.&#13;

-- by GGUS SYSTEM at Thu Jun 08 23&#58;59&#58;00 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=128453' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=128453</a></pre></div><div class='update_description'><i onclick="document.location='33908#1495655694'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-24T19:54:54+00:00">May 24, 2017 07:54 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1495655694">&nbsp;</a></div><pre>Problem on client side and solved.

-- by Alessandra.Forti at Wed May 24 19&#58;54&#58;37 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=128453' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=128453</a></pre></div><div class='update_description'><i onclick="document.location='33908#1495649955'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-24T18:19:15+00:00">May 24, 2017 06:19 PM UTC</time><a class="anchor" name="1495649955">&nbsp;</a></div><pre>Hi Robert, Alessandra,

I had a discussion with Jaime Frey from the HTCondor team, he develops HTCondor-G which we use to submit to sites. My apologies, I thought the CREAM source code Brian cited was on the CE side, but the proxies are in fact being shortened on our client side as Robert points out.

In the end Icecube pilots were having issues transitioning to a new DN and that was the actual cause. Now their proxies are fixed and we&#39;ve ensured they always have &#62; 12h on the VOMS extension lifetime.

Unless you have anything else to add we&#39;ll close this ticket.

Thanks,
Jeff Dost
OSG Glidein Factory Operations

p.s. Condolences on the horrendous attack at Manchester &#58;(

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='33908#1495544014'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-23T12:53:34+00:00">May 23, 2017 12:53 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1495544014">&nbsp;</a></div><pre>I&#39;ve had a look at one of the icecube pilot proxies on ce03 and the lifetime of the proxy certificate is shortened during the delegation to the CE. This shortened certificate is generated on the client side, so Brian&#39;s suggestion to use a longer VOMS AC lifetime is probably the only solution to the problem.

Cheers,
Robert

[GOC-TX Warning]
Source GGUS Ticket ID&#58; 128453 specifies affected site name of  UKI-NORTHGRID-MAN-HEP which does not exist in OIM(resource/name) and it is ignored.
-- by Robert Frank at Tue May 23 12&#58;52&#58;31 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=128453' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=128453</a></pre></div><div class='update_description'><i onclick="document.location='33908#1495493784'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-22T22:56:24+00:00">May 22, 2017 10:56 PM UTC</time><a class="anchor" name="1495493784">&nbsp;</a></div><pre>To be clear I&#39;m not talking about user job proxies I&#39;m talking about pilot proxies.

On pilot submission to CREAM CEs CREAM has to copy the pilot proxy to the WN, but in the process it will shorten the lifetime of copied proxy.  I am sure I&#39;ve seen site admins claim they can raise this limit but I can&#39;t find an old ticket relating to it. The best I can find an email response from Brian Bockleman [1] relating to running NOVA glideins at JINR where I guess the workaround is to increase the voms extension lifetime.

If you&#39;re unable to find the setting from your CE side I can try suggesting to the Icecube admins to increase their voms lifetime as a workaround.

Thanks,
Jeff Dost
OSG Glidein Factory Operations

[1]
&#34;Hi Neha,

I can confirm it appears that the CREAM C client (which is what HTCondor-G uses) will set the expiration time of the requested delegation to the expiration time of the VOMS extension or proxy, whichever is shorter&#58;

<a href='https&#58;//github.com/italiangrid/cream-client-api-c/blob/a946a400bd0689cef1515de8ebaf010483249a96/src/VOMSWrapper.cpp#L237' target='_blank' rel='nofollow'>https&#58;//github.com/italiangrid/cream-client-api-c/blob/a946a400bd0689cef1515de8ebaf010483249a96/src/VOMSWrapper.cpp#L237</a>
<a href='https&#58;//github.com/italiangrid/cream-client-api-c/blob/a946a400bd0689cef1515de8ebaf010483249a96/src/CreamProxy_Delegate.cpp#L104' target='_blank' rel='nofollow'>https&#58;//github.com/italiangrid/cream-client-api-c/blob/a946a400bd0689cef1515de8ebaf010483249a96/src/CreamProxy_Delegate.cpp#L104</a>

Youâ€™re going to have to make the VOMS extension longer-lived.

Brian&#34;

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='33908#1495485948'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-22T20:45:48+00:00">May 22, 2017 08:45 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1495485948">&nbsp;</a></div><pre>i&#39;ve never known of anything at sites that can change the lifetime of the proxy. It would also mean that for each job the site knows where the proxies are which is not the case without the administrator explicitely looking for it in the job directory tree. Are you sure your setup renews the proxies with myproxy on the WNs when necessary? In other WMS it&#39;s the job of the pilot to do that.

[GOC-TX Warning]
Source GGUS Ticket ID&#58; 128453 specifies affected site name of  UKI-NORTHGRID-MAN-HEP which does not exist in OIM(resource/name) and it is ignored.
-- by Alessandra.Forti at Mon May 22 20&#58;44&#58;43 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=128453' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=128453</a></pre></div><div class='update_description'><i onclick="document.location='33908#1495484195'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-22T20:16:35+00:00">May 22, 2017 08:16 PM UTC</time><a class="anchor" name="1495484195">&nbsp;</a></div><pre>Hello Alessandra,

The proxy timeout Vaibhav described is the grid proxy lifetime (first timeout), not the voms lifetime (in the vo extension), the glidein pilots aren&#39;t looking at the voms lifetime on this check.

So something is in fact shortening the proxy on delegation. We have seen this before at sites with CREAM CEs, the pilot comes in at a site with a given lifetime &#62;12h and somehow when the job sent to the workernode the system shortens the pilot proxy lifetime to 12h.  There should be a way to configure this default on the site side.

It is a little odd the Icecube proxies have 700h lifetimes, but at Manchester our entry limits pilots to run for 72 hours.  Is that not your site policy? Our pilots in fact do renew their lifetime (myproxy calls are handled in condor-g).  However the shortening on the site side is causing pilots to become invalid unexpectedly too soon before a renew can happen (most VOs renew at least once every 24h).

Thanks,
Jeff Dost
OSG Glidein Factory Operations

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='33908#1495482822'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-22T19:53:42+00:00">May 22, 2017 07:53 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1495482822">&nbsp;</a></div><pre>[GOC-TX Warning]
Source GGUS Ticket ID&#58; 128453 specifies affected site name of  UKI-NORTHGRID-MAN-HEP which does not exist in OIM(resource/name) and it is ignored.
-- by Alessandra.Forti at Mon May 22 19&#58;53&#58;20 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=128453' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=128453</a></pre></div><div class='update_description'><i onclick="document.location='33908#1495482702'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-22T19:51:42+00:00">May 22, 2017 07:51 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1495482702">&nbsp;</a></div><pre>I&#39;m afraid the site cannot change the time left in the proxy. It&#39;s the VOMS server that sets the policy for the life time of the proxies.

You will notice that while the main part of the proxy is 700 hours the VOMS roles at the bottom have still only ~20h of timeleft. I think DESY allows 24h as a policy. Nobody will allow you to generate a full proxy that lasts 700h it is a security risk. there are ways of renewing the proxy on the WNs using a sevice called myproxy. You need to talk with the people doing the glidein wms support to set it up

cheers
alessandra

[GOC-TX Warning]
Source GGUS Ticket ID&#58; 128453 specifies affected site name of  UKI-NORTHGRID-MAN-HEP which does not exist in OIM(resource/name) and it is ignored.
-- by Alessandra.Forti at Mon May 22 19&#58;51&#58;26 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=128453' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=128453</a></pre></div><div class='update_description'><i onclick="document.location='33908#1495481621'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-22T19:33:41+00:00">May 22, 2017 07:33 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1495481621">&nbsp;</a></div><pre>[GOC-TX Warning]
Source GGUS Ticket ID&#58; 128453 specifies affected site name of  UKI-NORTHGRID-MAN-HEP which does not exist in OIM(resource/name) and it is ignored.
-- by Jan Prochazka at Mon May 22 19&#58;32&#58;33 UTC 2017

GOCTX Source&#58; <a href='https&#58;//ggus.eu/ws/ticket_info.php?ticket=128453' target='_blank' rel='nofollow'>https&#58;//ggus.eu/ws/ticket_info.php?ticket=128453</a></pre></div><div class='update_description'><i onclick="document.location='33908#1495480147'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-22T19:09:07+00:00">May 22, 2017 07:09 PM UTC</time><a class="anchor" name="1495480147">&nbsp;</a></div><pre>Ticket forwarded to GGUS

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=VAIBHAV GUPTA 4273</pre></div><div class='update_description'><i onclick="document.location='33908#1495480111'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2017-05-22T19:08:31+00:00">May 22, 2017 07:08 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1495480111">&nbsp;</a></div><pre>Hello,
Please forward this to UKI-NORTHGRID-MAN-HEP in GGUS.

We are observing since, atleast this past year (July 2016) , that the glideindws have been failing due to the following proxy timeout error

=== Validation error in /scratch/7468103.ce03.tier2.hep.manchester.ac.uk/glide_Xde9Qo/main/check_proxy.sh ===
Sun May 21 18&#58;38&#58;01 BST 2017 Error running &#39;/scratch/7468103.ce03.tier2.hep.manchester.ac.uk/glide_Xde9Qo/main/check_proxy.sh&#39;
Proxy not valid in in 12 hours, only 8529 seconds left!
Proxy shorter than 12 hours are not allowed.

This seems like a policy issue at your site. We think that one the proxy are being delegated to worker notes , your batch systems has been shortening the lifetime of the proxies.
We think this can be changed in your configurations.
for example the proxies we use (below) have &#62;700 hours left on them ....

subject   &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=pilot/glidein2.chtc.wisc.edu/CN=1819635304
issuer    &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=pilot/glidein2.chtc.wisc.edu
identity  &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=pilot/glidein2.chtc.wisc.edu
type      &#58; RFC compliant proxy
strength  &#58; 1024 bits
path      &#58; /var/lib/gwms-factory/client-proxies/user_feglow/glidein_gfactory_instance/credential_chtc2.IceCube_878776
timeleft  &#58; 784&#58;53&#58;56
key usage &#58; Digital Signature, Key Encipherment, Data Encipherment
=== VO icecube extension information ===
VO        &#58; icecube
subject   &#58; /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=Services/CN=pilot/glidein2.chtc.wisc.edu
issuer    &#58; /C=DE/O=GermanGrid/OU=DESY/CN=host/grid-voms.desy.de
attribute &#58; /icecube/Role=pilot/Capability=NULL
attribute &#58; /icecube/Role=NULL/Capability=NULL
timeleft  &#58; 19&#58;55&#58;00
uri       &#58; grid-voms.desy.de&#58;15109

Kindly please look into this.

Regards,
VG
<div id='show_2003850122' class=''><button class="btn">Show More</button></div><div class='detail hidden' id='detail_2003850122'>OSG Factory OPS
UCSD

by /DC=org/DC=opensciencegrid/O=Open Science Grid/OU=People/CN=VAIBHAV GUPTA 4273
</div><script type='text/javascript'>
        $('#show_2003850122').click(function() {
            $('#detail_2003850122').slideDown("normal");
            $('#show_2003850122').hide();
            $('#hide_2003850122').show();
        });
        $('#hide_2003850122').click(function() {
            $('#detail_2003850122').slideUp();
            $('#hide_2003850122').hide();
            $('#show_2003850122').show();
        });
        </script></pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F33908">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 33908});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
