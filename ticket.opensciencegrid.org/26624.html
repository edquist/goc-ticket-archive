<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[26624] enable GPUS for GLOW VO</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=26624" method="post">
<div class="page-header">
    <h3><span class="muted">26624</span> / enable GPUS for GLOW VO</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Nathan Yehle</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Associated VO</label><div class="controls">GLOW</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Nathan Yehle</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">GLOW-TECH</div></div><div class="control-group"><label class="control-label">Ticket Links</label><div class="controls"></div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">ENG Action</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2016-03-28</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">Kyle Gross <span class="muted"> / OSG GOC Support Team</span></div><div class="assignee" style="width: 60%">OSG Glidein Factory Support <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">GLOW-TECH <span class="muted"> / OSG Support Centers</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/26624", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src=\""+this.thumbnail_url+"\"/></td>";
            html += "<td><a href=\""+this.url+"\" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='26624#1459389960'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-31T02:06:00+00:00">Mar 31, 2016 02:06 AM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1459389960">&nbsp;</a></div><pre>I am going to close this ticket as it seems that this has worked fine.  Please open a new ticket if more is needed.

-Kyle</pre></div><div class='update_description'><i onclick="document.location='26624#1458672595'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-22T18:49:55+00:00">Mar 22, 2016 06:49 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1458672595">&nbsp;</a></div><pre>David,

How did that go?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='26624#1458319908'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-18T16:51:48+00:00">Mar 18, 2016 04:51 PM UTC</time><a class="anchor" name="1458319908">&nbsp;</a></div><pre>I submitted a few on osgconnect.  So far so good, one job per gpu.

David

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=David Schultz 1534</pre></div><div class='update_description'><i onclick="document.location='26624#1458317919'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-18T16:18:39+00:00">Mar 18, 2016 04:18 PM UTC</time><a class="anchor" name="1458317919">&nbsp;</a></div><pre>Gonzalo/David,

On xd-login or osg-connect, please submit a GPU job withe following in the submit file&#58;

request_gpus = 1

And let us know if that works with your GPU code.

Thanks,
Mats

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mats Rynge 45</pre></div><div class='update_description'><i onclick="document.location='26624#1458316990'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-18T16:03:10+00:00">Mar 18, 2016 04:03 PM UTC</time> by <b>dweitzel@....</b><a class="anchor" name="1458316990">&nbsp;</a></div><pre>Can we ask IceCube to test GPU jobs on the osg-connect?

-Derek

<font color='#7F7E6F'>&#62; On Mar 18, 2016, at 10&#58;57 AM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='26624#1458316656'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-18T15:57:36+00:00">Mar 18, 2016 03:57 PM UTC</time><a class="anchor" name="1458316656">&nbsp;</a></div><pre>Test looks good from looking at the env, but I don&#39;t have a good GPU code to test with. The real test will be IceCube.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mats Rynge 45</pre></div><div class='update_description'><i onclick="document.location='26624#1458242392'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-17T19:19:52+00:00">Mar 17, 2016 07:19 PM UTC</time><a class="anchor" name="1458242392">&nbsp;</a></div><pre>Ok, my tests were successful.  I&#39;m waiting on Mats to test on the OSG frontend.  Then we can send the configuration to the GLOW frontend.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Derek Weitzel 605</pre></div><div class='update_description'><i onclick="document.location='26624#1458143489'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-16T15:51:29+00:00">Mar 16, 2016 03:51 PM UTC</time><a class="anchor" name="1458143489">&nbsp;</a></div><pre>Right, but just for this only entry.  It doesn&#39;t hurt if you are doubly defining it, the important thing is fixed will break when gpus doesn&#39;t match the number of regular cores on a pilot, if I understood the GLIDEIN_Resource_Slots part of the gwms manual correctly&#58;

<a href='http&#58;//glideinwms.fnal.gov/doc.prd/factory/custom_vars.html' target='_blank' rel='nofollow'>http&#58;//glideinwms.fnal.gov/doc.prd/factory/custom_vars.html</a>

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='26624#1458143293'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-16T15:48:13+00:00">Mar 16, 2016 03:48 PM UTC</time><a class="anchor" name="1458143293">&nbsp;</a></div><pre>So we don&#39;t need the line&#58;
&#60;attr name=&#34;SLOTS_LAYOUT&#34; value=&#34;partitionable&#34; parameter=&#34;False&#34; glidein_publish=&#34;True&#34; job_publish=&#34;True&#34; type=&#34;string&#34;/&#62;

?

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Derek Weitzel 605</pre></div><div class='update_description'><i onclick="document.location='26624#1458143234'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-16T15:47:14+00:00">Mar 16, 2016 03:47 PM UTC</time><a class="anchor" name="1458143234">&nbsp;</a></div><pre>Just a heads up after the patch there was some missing config on the factory side.

The current Nebraska entry HCC_US_Omaha_crane_gpu had to be changed to use partitionable slot layout by default and now has the new gwms attribute
GLIDEIN_Resource_Slots &#34;GPUs,1,type=main&#34;

What this should do is just add the gpu resource to the main partitionable glidein, then users can carve it out using request_gpus.

Just a heads up for any VOs who are ready to test (before I find you at the AHM).

Jeff

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=jdost/CN=732648/CN=Jeffrey Michael Dost</pre></div><div class='update_description'><i onclick="document.location='26624#1457674510'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-11T05:35:10+00:00">Mar 11, 2016 05:35 AM UTC</time> by <b>gonzalo.merino@....</b><a class="anchor" name="1457674510">&nbsp;</a></div><pre>Hello,

FYI, we in Icecube should be regularly submitting GPU jobs that get to UNL,
probably both via the GLOW VO and OSGconnect. If someone at UNL can have a
look to the servers and confirm if one job is running per GPU, that will
tell us that the fix works. So far, I understand that our jobs were running
many jobs in one GPU most of the times.

I will be at AHM next week. See you there.

Gonzalo

On 9 March 2016 at 13&#58;40, Open Science Grid FootPrints &#60;
osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='26624#1457552457'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-09T19:40:57+00:00">Mar 9, 2016 07:40 PM UTC</time><a class="anchor" name="1457552457">&nbsp;</a></div><pre>Thanks Jeff - sitting down next week would be my preference.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mats Rynge 45</pre></div><div class='update_description'><i onclick="document.location='26624#1457552123'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-09T19:35:23+00:00">Mar 9, 2016 07:35 PM UTC</time><a class="anchor" name="1457552123">&nbsp;</a></div><pre>If any of the VO admins on this ticket (glow, osg, hcc) would like, we can try to coordinate in person next week at the AHM to test pilots using the gpu slots.

Just throwing it out there since I&#39;ll be attending.

Jeff

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Jeffrey Michael Dost 694</pre></div><div class='update_description'><i onclick="document.location='26624#1457551936'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-09T19:32:16+00:00">Mar 9, 2016 07:32 PM UTC</time><a class="anchor" name="1457551936">&nbsp;</a></div><pre>Kyle,

We need someone familiar with testing GPU entries to run some test jobs for us. We don&#39;t have this capability ourselves (that I&#39;m aware of).

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26624#1457551272'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-09T19:21:12+00:00">Mar 9, 2016 07:21 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1457551272">&nbsp;</a></div><pre>Jeff,

Can we confirm that all went well and we can close this ticket?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='26624#1457488081'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-03-09T01:48:01+00:00">Mar 9, 2016 01:48 AM UTC</time><a class="anchor" name="1457488081">&nbsp;</a></div><pre>Hi all,

Both the GOC and SDSC glidein factories have been patched for GPU support. Can someone with GPU test jobs confirm the patches are working?

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26624#1456200560'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-23T04:09:20+00:00">Feb 23, 2016 04:09 AM UTC</time><a class="anchor" name="1456200560">&nbsp;</a></div><pre>We discussed this on the OSG Ops call this morning.

The plan is we will shoot for the March 8th to upgrade the factories for GPU support.

Jeff

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Jeffrey Michael Dost 694</pre></div><div class='update_description'><i onclick="document.location='26624#1455906031'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-19T18:20:31+00:00">Feb 19, 2016 06:20 PM UTC</time><a class="anchor" name="1455906031">&nbsp;</a></div><pre>Hi,

Sorry for the lag here.

We can&#39;t just upgrade production factories to this version, without working out some technical details of managing our config files. Unfortunately I don&#39;t think we&#39;ll be ready to do this until sometime after the OSG AHM. I propose as an alternative that we patch the production factories to give them the gpu functionality only.

I&#39;ll propose this on Monday&#39;s OSG Ops meeting.

Thanks,
Jeff

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Jeffrey Michael Dost 694</pre></div><div class='update_description'><i onclick="document.location='26624#1455819908'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-18T18:25:08+00:00">Feb 18, 2016 06:25 PM UTC</time><a class="anchor" name="1455819908">&nbsp;</a></div><pre>Hi Kyle,

Yeah, we were off for President&#39;s Day. Unfortunately, I think Jeff has been preempted by other work lately. Maybe we should go ahead and push glideinWMS 3.2.12 into production without using the new config changes yet? I&#39;ll check with Jeff today and see what he wants to do.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26624#1455742989'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-17T21:03:09+00:00">Feb 17, 2016 09:03 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1455742989">&nbsp;</a></div><pre>Marty,

Have you been able to talk to Jeff?  I had planned to talk to him Monday, but I assume he was out for Presidents&#39; Day.

-Kyle</pre></div><div class='update_description'><i onclick="document.location='26624#1454512658'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-03T15:17:38+00:00">Feb 3, 2016 03:17 PM UTC</time><a class="anchor" name="1454512658">&nbsp;</a></div><pre>Hi Kyle,

I apologize for not getting back to you the last time you checked in. I must have missed the email. Unfortunately, I don&#39;t think we&#39;re ready yet to roll out this new version of glideinWMS to the production factories just yet. But I&#39;ll double check with Jeff today during our Factory Ops conference call and see where we are with it.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26624#1454497806'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-02-03T11:10:06+00:00">Feb 3, 2016 11:10 AM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1454497806">&nbsp;</a></div><pre>Marty,

Has testing happened?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='26624#1454092978'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-29T18:42:58+00:00">Jan 29, 2016 06:42 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1454092978">&nbsp;</a></div><pre>Marty,

Has testing happened?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='26624#1453229573'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-19T18:52:53+00:00">Jan 19, 2016 06:52 PM UTC</time><a class="anchor" name="1453229573">&nbsp;</a></div><pre>Derek,

Thanks for the update here. Jeff actually just installed this new version on the GOC-ITB factory. It may take us a bit longer than usual to test this version before we push it out to the production factories. There are some significant changes to how we setup entry configuration on the factory. We&#39;re still working out how this will change our usual workflow as the configuration history will now be managed via git. But once we&#39;re done testing and push new version to production, we&#39;ll update you all here and then we can finally close out the issue.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26624#1452870363'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-15T15:06:03+00:00">Jan 15, 2016 03:06 PM UTC</time><a class="anchor" name="1452870363">&nbsp;</a></div><pre>A new version, 3.2.12, has been released with the GPU discovery feature.

<a href='http&#58;//glideinwms.fnal.gov/doc.v3_2_12/history.html' target='_blank' rel='nofollow'>http&#58;//glideinwms.fnal.gov/doc.v3_2_12/history.html</a>

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Derek Weitzel 605</pre></div><div class='update_description'><i onclick="document.location='26624#1452713971'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-13T19:39:31+00:00">Jan 13, 2016 07:39 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1452713971">&nbsp;</a></div><pre>Parag,

Any updates as to when this patch will hit?

Thanks!

-Kyle</pre></div><div class='update_description'><i onclick="document.location='26624#1451937224'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2016-01-04T19:53:44+00:00">Jan 4, 2016 07:53 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1451937224">&nbsp;</a></div><pre>Any updates as to when this patch will hit?

Thanks!

-Kyle</pre></div><div class='update_description'><i onclick="document.location='26624#1451333391'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-28T20:09:51+00:00">Dec 28, 2015 08:09 PM UTC</time><a class="anchor" name="1451333391">&nbsp;</a></div><pre>P.S. i.e., a production release of glideinwms.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26624#1451333197'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-28T20:06:37+00:00">Dec 28, 2015 08:06 PM UTC</time><a class="anchor" name="1451333197">&nbsp;</a></div><pre>Hi Parag,

When you get back from the winter break, maybe you can let us know when this patch is slated to make it into production?

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26624#1450475066'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-18T21:44:26+00:00">Dec 18, 2015 09:44 PM UTC</time> by <b>Parag Mhashilkar</b><a class="anchor" name="1450475066">&nbsp;</a></div><pre>I will be on vacation from December 08, 2015 to January 03, 2016. I will look at my emails after I get back from my vacation.

If you need immediate attention please contact -

- Glideinwms Project&#58; Glideinwms Support (glideinwms-support@....)
- JobSub Project&#58; Open a servicedesk ticket
- Everything else&#58; Gabriele Garzoglio (garzoglio@....)

Thanks & Regards
Parag Mhashilkar</pre></div><div class='update_description'><i onclick="document.location='26624#1450475061'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-18T21:44:21+00:00">Dec 18, 2015 09:44 PM UTC</time> by <b>jdost@....</b><a class="anchor" name="1450475061">&nbsp;</a></div><pre>This is an automated reply;

I am away from the office and will return Dec 21st. Please redirect factory ops related questions to osg-gfactory-support@....

Thank you,
Jeff Dost</pre></div><div class='update_description'><i onclick="document.location='26624#1450475038'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-18T21:43:58+00:00">Dec 18, 2015 09:43 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1450475038">&nbsp;</a></div><pre>I will set this date out to right after the next weekend, as I don&#39;t see much action happening on this ticket and it&#39;s getting to be holiday time.

-Kyle</pre></div><div class='update_description'><i onclick="document.location='26624#1449867743'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-11T21:02:23+00:00">Dec 11, 2015 09:02 PM UTC</time> by <b>Parag Mhashilkar</b><a class="anchor" name="1449867743">&nbsp;</a></div><pre>I will be on vacation from December 08, 2015 to January 03, 2016. I will look at my emails after I get back from my vacation.

If you need immediate attention please contact -

- Glideinwms Project&#58; Glideinwms Support (glideinwms-support@....)
- JobSub Project&#58; Open a servicedesk ticket
- Everything else&#58; Gabriele Garzoglio (garzoglio@....)

Thanks & Regards
Parag Mhashilkar</pre></div><div class='update_description'><i onclick="document.location='26624#1449867720'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-11T21:02:00+00:00">Dec 11, 2015 09:02 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1449867720">&nbsp;</a></div><pre>Hello,

Just wondering if there&#39;s been any updates or progress on this issue in the past week.

Thanks!

-Kyle</pre></div><div class='update_description'><i onclick="document.location='26624#1449170193'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-03T19:16:33+00:00">Dec 3, 2015 07:16 PM UTC</time><a class="anchor" name="1449170193">&nbsp;</a></div><pre>Derek,

Did you have a similar attribute added in your frontend config?

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26624#1449169820'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-12-03T19:10:20+00:00">Dec 3, 2015 07:10 PM UTC</time><a class="anchor" name="1449169820">&nbsp;</a></div><pre>I got it to work by adding the following attribute to the group in the fe config&#58;

&#60;attr name=&#34;GLIDEIN_GPUS&#34; glidein_publish=&#34;True&#34; job_publish=&#34;True&#34; parameter=&#34;True&#34; type=&#34;int&#34; value=&#34;1&#34;/&#62;

It is weird to have the FE set it as the FE doesn&#39;t know about the sites. However I think this is fine until the real implementation is coming down from the gwms team.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mats Rynge 45</pre></div><div class='update_description'><i onclick="document.location='26624#1448919153'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-30T21:32:33+00:00">Nov 30, 2015 09:32 PM UTC</time><a class="anchor" name="1448919153">&nbsp;</a></div><pre>I haven&#39;t been able to get any glideins. I will discuss this offline with Marty and get back to you.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mats Rynge 45</pre></div><div class='update_description'><i onclick="document.location='26624#1448918517'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-30T21:21:57+00:00">Nov 30, 2015 09:21 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1448918517">&nbsp;</a></div><pre>Mats,

Did you send the info to Marty?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='26624#1448058954'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-20T22:35:54+00:00">Nov 20, 2015 10:35 PM UTC</time><a class="anchor" name="1448058954">&nbsp;</a></div><pre>Hi Mats,

Yeah, just let us know to what entries you send the test jobs and when you send them. We&#39;ll check on how the glideins for these GPU jobs faired.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26624#1448035446'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-20T16:04:06+00:00">Nov 20, 2015 04:04 PM UTC</time><a class="anchor" name="1448035446">&nbsp;</a></div><pre>Hey Mats,

Yeah, it&#39;s on glidein-itb that we want you to do the testing. &#34;OSGVOGPU&#34; is the VO name that&#39;s currently set on the entry, can you test using that one?

Brendan Dennis
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brendan Dennis 2659</pre></div><div class='update_description'><i onclick="document.location='26624#1447956733'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-19T18:12:13+00:00">Nov 19, 2015 06:12 PM UTC</time><a class="anchor" name="1447956733">&nbsp;</a></div><pre>I&#39;m ready to do some testing. Marty, is it on the glidein-itb.grid.iu.edu factory you want me to do the testing? And replacing with stringListMember(&#34;OSGVO_ITB&#34;, GLIDEIN_Supported_VOs) with stringListMember(&#34;OSGVOGPU&#34;, GLIDEIN_Supported_VOs) ? Or is it OSGVOGPU_ITB ?

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mats Rynge 45</pre></div><div class='update_description'><i onclick="document.location='26624#1447796751'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-17T21:45:51+00:00">Nov 17, 2015 09:45 PM UTC</time><a class="anchor" name="1447796751">&nbsp;</a></div><pre>Kyle,

We&#39;re still waiting on Mats to confirm OSG glideins / user jobs also have no issue with patch applied to  the GOC-ITB factory.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26624#1447704449'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-16T20:07:29+00:00">Nov 16, 2015 08:07 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1447704449">&nbsp;</a></div><pre>Mats/Marty,

Do we have any progress on this ticket in the last 6 days?

Thanks for anyupdate you might have!

-Kyle</pre></div><div class='update_description'><i onclick="document.location='26624#1447181738'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-10T18:55:38+00:00">Nov 10, 2015 06:55 PM UTC</time><a class="anchor" name="1447181738">&nbsp;</a></div><pre>Thanks, Mats.

Once we can confirm OSG glideins can use this patch for GPU user jobs as well, we&#39;ll begin rolling out the patch starting with the SDSC factory.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26624#1447112698'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-09T23:44:58+00:00">Nov 9, 2015 11:44 PM UTC</time><a class="anchor" name="1447112698">&nbsp;</a></div><pre>Not yet. Probably this week.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Mats Rynge 45</pre></div><div class='update_description'><i onclick="document.location='26624#1447102727'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-09T20:58:47+00:00">Nov 9, 2015 08:58 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1447102727">&nbsp;</a></div><pre>Mats,

have you been able to run some tests for Marty?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='26624#1446751796'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-11-05T19:29:56+00:00">Nov 5, 2015 07:29 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1446751796">&nbsp;</a></div><pre>Mats,

have you been able to run some tests for Marty?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='26624#1446158423'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-29T22:40:23+00:00">Oct 29, 2015 10:40 PM UTC</time><a class="anchor" name="1446158423">&nbsp;</a></div><pre>Derek et al.,

No problem. From what I saw, the patch is looks pretty simple and straightforward. I wouldn&#39;t have a problem with us moving forward and patching the production factories. I don&#39;t think there&#39;d be any chance of it affecting normal operations in any way. However, I&#39;ll let Jeff comment on what he wants to do here. We should probably still patch one factory at a time just in case, probably starting with SDSC, then maybe GOC during its next regularly scheduled maintenance day. Also while we wait for the patch to be rolled out to the production factories, maybe we can also get Mats to run some tests with OSGVOGPU user jobs and glideins from the GOC-ITB?

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26624#1446157752'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-29T22:29:12+00:00">Oct 29, 2015 10:29 PM UTC</time> by <b>dweitzel@....</b><a class="anchor" name="1446157752">&nbsp;</a></div><pre>The patch works on the ITB factory.  It is only allowing 1 job to run on 1 gpu resource, which is perfect.

Now the next question, can we get this patch applied to the production factories?  Once the patch is applied, we can then reconfigure the GLOW and OSG frontends to appropriately request these resources.

Huge thanks to Marty helping me with this.

-Derek

<font color='#7F7E6F'>&#62; On Oct 29, 2015, at 1&#58;06 PM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='26624#1446141957'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-29T18:05:57+00:00">Oct 29, 2015 06:05 PM UTC</time><a class="anchor" name="1446141957">&nbsp;</a></div><pre>Hi guys,

I&#39;ve patched condor_startup.sh on the GOC-ITB factory (glidein-itb.grid.iu.edu). Go ahead and give it a test and let us know if this does the trick.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26624#1446073498'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-28T23:04:58+00:00">Oct 28, 2015 11:04 PM UTC</time><a class="anchor" name="1446073498">&nbsp;</a></div><pre>Thanks, Derek. We&#39;ll get back to you guys when it&#39;s ready to be tested.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26624#1446056441'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-28T18:20:41+00:00">Oct 28, 2015 06:20 PM UTC</time> by <b>dweitzel@....</b><a class="anchor" name="1446056441">&nbsp;</a></div><pre>Here is the hotfix patch&#58;
<a href='https&#58;//github.com/holzman/glideinWMS/commit/6514235d37baca74d4e44a23fa0ae94d1f39853e.patch' target='_blank' rel='nofollow'>https&#58;//github.com/holzman/glideinWMS/commit/6514235d37baca74d4e44a23fa0ae94d1f39853e.patch</a>

-Derek

<font color='#7F7E6F'>&#62; On Oct 28, 2015, at 12&#58;57 PM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='26624#1446055076'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-28T17:57:56+00:00">Oct 28, 2015 05:57 PM UTC</time><a class="anchor" name="1446055076">&nbsp;</a></div><pre>Hi guys,

Again, some actionable information here would be helpful. e.g., Where does said &#34;hot fix&#34; exist? We can test it out on the GOC-ITB factory with you.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26624#1446054227'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-28T17:43:47+00:00">Oct 28, 2015 05:43 PM UTC</time><a class="anchor" name="1446054227">&nbsp;</a></div><pre>Adding OSG gfactory support to CC list.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Derek Weitzel 605</pre></div><div class='update_description'><i onclick="document.location='26624#1446054038'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-28T17:40:38+00:00">Oct 28, 2015 05:40 PM UTC</time><a class="anchor" name="1446054038">&nbsp;</a></div><pre>To be clear, as far as I know, the ball is squarely in the OSG Factory Operations court.  They need implement the hotfix that Parag mentioned.  The other option is to wait for the next release of GlideinWMS which includes the fixes from <a href='https&#58;//cdcvs.fnal.gov/redmine/issues/10092.' target='_blank' rel='nofollow'>https&#58;//cdcvs.fnal.gov/redmine/issues/10092.</a>

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Derek Weitzel 605</pre></div><div class='update_description'><i onclick="document.location='26624#1446050631'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-28T16:43:51+00:00">Oct 28, 2015 04:43 PM UTC</time><a class="anchor" name="1446050631">&nbsp;</a></div><pre>The CHTC could modify the GLOW glidein frontend if you can describe what changes need to be made.
-Nate

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Nathan Yehle 899</pre></div><div class='update_description'><i onclick="document.location='26624#1445900897'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-26T23:08:17+00:00">Oct 26, 2015 11:08 PM UTC</time><a class="anchor" name="1445900897">&nbsp;</a></div><pre>Hello,

We are running these jobs through the GLOW VO GlideinWMS infrastructure, so we are not directly operating the Frontend. This service is operated by Nathan Yehle at CHTC, so I believe he could better comment on the feasibility of &#34;hacking&#34; the fronted in the way that Derek suggests.

Also, could someone comment on what could be the time scale for a proper fix for the partitionable slots to be available in the factories?

thanks,
Gonzalo

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Gonzalo Merino 1270</pre></div><div class='update_description'><i onclick="document.location='26624#1445888575'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-26T19:42:55+00:00">Oct 26, 2015 07:42 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1445888575">&nbsp;</a></div><pre>Parag/Gonzalo,

Do either of you have a response to Derek&#39;s last update?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='26624#1445010024'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-16T15:40:24+00:00">Oct 16, 2015 03:40 PM UTC</time><a class="anchor" name="1445010024">&nbsp;</a></div><pre>Hi Gonzalo,

In short, yes, you are correct.  You are running 16 jobs in one server because of the partitionable slot bugs in glideinwms.  Yes, you are running many jobs on the same GPU because of this.  It is likely causing your jobs to be very inefficient.

As a hack, I believe you can modify the frontend to only advertise 1 CPU, despite what the factory is setting.  I cc&#39;d Parag, who should be able to confirm my suspicion.  There is also a fix for the partitionable slots coming in a new release, but the &#39;hack&#39; in the frontend should help in the mean-time.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Derek Weitzel 605</pre></div><div class='update_description'><i onclick="document.location='26624#1444945243'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-15T21:40:43+00:00">Oct 15, 2015 09:40 PM UTC</time><a class="anchor" name="1444945243">&nbsp;</a></div><pre>Hello,

We see just now that we (icecube) are running 140 gpu jobs at HCC_US_Omaha_crane_gpu.

We see up to 16 jobs in one sever like for instance c0616.crane.hcc.unl.edu.

Can this be an artifact of the bug you are discussing in this ticket? Are we running many jobs in the same GPU because of this partitionable slot mess?

thanks,
Gonzalo

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Gonzalo Merino 1270</pre></div><div class='update_description'><i onclick="document.location='26624#1444773736'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-13T22:02:16+00:00">Oct 13, 2015 10:02 PM UTC</time><a class="anchor" name="1444773736">&nbsp;</a></div><pre>Hi guys,

I&#39;m a bit out of the loop here on this ticket. But maybe this is helpful&#58; all production factories are currently at glideinWMS 3.2.11.2-1 or 3.2.11.2-3, which are available in the osg-development repo. Did you need us to try and patch the factories for this problem until the fix makes it into a stable release? We can start by testing a patch if one does exist on the GOC-ITB factory.

Marty Kandes
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Marty Kandes 3049</pre></div><div class='update_description'><i onclick="document.location='26624#1444767511'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-13T20:18:31+00:00">Oct 13, 2015 08:18 PM UTC</time><a class="anchor" name="1444767511">&nbsp;</a></div><pre>Though the hotfix was released, I do not believe it was ever placed on the factories as they were busy debugging some security issues at the time.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Derek Weitzel 605</pre></div><div class='update_description'><i onclick="document.location='26624#1444766866'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-13T20:07:46+00:00">Oct 13, 2015 08:07 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1444766866">&nbsp;</a></div><pre>I was wondering that myself, Derek.  So, with that having been released, is there any update from either side?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='26624#1444682134'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-12T20:35:34+00:00">Oct 12, 2015 08:35 PM UTC</time><a class="anchor" name="1444682134">&nbsp;</a></div><pre>Parag from the GlideinWMS team provided a hotfix for the factory on Sept. 11.  I see that Jeff Dost was CC&#39;d on the email.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Derek Weitzel 605</pre></div><div class='update_description'><i onclick="document.location='26624#1444080712'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-05T21:31:52+00:00">Oct 5, 2015 09:31 PM UTC</time><a class="anchor" name="1444080712">&nbsp;</a></div><pre>As far as I am aware, we have not been informed of any updated development versions of glideinWMS which fix this issue that have made it into the OSG development or testing repos. However, it does look like this is scheduled to be fixed for the 3.2.12 release, which will hopefully be out soon.

Brendan Dennis
UCSD Glidein Factory Operations

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brendan Dennis 2659</pre></div><div class='update_description'><i onclick="document.location='26624#1444073957'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-10-05T19:39:17+00:00">Oct 5, 2015 07:39 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1444073957">&nbsp;</a></div><pre>I&#39;ve added the factory ops people to this ticket so that Derek doesn&#39;t have to ping them directly.

-Kyle</pre></div><div class='update_description'><i onclick="document.location='26624#1443560119'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-29T20:55:19+00:00">Sep 29, 2015 08:55 PM UTC</time><a class="anchor" name="1443560119">&nbsp;</a></div><pre>Nope, nothing from the GlideinWMS factory ops team.

That being said, GLOW is actually running GPU jobs on Nebraska resources (or, did last week when I checked).  So it&#39;s not a show stopper if the GlideinWMS Factory operators haven&#39;t implemented the patch that they were provided by the GlideinWMS Devel team.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Derek Weitzel 605</pre></div><div class='update_description'><i onclick="document.location='26624#1443559789'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-29T20:49:49+00:00">Sep 29, 2015 08:49 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1443559789">&nbsp;</a></div><pre>Derek,

Any word from any team?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='26624#1442883373'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-22T00:56:13+00:00">Sep 22, 2015 12:56 AM UTC</time> by <b>dweitzel@....</b><a class="anchor" name="1442883373">&nbsp;</a></div><pre>I havent received any update from the GlideinWMS team or the Factory Ops people.  Ill check in with them.

-Derek

<font color='#7F7E6F'>&#62; On Sep 21, 2015, at 2&#58;54 PM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='26624#1442865278'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-21T19:54:38+00:00">Sep 21, 2015 07:54 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1442865278">&nbsp;</a></div><pre>Derek,

Has there been any progress on this issue?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='26624#1441915483'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-10T20:04:43+00:00">Sep 10, 2015 08:04 PM UTC</time><a class="anchor" name="1441915483">&nbsp;</a></div><pre>It turns out that it is a glideinwms issue (see ticket <a href='https&#58;//cdcvs.fnal.gov/redmine/issues/10092' target='_blank' rel='nofollow'>https&#58;//cdcvs.fnal.gov/redmine/issues/10092</a>).  GlideinWMS is not using portionable slots for gpus, and there&#39;s no way to make it partition GPUs without editing glideinwms source.

It&#39;s mostly fine if a user runs multiple processes on a single GPU, albeit inefficient.  As long as the user isn&#39;t complaining about how slow their code is running when they are running on a cluster named &#34;Crane&#34;, then it can probably be ignored for now.  When the fix is implemented, it will likely be implemented for all VOs, therefore Nate will not need to modify anything.

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Derek Weitzel 605</pre></div><div class='update_description'><i onclick="document.location='26624#1441913865'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-10T19:37:45+00:00">Sep 10, 2015 07:37 PM UTC</time> by <b>Kyle Gross</b><a class="anchor" name="1441913865">&nbsp;</a></div><pre>Does anyone have a response to Nate&#39;s last update?

-Kyle</pre></div><div class='update_description'><i onclick="document.location='26624#1441301950'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-03T17:39:10+00:00">Sep 3, 2015 05:39 PM UTC</time> by <b>nyehle@....</b><a class="anchor" name="1441301950">&nbsp;</a></div><pre>The  icecube user is requesting one cpu and one GPU in the manner which works locally here at the CHTC/GLOW&#58;

#  condor_q -name sub-simprod.icecube.wisc.edu 8032311.0  -l | grep -i request
RequestCpus = 1
Requestgpus = 1
AccountingGroup = ifThenElse(Requestgpus &#62; 0,strcat(&#34;gpu.&#34;,Owner),undefined)
RequestDisk = 1000000
Requirements = ( ( ( TARGET.ARCH =?= &#34;X86_64&#34; && TARGET.OpSys =?= &#34;LINUX&#34; ) && ( OpSysLongName =!= &#34;Debian GNU/Linux 7&#34; ) ) ) && ( TARGET.Disk &#62;= RequestDisk ) && ( TARGET.Memory &#62;= RequestMemory ) && ( TARGET.gpus &#62;= Requestgpus ) && ( TARGET.HasFileTransfer )
RequestMemory = 2000

I dont know anything about the pslot config at Omaha, but we use this gpu slot config at the CHTC&#58;

use FEATURE &#58; GPUs
NUM_SLOTS=1
NUM_SLOTS_TYPE_1=1
SLOT_TYPE_1_PARTITIONABLE=true
SLOT_TYPE_1 = cpus=100%,disk=100%,swap=100%,gpus=100%
ASSIGN_CPU_AFFINITY=true

-Nate
On Sep 3, 2015, at 11&#58;41 AM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;

<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='26624#1441298479'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-03T16:41:19+00:00">Sep 3, 2015 04:41 PM UTC</time> by <b>dweitzel@....</b><a class="anchor" name="1441298479">&nbsp;</a></div><pre>Hold on, lets not close this yet.

It appears that you are running partitionable slots on the GPU nodes, which is fine.  But, it looks like you are not correctly partitioning the GPU resources.  Examining the nvidia drivers, I notice that you are running 5 cuda codes on the same GPU (which has to be in-effecient at best, and terrible for the GPU at worst).

Do the user jobs request_gpus = 1?  Is the gpu resources part the partitionable resources?

Each glidein is allocated exactly 1 gpu (there are 3 gpus per node).  Further, they are allocated 8 cores and 16000 GB of ram.  I think the user jobs are not requesting the gpus correctly.

To see how the osg factory does GPU advertising inside a node check script executed before the glidein starts up, look here&#58;
<a href='https&#58;//github.com/opensciencegrid/osg-flock/blob/master/node-check/osgvo-node-advertise#L117' target='_blank' rel='nofollow'>https&#58;//github.com/opensciencegrid/osg-flock/blob/master/node-check/osgvo-node-advertise#L117</a>

The XML for gpu group is here&#58;
<a href='https&#58;//github.com/opensciencegrid/osg-flock/blob/master/gwms-frontend/frontend.xml#L60' target='_blank' rel='nofollow'>https&#58;//github.com/opensciencegrid/osg-flock/blob/master/gwms-frontend/frontend.xml#L60</a>

-Derek

<font color='#7F7E6F'>&#62; On Sep 3, 2015, at 11&#58;27 AM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='26624#1441297677'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-03T16:27:57+00:00">Sep 3, 2015 04:27 PM UTC</time><a class="anchor" name="1441297677">&nbsp;</a></div><pre>Its working we can resolve this, thanks!

# condor_status -const &#39;Gpus&#62;0&#39; -wide -run
Name                                                 OpSys       Arch   LoadAv RemoteUser                  ClientMachine

slot1@glidein_32301_41040393@.... LINUX       X86_64  0.250 ice3simusr@.... sub-simprod.icecube.wisc.edu
slot3@glidein_32301_41040393@.... LINUX       X86_64  0.000 ice3simusr@.... sub-simprod.icecube.wisc.edu
slot5@glidein_32301_41040393@.... LINUX       X86_64  0.000 ice3simusr@.... sub-simprod.icecube.wisc.edu
slot7@glidein_32301_41040393@.... LINUX       X86_64  0.000 ice3simusr@.... sub-simprod.icecube.wisc.edu
Machines         MIPS       KFLOPS   AvgLoadAvg

X86_64/LINUX        4        80292      6250840   0.062

Total        4        80292      6250840   0.062

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Nathan Yehle 899</pre></div><div class='update_description'><i onclick="document.location='26624#1441218447'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-09-02T18:27:27+00:00">Sep 2, 2015 06:27 PM UTC</time> by <b>dweitzel@....</b><a class="anchor" name="1441218447">&nbsp;</a></div><pre>Glow was banned from the gpu resources because of previous jobs which would run over their memory allocation.  We have undone the banning, and I see GPU glideins are running.  Can you confirm that gpu glideins are showing up in your collector?

-Derek

<font color='#7F7E6F'>&#62; On Aug 31, 2015, at 11&#58;23 AM, Open Science Grid FootPrints &#60;osg@....&#62; wrote&#58;</font>
<font color='#7F7E6F'>&#62;</font>
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='26624#1441038218'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-31T16:23:38+00:00">Aug 31, 2015 04:23 PM UTC</time><a class="anchor" name="1441038218">&nbsp;</a></div><pre>Hi,

It looks like your jobs are just in queue on crane for GPU resources.  Looks like the GPU jobs where submitted on the 25th.  It appears the glow VO is being limited on our side, and I will investigate why.

-Derek

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Derek Weitzel 605</pre></div><div class='update_description'><i onclick="document.location='26624#1440705931'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2015-08-27T20:05:31+00:00">Aug 27, 2015 08:05 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1440705931">&nbsp;</a></div><pre>Hi I am trying to reopen ticket <a href='23681.html' target='_blank' rel='nofollow'>https&#58;//ticket.opensciencegrid.org/23681</a>
I still cannot get GLOW VO to schedule GPU jobs.

My frontend.xml is here <a href='http&#58;//glidein2.chtc.wisc.edu/frontend.xml' target='_blank' rel='nofollow'>http&#58;//glidein2.chtc.wisc.edu/frontend.xml</a>
(accessible only from whitelisted ips, UNL and other CE sites should be whitelisted)

Basically I changed it to be lower case as described in the old ticket&#58;
&#60;attr name=&#34;gpus&#34; glidein_publish=&#34;True&#34; job_publish=&#34;False&#34; parameter=&#34;True&#34; type=&#34;int&#34; value=&#34;1&#34;/&#62;

but it still doesnt work.
I do see jobs in the glowGPU section but none seem to create actual glideins&#58;

[2015-08-27 14&#58;55&#58;30,245] INFO&#58;             Jobs in schedd queues                 |         Glideins        |       Cores       |    Request
[2015-08-27 14&#58;55&#58;30,245] INFO&#58; Idle (match  eff   old  uniq )  Run ( here  max ) | Total  Idle   Run  Fail | Total  Idle   Run | Idle MaxRun Down Factory
[2015-08-27 14&#58;55&#58;30,245] INFO&#58;  4570( 9139  4570  4554     0)    53(    0 10000) |     0     0     0     0 |     0     0     0 |    10   658 Up   HCC_US_Omaha_crane_gpu@gfactory_instance@SDSC@....
[2015-08-27 14&#58;55&#58;30,274] INFO&#58;  4570( 9139  4570  4554     0)    53(    0 10000) |     0     0     0     0 |     0     0     0 |    10   658 Up   HCC_US_Omaha_crane_gpu@gfactory_instance@OSGGOC@....
[2015-08-27 14&#58;55&#58;30,274] INFO&#58;             Jobs in schedd queues                 |         Glideins        |       Cores       |    Request
[2015-08-27 14&#58;55&#58;30,275] INFO&#58; Idle (match  eff   old  uniq )  Run ( here  max ) | Total  Idle   Run  Fail | Total  Idle   Run | Idle MaxRun Down Factory
[2015-08-27 14&#58;55&#58;30,275] INFO&#58;  9140(18278  9140  9108     0)   106(    0 20000) |     0     0     0     0 |     0     0     0 |    20  1316 Up   Sum of useful factories
[2015-08-27 14&#58;55&#58;30,275] INFO&#58;     0(    0     0     0     0)     0(    0     0) |     0     0     0     0 |     0     0     0 |     0     0 Down Sum of down factories
[2015-08-27 14&#58;55&#58;30,275] INFO&#58;     0(    0     0     0     0)     0(    0     0) |     0     0     0     0 |     0     0     0 |     0     0 Down Unmatched
[2015-08-27 14&#58;55&#58;30,309] INFO&#58; Advertising global and singular requests for factory gfactory-1.t2.ucsd.edu

We have icecube gpu jobs that could use these resources, please help!

-Nate

by /DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Nathan Yehle 899</pre></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F26624">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

});
</script>


</body>
