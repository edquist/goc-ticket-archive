<!DOCTYPE html>
<html lang="en">
  <head>
  <base href="">
    <title>[16475] osg-configure failing after update to OSG 3.1.22</title>    <meta charset="utf-8" />
    <meta name="verify-v1" content="na5IcAJsZVOfEkboRxuIiZ1zpZgnZiWra+nKcS7nA/o=" />
    <meta name="google-site-verification" content="DLrk3ft4s8b-S2TloLCL2LD_t6wcTjgSluf5pmiu2kA" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <link href="https://ticket.opensciencegrid.org/rss" rel="alternate" type="application/rss+xml" title="GOC Ticket Update feed" />

    <style type="text/css">
      body {
        padding-top: 50px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
     #search {
            width: 300px;
     }

    </style>

<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.0.1.js"></script>

   <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet"/>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

    <link href="css/ticket.css" rel="stylesheet" />
    <script src="lib/jquery.cookie.js"></script>

    <link href="images/tag_orange.png" rel="icon" type="image/png"/>
    <script src='https://www.google.com/recaptcha/api.js'></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" style="padding: 6px 0px 0px 6px;" href="http://opensciencegrid.org"><img src="images/osglogo.40x30.png"/></a>
            <ul class="nav">
                <li class="dropdown"><a href="https://ticket.opensciencegrid.org/#" class="dropdown-toggle" data-toggle="dropdown">GOC Ticket <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <li><a href="https://my.opensciencegrid.org">MyOSG</a></li>
                    <li><a href="https://oim.opensciencegrid.org">OIM</a></li>
                    <li class="active"><a href="https://ticket.opensciencegrid.org/index">Ticket</a></li>
	<li class="divider"></li>
	<li><a href="http://repo.grid.iu.edu">Repo</a></li>
	<li class="divider"></li>
	<li><a href="http://blogs.grid.iu.edu">Blog</a></li>
                    <li><a href="http://display.grid.iu.edu">Display</a></li>
                    <li><a href="http://osggoc.blogspot.com/">News</a></li>
                    </ul>
                </li>
            </ul>
            <ul class="nav pull-right">
                <li><a href="https://ticket.opensciencegrid.org/sso/">Login</a></li>            </ul>

            <div class="nav-collapse">
                <ul class="nav">
			 <li id="menu_submit"><a href="https://ticket.opensciencegrid.org/submit">Submit</a></li><li id="menu_view" class="dropdown"><a href="https://ticket.opensciencegrid.org/\#" class="dropdown-toggle" data-toggle="dropdown">View <b class="caret"></b></a><ul class="dropdown-menu"><li id="submenu_listopen"><a href="https://ticket.opensciencegrid.org/list/open">Open Tickets</a></li><li id="submenu_listrecentclose"><a href="https://ticket.opensciencegrid.org/list/recentclose">Recently Closed Tickets</a></li><li class="divider"></li><li id="submenu_alltickets"><a href="https://ticket.opensciencegrid.org/search?q=&amp;sort=id">All Tickets</a></li></ul></li>                </ul>

                <form class="navbar-search pull-right" action="https://ticket.opensciencegrid.org/viewer">
                    <input id="search" type="text" name="id" class="search-query span2" placeholder="Search Ticket" value=""/>
                </form>
            </div>
        </div>
      </div>
    </div>

<script type='text/javascript' src='lib/jquery.timeago.js'></script>
<script type='text/javascript' src='lib/byte2size.js'></script>
<style>
#updates .toolbar {
position: relative;
margin-top: 0px;
top: -10px;
font-weight: normal;
}
#updates a.anchor {
position: relative;
top: -50px;
}
#updates .selected pre {
animation:selected 2s;
animation-iteration-count: 2;
animation-direction: alternate;
-webkit-animation:selected 2s; 
-webkit-animation-iteration-count: 2;
-webkit-animation-direction: alternate;
box-shadow: inset 1px 1px 20px #9ad;
border: 1px solid #9ab;
margin: 5px 0px;
padding-left: 10px;
}
@keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ab;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
@-webkit-keyframes selected {
    from  {
        box-shadow: inset 1px 1px 20px #9ad;
        border: 1px solid #9ad;
    }
    to {
        box-shadow: inset 1px 1px 20px #05c;
        border: 1px solid #05c;
    }
}
#updates pre {
background-color: inherit;
line-height: 15px;
padding: 5px;
}
#updates .header {
color: #999;
}
#updates .update_history pre {
background-color: #eee;
color: #666;
font-size: 85%;
}
#updates .clickable {
cursor: pointer;
}
#updates .clickable:hover {
color: #D98719;
}
#updates .meta_information pre {
background-color: #fed;
}
#similar_tickets {
max-height: 300px;
overflow-y: auto;
pointer-events: none;
padding: 5px;
background-color: #f4f4f4;
}
.btn-toolbar {
margin-bottom: 0;
height: 30px;
}
#peers {
position: fixed;
bottom: 0px;
right: 0px;
z-index: 100;
list-style: none;
padding: 5px 0px 0px 5px;
margin: 0px;
background-color: white;
box-shadow: 0px 0px 10px white;
}
#peers li {
background-color: #ccc;
color: #000;
display: inline-block;
padding: 5px 10px;
margin-right: 5px;
position: relative;
}
/*
#peers li:hover {
background-color: #999;
cursor: pointer;
}
*/
#peers span.ip {
padding-left: 5px;
color: #666;
}
#peers .new {
bottom: -30px;
}
/*
#peers .me {
background-color: red;
}
*/
</style>

<div class="container-fluid">
<ul id="peers"></ul>
<div class="alert alert-danger"><a class="close" href="https://ticket.opensciencegrid.org/#" data-dismiss="alert">&times;</a>By the end of May 2018, the ticketing system at https://ticket.opensciencegrid.org will be retired and support will be provided at https://support.opensciencegrid.org. Throughout this transition the support email (help@opensciencegrid.org) will be available as a point of contact.<br><br>                                                   
                                                                                                                                                                                   
Please see the service migration page for details: https://opensciencegrid.github.io/technology/policy/service-migrations-spring-2018/#ticket</div><div id="presence" class="pull-right"></div><div class="ticketgui"><script type="text/javascript" src="lib/checktab.js"></script>

<script>
var expanded = false;
function expand_description() {
    var desc = $(".description");
    if(!expanded) {
        expanded = true;
        //expand to minheight
        var min = 250;
        if(desc.height() < min) {
            desc.animate({height: min}, 200);
        }
    }
}

$(document).ready(function() {
    $("input[name='nad']").datepicker({
        dateFormat: 'yy-mm-dd'
    });
});

</script>



<style>
.form-horizontal .control-label {
padding-top: inherit;
font-size:90%;
color:#666;
}
label {
margin-bottom: 0px;
}
.controls {
line-height: 18px;
}
</style>
<form class="form-horizontal" action="https://ticket.opensciencegrid.org/viewer/updatebasic?id=16475" method="post">
<div class="page-header">
    <h3><span class="muted">16475</span> / osg-configure failing after update to OSG 3.1.22</h3>
</div>

<div class="row-fluid">
<div class="span5">
    <legend>Contact</legend>
    <div class="control-group">
        <label class="control-label">Full Name</label>
        <div class="controls">Daniel Bradley</div>
    </div>
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Phone</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>
    <div class="control-group">
        <label class="control-label">CC</label>
        <div class="controls">
            <i class="icon-lock"></i>        </div>
    </div>

    <legend>Details</legend>
    <div class="control-group"><label class="control-label">Resource Name</label><div class="controls">GLOW-OSG</div></div><div class="control-group"><label class="control-label">Associated VO</label><div class="controls">CMS</div></div><div class="control-group"><label class="control-label">Submitted Via</label><div class="controls">GOC Ticket/submit</div></div><div class="control-group"><label class="control-label">Submitter</label><div class="controls">Daniel Bradley</div></div><div class="control-group"><label class="control-label">Support Center</label><div class="controls">USCMS_Tier2</div></div>
    <div class="control-group">
        <label class="control-label">Ticket Type</label>
        <div class="controls">Problem/Request</div>
    </div>
    <div class="control-group">
        <label class="control-label">Priority</label>
        <div class="controls">Normal</div>
    </div>
    <div class="control-group">
        <label class="control-label">Status</label>
        <div class="controls">
Closed</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action</label>
        <div class="controls">Software Team Review/Check for update</div>
    </div>
    <div class="control-group">
        <label class="control-label">Next Action Deadline</label>
        <div class="controls flag_red">2013-09-13</div>
    </div>

</div><!--span-->
<div class="span7">
    <legend>Assignees</legend>
    <div class="assignee" style="width: 60%">USCMS Tier 2 <span class="muted"> / OSG Support Centers</span></div><div class="assignee" style="width: 60%">Software Support (Triage) <span class="muted"> / OSG Software Team</span></div><div class="assignee" style="width: 60%">Suchandra Thapa <span class="muted"> / OSG Software Team</span></div>    <br>

    <legend>Assignees</legend>
    TODO
    <br>

    <style>
legend.noborder {
border-bottom: none;
}
</style>

<div id="attachment-list"/>
<script>
$(function () {
    var first = true;
    $.getJSON("attachment/list/16475", function (files) {
        //console.dir(files);
        var html = "<table class=\"table table-condensed\">";
        $(files).each(function() {
            if(first) {
                first = false;
                html += "<legend class=\"noborder\">Attachmenets</legend>";
            }
            html += "<tr class=\"attachment\">";
            html += "<td><img src="\&quot;&quot;+this.thumbnail_url+&quot;\&quot;/"></td>";
            html += "<td><a href="\&quot;&quot;+this.url+&quot;\&quot;" target=\"_blank\">"+this.name+"</a></td>";
            html += "<td>"+bytesToSize(this.size, 1)+"</td>";
            html += "</tr>";
        });
        html += "</table>";
        $("#attachment-list").html(html);
    });
});

function download(url) {
    window.open(url, "_blank");
}
</script>


</div><!--span-->
</div><!--row-fluid-->


</form>

</div>
<div id="updates" style="clear: both;">
    <legend>Past Updates
    <div class="btn-toolbar pull-right toolbar">
        <div class="btn-group">
                <a class="btn btn-small" href="https://ticket.opensciencegrid.org/16475?sort=up&amp;"><i class="icon-arrow-up"></i> Sort</a>

        
        <a class="btn btn-small" href="https://ticket.opensciencegrid.org/16475?expandall=true&amp;">Expand Descriptions</a>        <a class="btn btn-small" target="_blank" href="mailto:osg@tick.globalnoc.iu.edu?subject=Open%20Science%20Grid%3A%20osg-configure%20failing%20after%20update%20to%20OSG%203.1.22%20ISSUE%3D16475%20PROJ%3D71"><i class="icon-envelope"></i> Update w/Email</a>
        </div>
    </div><!--btn-toolbar-->
    </legend>

    <div class='update_description'><i onclick="document.location='16475#1379356857'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-16T18:40:57+00:00">Sep 16, 2013 06:40 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1379356857">&nbsp;</a></div><pre>Thank you for informing us that this issue has been resolved. I will close this ticket.  Please submit problems, requests, and questions at&#58; <a href='https&#58;//ticket.grid.iu.edu/goc/open' target='_blank' rel='nofollow'>https&#58;//ticket.grid.iu.edu/goc/open</a> OSG Grid Operations Center goc@...., 317-278-9699 Visit the OSG Operations Page&#58; <a href='http&#58;//osggoc.blogspot.com/' target='_blank' rel='nofollow'>http&#58;//osggoc.blogspot.com/</a></pre></div><div class='update_description'><i onclick="document.location='16475#1378754380'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T19:19:40+00:00">Sep 9, 2013 07:19 PM UTC</time><a class="anchor" name="1378754380">&nbsp;</a></div><pre>I confirm that osg-configure 1.0.41 does not exhibit the problem.  Thanks!

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dbradley/CN=614788/CN=Daniel Charles Bradley</pre></div><div class='update_description'><i onclick="document.location='16475#1378752957'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-09T18:55:57+00:00">Sep 9, 2013 06:55 PM UTC</time> by <b>Christopher Pipes</b><a class="anchor" name="1378752957">&nbsp;</a></div><pre>Hi Dan,

Could you please confirm whether or not this issue is resolved?

Thanks,
Chris</pre></div><div class='update_description'><i onclick="document.location='16475#1378493582'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-09-06T18:53:02+00:00">Sep 6, 2013 06:53 PM UTC</time> by <b>Neha Sharma</b><a class="anchor" name="1378493582">&nbsp;</a></div><pre>Hi Dan
Reading the jira ticket, this fix seems to have made it in to osg-configure 1.0.41
Please install that from osg-testing repo and let us know how it goes

Thanks
-Neha</pre></div><div class='update_description'><i onclick="document.location='16475#1377621586'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-27T16:39:46+00:00">Aug 27, 2013 04:39 PM UTC</time><a class="anchor" name="1377621586">&nbsp;</a></div><pre>I installed osg-configure-1.0.37-1.osg.  I did not update any other packages.  The problem still remains&#58;

sudo osg-configure -c
Please contact the developer, an unknown error occurred
CRITICAL Unknown exception encountered while running&#58; Bad value substitution&#58;
section&#58; [GIP]
option &#58; gsiftp_host
key    &#58; localhost
rawval &#58; %(localhost)s

Unknown exception encountered while running&#58; Bad value substitution&#58;
section&#58; [GIP]
option &#58; gsiftp_host
key    &#58; localhost
rawval &#58; %(localhost)s

You may be able to get more details rerunning /usr/sbin/osg-configure with the -d option and/or by examining /var/log/osg/osg-configure.log

If I work around that problem by pasting the contents of 00-defaults.ini into the top of all other ini files, I observe another new behavior/problem&#58;

$ sudo osg-configure -d -c
Writing debug information to /var/log/osg/osg-configure.log
Please contact the developer, an unknown error occurred
CRITICAL Unknown exception encountered while running&#58; &#39;condor_config&#39;
Unknown exception encountered while running&#58; &#39;condor_config&#39;
You may be able to get more details rerunning /usr/sbin/osg-configure with the -d option and/or by examining /var/log/osg/osg-configure.log

I then downgraded to osg-configure-1.0.35-1.  It does not report an exception running condor_config.

Let me know if you would prefer to work via JIRA.  I don&#39;t have a JIRA account, so I am continuing to report here for now.

--Dan

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dbradley/CN=614788/CN=Daniel Charles Bradley</pre></div><div class='update_description'><i onclick="document.location='16475#1377618982'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-27T15:56:22+00:00">Aug 27, 2013 03:56 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1377618982">&nbsp;</a></div><pre>Dan&#58;

The osg-configure-1.0.37-1.osg RPMs are available from the osg-testing repository. If you would like to test the package from there, that would be great! Tim Theisen is coordinating acceptance testing, FYI.

This bug is being tracked in the OSG JIRA instance&#58; &#60;<a href='https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-1168&#62' target='_blank' rel='nofollow'>https&#58;//jira.opensciencegrid.org/browse/SOFTWARE-1168&#62</a>;. If the information there is sufficient for you, I would like to close this GOC ticket, so that we can have a single source of updates, etc. Please let me know how you would like to proceed.

â€” Tim</pre></div><div class='update_description'><i onclick="document.location='16475#1377202201'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-22T20:10:01+00:00">Aug 22, 2013 08:10 PM UTC</time><a class="anchor" name="1377202201">&nbsp;</a></div><pre>Hi all,

I just got back from vacation.  Thanks for fixing the problem.  We would be willing to test Suchandra&#39;s patch.  Where can we get it?

--Dan

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dbradley/CN=614788/CN=Daniel Charles Bradley</pre></div><div class='update_description'><i onclick="document.location='16475#1377010588'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-20T14:56:28+00:00">Aug 20, 2013 02:56 PM UTC</time> by <b>Brian Lin</b><a class="anchor" name="1377010588">&nbsp;</a></div><pre>Hi all,
Would anyone be willing to test Suchandra&#39;s patch?
- Brian</pre></div><div class='update_description'><i onclick="document.location='16475#1376940496'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-19T19:28:16+00:00">Aug 19, 2013 07:28 PM UTC</time> by <b>Suchandra Thapa</b><a class="anchor" name="1376940496">&nbsp;</a></div><pre>Hi,

I&#39;ve identified the bug that&#39;s causing this and I have a patch that I&#39;m testing.  I&#39;ll get the update osg-configure rpms into the next OSG release.

Suchandra</pre></div><div class='update_description'><i onclick="document.location='16475#1376680691'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-16T19:18:11+00:00">Aug 16, 2013 07:18 PM UTC</time> by <b>ajit@....</b><a class="anchor" name="1376680691">&nbsp;</a></div><pre>Hi Suchandra,

I put the 2 files of interest at <a href='http&#58;//www.hep.wisc.edu/' target='_blank' rel='nofollow'>http&#58;//www.hep.wisc.edu/</a>~ajit/for_Suchandra/*.

1) The 00-defaults.ini and 00-defaults.ini.old remain same (no modifications).

2) 20-condor.ini.old worked fine in 3.1.18 with the 00-defaults.ini cofiguration, but generated the
error (that Dan mentioned) in 3.1.22.

3) As a temporary fix, Dan tweaked the 20-condor.ini.old file (added the [DEFAULT] section at the
top and hardcoded the CEs for the &#34;job_contact&#34; and &#34;util_contact&#34; variables at the same time) to
make it work with 3.1.22. The tweaked file is now 20-condor.ini which works.

Dan was primarily working on the cvmfs update/security fix while he decided to also do the osg
upgrade and then realised that the osg-configure was generating the error. He is out on vacation for
a week, and will be back on the 22nd/23rd Aug.

Please let me know if you need any further info regarding this.

Thanks,
- Ajit

Open Science Grid FootPrints wrote&#58;
<font color='#7F7E6F'>&#62; [Duplicate message snipped]</font></pre></div><div class='update_description'><i onclick="document.location='16475#1376676346'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-16T18:05:46+00:00">Aug 16, 2013 06:05 PM UTC</time> by <b>Suchandra Thapa</b><a class="anchor" name="1376676346">&nbsp;</a></div><pre>Hi Dan,

Could you send me a copy of your ini files?  There hasn&#39;t been any large changes to osg-configure recently and it&#39;s using the standard python ConfigParser module to do the ini file parsing and substitution so things shouldn&#39;t have broken.   Were any other updates made at the same time as the osg-configure update?

Suchandra</pre></div><div class='update_description'><i onclick="document.location='16475#1376672651'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-16T17:04:11+00:00">Aug 16, 2013 05:04 PM UTC</time> by <b>Tim Cartwright</b><a class="anchor" name="1376672651">&nbsp;</a></div><pre>Suchandra&#58; Please investigate, and if possible reply to Dan yet today.</pre></div><div class='update_description'><i onclick="document.location='16475#1376587448'; reset_anchor();" class="pull-right icon icon-share"></i><div class="header"><time datetime="2013-08-15T17:24:08+00:00">Aug 15, 2013 05:24 PM UTC</time> by <b>OSG-GOC</b><a class="anchor" name="1376587448">&nbsp;</a></div><pre>We upgraded from OSG 3.1.18 to 3.1.22.  After doing so, osg-configure -c fails with the following complaint&#58;

$ sudo osg-configure -c
Please contact the developer, an unknown error occurred
CRITICAL Unknown exception encountered while running&#58; Bad value substitution&#58;
section&#58; [Condor]
option &#58; job_contact
key    &#58; localhost
rawval &#58; %(localhost)s/jobmanager-condor

Unknown exception encountered while running&#58; Bad value substitution&#58;
section&#58; [Condor]
option &#58; job_contact
key    &#58; localhost
rawval &#58; %(localhost)s/jobmanager-condor

You may be able to get more details rerunning /usr/sbin/osg-configure with the -d option and/or by examining /var/log/osg/osg-configure.log

localhost is defined in /etc/osg/config.d/00-defaults.ini&#58;

[DEFAULT]
localhost = cmsgrid01.hep.wisc.edu

Has something changed with respect to the way substitutions work in the ini files?

--Dan

by /DC=ch/DC=cern/OU=Organic Units/OU=Users/CN=dbradley/CN=614788/CN=Daniel Charles Bradley</pre></div><legend>Similar Recent Tickets <small>modified within the last 30 days</small></legend><div id="similar_tickets"><p class="muted">No similar tickets found.</p></div>
</div>
<script type="text/javascript">
function reset_anchor() {
    $("#updates .selected").removeClass("selected");
    var urls = document.location.toString().split('#'); 
    var anchor = urls[1];
    if(anchor) {
        $("a[name='"+anchor+"']").parents(".update_description").addClass("selected");
    }
}
function submitspam(ticket_id) {
    myret = confirm("Would you like to close this ticket as a security ticket, and submit the ticket content to akismet?");
    if(myret == true) {
        $.ajax("viewer/processspam?id="+ticket_id).done(function() {
            window.location.reload();
        });
    }
}

$(function() {
    reset_anchor();
    var ADDITIONAL_COOKIE_NAME = 'gocticket';
    var options = { path: '/', expires: 365};

    if(window.opener && window.opener.name == "gocticket_list") {
        v = $.cookie("closewindow");
        if(!v) {
            $("#closewindow").attr("checked", "checked"); //on by default
        } else {
            if(v == "checked") {
                $("#closewindow").attr("checked", "checked");
            }
        }
        $("#closewindow").click(function() {
            $.cookie("closewindow", $(this).attr('checked'), options);
        });
    } else {
        $("#closewindow_area").hide();
    }
    function updateTimeago() {
        $("time").timeago();
        setTimeout(updateTimeago, 30*1000);
    }
    updateTimeago();
    $(".description").focus(expand_description);
});
</script>
<hr/>
<footer>
<p>GOC Ticket Version 2.2 | <a href="https://ticket.opensciencegrid.org/goc/submit?app_issue_check=on&amp;app_issue_type=goc&amp;app_goc_url=https%3A%2F%2Fticket.opensciencegrid.org%3A443%2F16475">Report Bugs</a>
 | <a href="https://github.com/opensciencegrid/operations/blob/master/docs/privacy.md">Privacy Policy</a>
</p>

<p> <img align="top" src="images/tag_orange.png"/> Copyright 2018 The Trustees of Indiana University - Developed for Open Science Grid</p>
</footer>


</div><!--container-fluid-->
<script src="https://ticket1.grid.iu.edu:8443/socket.io/socket.io.js"></script>
<script>
var chat = io.connect('https://ticket1.grid.iu.edu:8443');
chat.on('connect', function() {
    chat.emit('authenticate', {nodekey:'', ticketid: 16475});
});
chat.on('peers', function(peers) {
    $("#peers").html("");
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('peer_disconnect', function(pid) {
    $("#peer_"+pid).hide("slow");
});
chat.on('peer_connected', function(peers) {
    //expect only 1 peer connecting, but..
    for(var pid in peers) {
        var peer = peers[pid];
        addPeer(pid, peer);
    }
});
chat.on('submit', function() {
    if(confirm("This ticket was updated. Do you want to refresh?")) {
        history.go(0);
    }
});

function addPeer(pid, peer) {
    var ipinfo = "";
    if(peer.ip != undefined) {
        ipinfo = "<span class=\"ip\">"+peer.ip+"</span>";
    }
    if(chat.io.engine.id == pid) {
        //don't display myself
        return;
    }
    var html = "<li class=\"new\" id=\"peer_"+pid+"\" class=\"peer\">"+peer.name+ipinfo+"</li>";
    $("#peers").prepend(html);
    $("#peers .new").animate({bottom: 0}, 1000, function() {$(this).removeClass("new")});
}

$(function() {
    $("#ticket_form").submit(function() {
        chat.emit('submit');
        return true;
    });
});
</script>
<script>
//used by searchbox
function parseValue(value) {
    var obj = new Object();
    var tokens = value.split("\t");
    obj.str = tokens[0];
    obj.count = tokens[1];
    return obj;
}

$(function() {
    //bootstrap-2.0.4 stuff
    $(".alert-message").alert();
    $(".dropdown-toggle").dropdown();
    $("span[rel='tooltip']").tooltip();
    $("a[rel=popover]").popover();

    //activate menu that user is currently on
    $("#menu_navigator").addClass("active"); 
    $("#submenu_").addClass("active"); 

    //translate zend validation error message to bootstrap
    $(".errors").addClass("alert").addClass("alert-error");

    //enable autocomplete for search box
    $("#search").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "search/autocomplete",
                dataType: "text",
                data: {
                    //featureClass: "P",
                    //style: "full",
                    //maxRows: 12,
                    //name_startsWith: request.term
                    q: request.term
                },
                success: function( data ) {
                    response( $.map( data.split("\n"), function( item ) {
                        if(item == "") return null;
                        return {
                            value: item
                        }
                    }));
                }
            });
        },
        select: function(event, ui) {
            document.location = "search?q="+ui.item.value;
        }
    });
    
});
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-69012-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

</body>
